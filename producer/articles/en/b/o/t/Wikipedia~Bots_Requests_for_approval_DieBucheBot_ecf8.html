<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="Wikipedia:Bots/Requests for approval/DieBucheBot,CommonsDelinker,DieBuche,DieBucheBot,Mets501,Orgullomoore,Ram-Man,Yonatan,Gimmetrow,Mets501,Yonatan" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>Wikipedia:Bots/Requests for approval/DieBucheBot - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-4">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Wikipedia:Bots/Requests for approval/DieBucheBot</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"><span class="subpages">&lt; <a href="../../../b/o/t/Wikipedia%7EBots_fd71.html" title="Wikipedia:Bots">Wikipedia:Bots</a> | <a href="../../../b/o/t/Wikipedia%7EBots_Requests_for_approval_de2f.html" title="Wikipedia:Bots/Requests for approval">Requests for approval</a></span></div>
	    	    	    <!-- start content -->
	    <p><a name="DieBucheBot" id="DieBucheBot"></a></p>
<h2><span class="editsection">[<a href="../../../b/o/t/Wikipedia%7EBots_Requests_for_approval_DieBucheBot_ecf8.html" title="Edit section: DieBucheBot">edit</a>]</span> <span class="mw-headline"><a href="../../../d/i/e/User%7EDieBucheBot_5d82.html" title="User:DieBucheBot">DieBucheBot</a></span></h2>
<p><span class="plainlinks"><small><strong class="selflink">tasks</strong> • <a href="../../../c/o/n/Special%7EContributions_DieBucheBot_6e2e.html" title="Special:Contributions/DieBucheBot">contribs</a> • <a href="http://tools.wikimedia.de/~interiot/cgi-bin/Tool1/wannabe_kate?username=DieBucheBot&amp;site=en.wikipedia.org" class="external text" title="http://tools.wikimedia.de/~interiot/cgi-bin/Tool1/wannabe_kate?username=DieBucheBot&amp;site=en.wikipedia.org" rel="nofollow"><span style="color:#002bb8">count</span></a> • <a href="http://en.wikipedia.org/wiki/Special:Log?user=DieBucheBot" class="external text" title="http://en.wikipedia.org/wiki/Special:Log?user=DieBucheBot" rel="nofollow"><span style="color:#002bb8">logs</span></a> • <a href="http://en.wikipedia.org/wiki/Special:Log/move?user=DieBucheBot" class="external text" title="http://en.wikipedia.org/wiki/Special:Log/move?user=DieBucheBot" rel="nofollow"><span style="color:#002bb8">page moves</span></a> • <a href="../../../b/l/o/Special%7EBlockip_DieBucheBot_1808.html" title="Special:Blockip/DieBucheBot">block user</a> • <a href="http://en.wikipedia.org/wiki/Special:Log/block?page=User:DieBucheBot" class="external text" title="http://en.wikipedia.org/wiki/Special:Log/block?page=User:DieBucheBot" rel="nofollow"><span style="color:#002bb8">block log</span></a> • <a href="http://en.wikipedia.org/w/index.php?title=Special%3ALog&amp;type=makebot&amp;user=&amp;page=User:DieBucheBot" class="external text" title="http://en.wikipedia.org/w/index.php?title=Special%3ALog&amp;type=makebot&amp;user=&amp;page=User:DieBucheBot" rel="nofollow">flag log</a> • <a href="../../../m/a/k/Special%7EMakebot_DieBucheBot_ce99.html" title="Special:Makebot/DieBucheBot">flag bot</a></small></span></p>
<p><b>Operator:</b> <a href="../../../d/i/e/User%7EDieBuche_fe22.html" title="User:DieBuche">User:DieBuche</a></p>
<p><b>Automatic or Manually Assisted:</b> Automatic, but supervised</p>
<p><b>Programming Language(s):</b> pywikipedia framework</p>
<p><b>Function Summary:</b> Do some replacements especially superseded pictures from commons</p>
<p><b>Edit period(s)</b> <i>(e.g. Continuous, daily, one time run)</i><b>:</b> 3-4 times a week</p>
<p><b>Edit rate requested:</b> 4-5 edits per minute</p>
<p><b>Already has a bot flag</b> <i>(Y/N)</i><b>:</b> No</p>
<p><b>Function Details:</b> This Bot replaces pictures on commons that have been marked as "superseded" <a href="http://commons.wikimedia.org/w/index.php?title=Commons:Deletion_requests/Superseded" class="external autonumber" title="http://commons.wikimedia.org/w/index.php?title=Commons:Deletion_requests/Superseded" rel="nofollow">[1]</a> with the new picture.</p>
<p><a name="Discussion" id="Discussion"></a></p>
<h3><span class="editsection">[<a href="../../../b/o/t/Wikipedia%7EBots_Requests_for_approval_DieBucheBot_ecf8.html" title="Edit section: Discussion">edit</a>]</span> <span class="mw-headline">Discussion</span></h3>
<ul>
<li>Will this bot work on commons, on en-wiki, or on both? Is the idea here that you type in the name of a superseded image, and the name of the better image, and all pages using the old image on en-wiki will be updated to link to the other image? <a href="../../../g/i/m/User_talk%7EGimmetrow_c76c.html" title="User talk:Gimmetrow"><i>Gimmetrow</i></a> 00:41, 20 March 2007 (UTC)</li>
</ul>
<dl>
<dd>It works only on en-wiki, i tell him which images have to be replaced, he doesn't find them automatically --<a href="../../../d/i/e/User%7EDieBuche_fe22.html" title="User:DieBuche">DieBuche</a> 13:23, 20 March 2007 (UTC)
<dl>
<dd>How do you get the pages on which to replace it? All pages or only those in article namespace? If you're using python regexp to replace the image links, how do you plan to deal with varations in use of underscores and spaces? (There are a couple ways to handle this.) <a href="../../../g/i/m/User_talk%7EGimmetrow_c76c.html" title="User talk:Gimmetrow"><i>Gimmetrow</i></a> 19:17, 21 March 2007 (UTC)
<dl>
<dd>I didn't think about this. Can you tell me how to do it&#160;? --<a href="../../../d/i/e/User%7EDieBuche_fe22.html" title="User:DieBuche">DieBuche</a> 19:58, 21 March 2007 (UTC)
<dl>
<dd>Well, the simple solution is to convert all underscores to spaces, then search for the image name with spaces. This is convenient (doesn't even need a regexp) but will change every underscore on the page. I'm pretty sure some tools do this, and it's usually OK. Or you could make a bit more complex regexp to only convert underscores between sets of double brackets. <a href="../../../g/i/m/User_talk%7EGimmetrow_c76c.html" title="User talk:Gimmetrow"><i>Gimmetrow</i></a> 22:45, 21 March 2007 (UTC)
<dl>
<dd>This is overall a good idea, but there is no reason to change the entire page at all. Perhaps this is what you meant, but let me explain. It is a matter of retrieving the page, converting a <i>local copy</i> from underscores -&gt; spaces and upper case -&gt; lower case, find the strings that match in the page and remember their indicies. Next, perform the replacement on a <i>different copy</i> that has not had the conversions applied. Then submit the latter copy when finished doing the find and replace. The alternative is to do this with a complex regexp, just depends on personal preference. -- <a href="../../../r/a/m/User%7ERam-Man_eba5.html" title="User:Ram-Man">RM</a> 12:19, 22 March 2007 (UTC)
<dl>
<dd>"Remember their indices" is a little tricky if it's using regexp or replace. There are some tool(s) which leave the underscore-&gt;space replacement in the article. <a href="../../../g/i/m/User_talk%7EGimmetrow_c76c.html" title="User talk:Gimmetrow"><i>Gimmetrow</i></a> 13:02, 22 March 2007 (UTC)
<dl>
<dd>Oh, I understand that. That's why I said regexp is a separate solution (and probably the best one) from the one I described. Doing article processing would require custom code to perform the scanning, finding, and replacing. My overall point is that the tools may not be good enough, since doing a global underscore-&gt;space replacement is a bad idea, as it could remove legitimate underscores. That just makes this a little more difficult to pull off correctly. But I won't approve a bot that has a known risk of adding errors, so the work has to be done to make it work correctly. -- <a href="../../../r/a/m/User%7ERam-Man_eba5.html" title="User:Ram-Man">RM</a> 13:25, 22 March 2007 (UTC)
<dl>
<dd>I thought it could been done without regexp; But now I know that I've to. --<a href="../../../d/i/e/User%7EDieBuche_fe22.html" title="User:DieBuche">DieBuche</a> 15:55, 22 March 2007 (UTC)</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dd>How about this - enter the image name with spaces, and generate a form for the image name with underscores for spaces. Then go through all pages which link to the image, and replace any instance of either the all-space or all-underscore version to the updated image name. When all pages are done, have the bot tell you if any pages still link to the image, so you can do those by hand. There will be no errors in the articles, and only rarely will you need to do anything by hand. Would that work? <a href="../../../g/i/m/User_talk%7EGimmetrow_c76c.html" title="User talk:Gimmetrow"><i>Gimmetrow</i></a> 19:38, 22 March 2007 (UTC)</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<dl>
<dd>
<dl>
<dd>
<dl>
<dd>
<dl>
<dd>Sound's good --<a href="../../../d/i/e/User%7EDieBuche_fe22.html" title="User:DieBuche">DieBuche</a> 14:44, 23 March 2007 (UTC)
<dl>
<dd>What if some are spaces and some are underscores? The best way to do it is this. Get the page text. Perform a regex replacement on the page text, where the regex replacement string is gotten from command line input with all spaces replaced with <code>[&#160;_]</code>, the regex code for "space or underscore". So, for example, here's some c# code for what I'm saying (sorry, I'm not good with python)</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<pre>
Console.WriteLine("Enter image name:");
string regex = Console.ReadLine();
regex = "[Ii]mage:" + "[" + char.ToUpper(regex[0]) + char.ToLower(regex[0]) + "]" + regex.Remove(0, 1).Replace(" ", "[ _]");
</pre>
<dl>
<dd>
<dl>
<dd>
<dl>
<dd>
<dl>
<dd>
<dl>
<dd>At this point you would have a regex string "regex" stored, and then you need to declare a regex and perform the replacement on the article text. Hopefully you understand C#, or someone can translate :-) —<span style="color: red;"><a href="../../../m/e/t/User%7EMets501_2e06.html" title="User:Mets501">M<small>ETS</small>501</a> (<a href="../../../m/e/t/User_talk%7EMets501_fc50.html" title="User talk:Mets501">talk</a>)</span> 03:18, 5 April 2007 (UTC)</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p><b>Question</b>: Can you give an example of images that you will be replacing? Not all images currently using the superseded tag should actually be superseded (if they were, we could have just asked <a href="../../../o/r/g/User%7EOrgullomoore_36b5.html" title="User:Orgullomoore">User:Orgullomoore</a> to change <a href="../../../c/o/m/User%7ECommonsDelinker_38fe.html" title="User:CommonsDelinker">User:CommonsDelinker</a>'s replace.py function). For example, not all png's that have been superseded by svg's should be replaced (even if they have, they probably shouldn't be deleted) and if you do run this it could cause *a lot* of problems for commons. I suggest you request for bot approval on commons as well since this is technically representing the commons community. <a href="../../../y/o/n/User%7EYonatan_1476.html" title="User:Yonatan">Yonatan</a> <sup><a href="../../../y/o/n/User_talk%7EYonatan_d6c8.html" title="User talk:Yonatan">talk</a></sup> 14:01, 7 April 2007 (UTC)</p>

<!-- 
Pre-expand include size: 1043 bytes
Post-expand include size: 1023 bytes
Template argument size: 106 bytes
Maximum: 2048000 bytes
-->
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../b/o/t/Wikipedia%7EBots_Requests_for_approval_DieBucheBot_ecf8.html">http://en.wikipedia.org../../../b/o/t/Wikipedia%7EBots_Requests_for_approval_DieBucheBot_ecf8.html</a>"</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>: <span dir='ltr'><a href="../../../w/i/k/Category%7EWikipedia_bot_requests_for_approval_cfeb.html" title="Category:Wikipedia bot requests for approval">Wikipedia bot requests for approval</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-project"
	       class="selected"	       ><a href="../../../b/o/t/Wikipedia%7EBots_Requests_for_approval_DieBucheBot_ecf8.html">Project page</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../b/o/t/Wikipedia_talk%7EBots_Requests_for_approval_DieBucheBot_1b45.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/Wikipedia:Bots/Requests_for_approval/DieBucheBot">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 14:01, 7 April 2007 by Wikipedia user <a href="../../../y/o/n/User%7EYonatan_1476.html" title="User:Yonatan">Yonatan</a>. Based on work by Wikipedia user(s) <a href="../../../m/e/t/User%7EMets501_2e06.html" title="User:Mets501">Mets501</a>, <a href="../../../d/i/e/User%7EDieBuche_fe22.html" title="User:DieBuche">DieBuche</a>, <a href="../../../g/i/m/User%7EGimmetrow_3628.html" title="User:Gimmetrow">Gimmetrow</a>, <a href="../../../r/m/_/User%7ERM_194e.html" title="User:RM">RM</a> and <a href="../../../o/c/o/User%7EOcolon_d9b7.html" title="User:Ocolon">Ocolon</a>.</li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>

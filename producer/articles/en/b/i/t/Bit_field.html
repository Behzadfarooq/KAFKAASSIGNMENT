<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="Bit field,As of 2006,Binary and,Bit,Bit array,Bitboard,Bitwise operation,Bitwise operator,Boolean datatype,Brian Kernighan,C (programming language)" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>Bit field - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-0">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Bit field</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p>A <b>bit field</b> is a common idiom used in <a href="../../../c/o/m/Computer_programming.html" title="Computer programming">computer programming</a> to store a set of <a href="../../../b/o/o/Boolean_datatype.html" title="Boolean datatype">Boolean datatype</a> <a href="../../../f/l/a/Flag_%28computing%29.html" title="Flag (computing)">flags</a> compactly, as a series of <a href="../../../b/i/t/Bit.html" title="Bit">bits</a>. The bit field is stored in an <a href="../../../p/r/i/Primitive_type.html" title="Primitive type">integral type</a> of known, fixed bit-width. Each Boolean flag is stored in a separate bit. Usually the <a href="../../../s/o/u/Source_code.html" title="Source code">source code</a> will define a set of <a href="../../../v/a/r/Variable.html#Constants" title="Variable">constants</a>, each a power of two, that semantically associate each individual bit with its respective Boolean flag. The <a href="../../../b/i/t/Bitwise_operator.html" title="Bitwise operator">bitwise operators</a> <a href="../../../b/i/n/Binary_and.html" title="Binary and">AND</a>, <a href="../../../l/o/g/Logical_disjunction.html" title="Logical disjunction">OR</a>, and <a href="../../../n/e/g/Negation.html" title="Negation">NOT</a> are used in combination to set, reset and test the flags.</p>
<p>A bit field is distinguished from a <a href="../../../b/i/t/Bit_array.html" title="Bit array">bit array</a> in that the latter is used to store a large set of bits indexed by integers and is often wider than any integral type supported by the language. Bit fields, on the other hand, typically fit within a machine <a href="../../../w/o/r/Word_%28computer_science%29.html" title="Word (computer science)">word</a>, and the denotation of bits is independent of their numerical index. Nevertheless, a bit field can be safely and elegantly implemented using a bit array where the bit indices for each flag are values of an <a href="../../../e/n/u/Enumerated_type.html" title="Enumerated type">enumerated type</a> (like the <code><a href="http://java.sun.com/javase/6/docs/api/java/util/EnumSet.html" class="external text" title="http://java.sun.com/javase/6/docs/api/java/util/EnumSet.html" rel="nofollow">EnumSet</a></code> class in Java); this avoids the dangers of direct bitwise manipulations.</p>
<p><a name="Examples" id="Examples"></a></p>
<h2><span class="editsection">[<a href="../../../b/i/t/Bit_field.html" title="Edit section: Examples">edit</a>]</span> <span class="mw-headline">Examples</span></h2>
<p>Example implementation in <a href="../../../c/_/%28/C_%28programming_language%29.html" title="C (programming language)">C</a>:</p>
<pre>
   #define PREFERENCE_LIKES_ICE_CREAM  ((unsigned char) (1 &lt;&lt; 0)) // 0x01
   #define PREFERENCE_PLAYS_GOLF       ((unsigned char) (1 &lt;&lt; 1)) // 0x02
   #define PREFERENCE_WATCHES_TV       ((unsigned char) (1 &lt;&lt; 2)) // 0x04
   #define PREFERENCE_READS_BOOKS      ((unsigned char) (1 &lt;&lt; 3)) // 0x08
    
   unsigned char preference;
    
   void setPreference(unsigned char flag)
   {
       preference |= flag;
   }
    
   void resetPreference(unsigned char flag)
   {
       preference &amp;= ~flag;
   }
    
   unsigned char getPreference(unsigned char flag)
   {
       return (preference &amp; flag) != 0;
   }
</pre>
<p>Instead of using hardcoded numerical representations for the powers of two (<i>0x08</i>), the use of the <a href="../../../b/i/t/Bitwise_operation.html#Bit_shift" title="Bitwise operation">Bit Shift</a> operator (<i>1 &lt;&lt; 3</i>) with an incrementing shift operand is recommended for easier readability.</p>
<p><a href="../../../b/r/i/Brian_Kernighan_f56d.html" title="Brian Kernighan">Kernighan</a> and <a href="../../../d/e/n/Dennis_Ritchie_e230.html" title="Dennis Ritchie">Ritchie</a>'s book, <i><a href="../../../t/h/e/The_C_Programming_Language_%28book%29_ee6e.html" title="The C Programming Language (book)">The C Programming Language</a></i>, describes a method for defining and accessing fields directly. Using this method, the use of bitwise operators is not needed as bit members can be accessed the same as struct members. An example using a struct follows:</p>
<pre>
   struct preferences
   {
       unsigned int likesIceCream : 1;
       unsigned int playsGolf     : 1;
       unsigned int watchesTV     : 1;
       unsigned int readsBooks    : 1;
   }; 
    
   struct preferences fred;
    
   fred.likesIceCream = 1;
   fred.playsGolf = 1;
   fred.watchesTV = 1;
   fred.readsBooks = 0;
    
   if (fred.likesIceCream == 1)
   {
       ...
    
</pre>
<p>However, bit members in structs have practical drawbacks. First, the <a href="../../../e/n/d/Endianness.html" title="Endianness">ordering of bits</a> in memory varies from <a href="../../../c/o/m/Compiler.html" title="Compiler">compiler</a> to compiler. In addition, many popular compilers generate inefficient code for reading and writing bit members, and there are potentially severe thread safety issues relating to bit fields (especially on multiprocessor systems) due to the fact that most machines cannot manipulate arbitrary sets of bits in memory, but must instead load and store whole words. e.g the following would not be thread-safe, in spite of the use of a mutex:</p>
<pre>
   struct foo {
       int flag : 1;
       int counter : 15;
   };
    
   struct foo my_foo;
    
   ...
    
   pthread_mutex_lock(&amp;my_mutex);
   flag = !flag;
   pthread_mutex_unlock(&amp;my_mutex);
</pre>
<p>as on most machines it is impossible at the hardware level to load and store <code>flag</code> and <code>counter</code> separately. (In order for this to be thread safe, you would need to lock and unlock the mutex around all accesses to both <code>flag</code> <em>and</em> <code>counter</code>, <em>even if <code>counter</code> doesn't itself need to be thread-safe</em>.)</p>
<p>For these reasons, bitwise operators remain in wide use in programs in the C and C++ languages <a href="../../../a/s/_/As_of_2006.html" title="As of 2006">as of 2006</a>.</p>
<p><a name="See_also" id="See_also"></a></p>
<h2><span class="editsection">[<a href="../../../b/i/t/Bit_field.html" title="Edit section: See also">edit</a>]</span> <span class="mw-headline">See also</span></h2>
<ul>
<li><a href="../../../b/i/t/Bitboard.html" title="Bitboard">Bitboard</a> Chess and similar games.</li>
<li><a href="../../../b/i/t/Bit_array.html" title="Bit array">Bit array</a></li>
</ul>
<p><a name="External_links" id="External_links"></a></p>
<h2><span class="editsection">[<a href="../../../b/i/t/Bit_field.html" title="Edit section: External links">edit</a>]</span> <span class="mw-headline">External links</span></h2>
<ul>
<li><a href="http://articleworld.org/Bit_field" class="external text" title="http://articleworld.org/Bit_field" rel="nofollow">Bit field</a>, a simple C example.</li>
</ul>

<!-- 
Pre-expand include size: 1476 bytes
Post-expand include size: 251 bytes
Template argument size: 106 bytes
Maximum: 2048000 bytes
-->
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../b/i/t/Bit_field.html">http://en.wikipedia.org../../../b/i/t/Bit_field.html</a>"</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>: <span dir='ltr'><a href="../../../d/a/t/Category%7EData_structures_6946.html" title="Category:Data structures">Data structures</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main"
	       class="selected"	       ><a href="../../../b/i/t/Bit_field.html">Article</a></li><li id="ca-talk"
	       	       ><a href="../../../b/i/t/Talk%7EBit_field_d83f.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/Bit_field">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	<div id="p-lang" class="portlet">
	  <h5>In other languages</h5>
	  <div class="pBody">
	    <ul>
	      	      <li>
	      <a href="../../../../ru/%D0%B1/%D0%B8/%D1%82/%D0%91%D0%B8%D1%82%D0%BE%D0%B2%D0%BE%D0%B5_%D0%BF%D0%BE%D0%BB%D0%B5.html">Русский</a>
	      </li>
	      	    </ul>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 18:31, 27 March 2007 by Wikipedia user <a href="../../../r/j/w/User%7ERjwilmsi_027f.html" title="User:Rjwilmsi">Rjwilmsi</a>. Based on work by Wikipedia user(s) <a href="../../../s/p/o/User%7ESpoon%21_4cc3.html" title="User:Spoon!">Spoon!</a>, <a href="../../../d/a/m/User%7EDamian_Yerrick_2a18.html" title="User:Damian Yerrick">Damian Yerrick</a>, <a href="../../../d/a/v/User%7EDavnor_2f70.html" title="User:Davnor">Davnor</a>, <a href="../../../r/u/u/User%7ERuud_Koot_88b0.html" title="User:Ruud Koot">Ruud Koot</a>, <a href="../../../o/z/z/User%7EOzzmosis_e28c.html" title="User:Ozzmosis">Ozzmosis</a>, <a href="../../../s/a/m/User%7ESamuel_Blanning_ee68.html" title="User:Samuel Blanning">Samuel Blanning</a>, <a href="../../../g/l/e/User%7EGlen_Pepicelli_2a9e.html" title="User:Glen Pepicelli">Glen Pepicelli</a> and <a href="../../../b/o/v/User%7EBovlb_31b0.html" title="User:Bovlb">Bovlb</a> and Anonymous user(s) of Wikipedia.</li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="Bilinear filtering,Anisotropic filtering,Bilinear interpolation,Bitmap,Linear interpolation,Mipmap,Nearest neighbor interpolation,Texel (graphics),Texture filtering,Texture mapping,Trilinear filtering" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>Bilinear filtering - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-0">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Bilinear filtering</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <div class="thumb tright">
<div class="thumbinner" style="width:221px;"><a href="../../../i/m/a/Image%7EImage-resample-sample.png_3a69.html" class="internal" title="A zoomed small portion of a bitmap, using nearest neighbor filtering (left), bilinear filtering (center), and bicubic filtering (right)."><img src="../../../upload/f/f1/Image-resample-sample.png" alt="A zoomed small portion of a bitmap, using nearest neighbor filtering (left), bilinear filtering (center), and bicubic filtering (right)." width="219" height="73" longdesc="../../../i/m/a/Image%7EImage-resample-sample.png_3a69.html" class="thumbimage" /></a>
<div class="thumbcaption">A <a href="../../../z/o/o/Zoom.html" title="Zoom">zoomed</a> small portion of a <a href="../../../b/i/t/Bitmap.html" title="Bitmap">bitmap</a>, using <a href="../../../n/e/a/Nearest_neighbor_interpolation.html" title="Nearest neighbor interpolation">nearest neighbor</a> filtering <i>(left)</i>, bilinear filtering <i>(center)</i>, and bicubic filtering <i>(right)</i>.</div>
</div>
</div>
<p><b>Bilinear filtering</b> is a <a href="../../../t/e/x/Texture_filtering.html" title="Texture filtering">texture filtering</a> method used to smooth <a href="../../../t/e/x/Texture_mapping.html" title="Texture mapping">textures</a> when displayed larger or smaller than they actually are.</p>
<p>Most of the time, when drawing a textured shape on the screen, the texture is not displayed exactly as it is stored, without any distortion. Because of this, most pixels will end up needing to use a point on the texture that's 'between' <a href="../../../t/e/x/Texel_%28graphics%29.html" title="Texel (graphics)">texels</a>, assuming the texels are points (as opposed to, say, squares) in the middle (or on the upper left corner, or anywhere else; it doesn't matter, as long as it's consistent) of their respective 'cells'. Bilinear filtering uses these points to perform <a href="../../../b/i/l/Bilinear_interpolation.html" title="Bilinear interpolation">bilinear interpolation</a> between the four texels nearest to the point that the pixel represents (in the middle or upper left of the pixel, usually).</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#The_formula"><span class="tocnumber">1</span> <span class="toctext">The formula</span></a></li>
<li class="toclevel-1"><a href="#Sample_Code"><span class="tocnumber">2</span> <span class="toctext">Sample Code</span></a></li>
<li class="toclevel-1"><a href="#Limitations"><span class="tocnumber">3</span> <span class="toctext">Limitations</span></a></li>
<li class="toclevel-1"><a href="#Special_cases"><span class="tocnumber">4</span> <span class="toctext">Special cases</span></a></li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script>
<p><a name="The_formula" id="The_formula"></a></p>
<h2><span class="editsection">[<a href="../../../b/i/l/Bilinear_filtering.html" title="Edit section: The formula">edit</a>]</span> <span class="mw-headline">The formula</span></h2>
<p>In these equations, u<sub>k</sub> and v<sub>k</sub> are the texture coordinates and y<sub>k</sub> is the color value at point k. Values without a subscript refer to the pixel point; values with subscripts 0, 1, 2, and 3 refer to the texel points, starting at the top left, reading right then down, that immediately surround the pixel point. These are <a href="../../../l/i/n/Linear_interpolation.html" title="Linear interpolation">linear interpolation</a> equations. We'd start with the bilinear equation, but since this is a special case with some elegant results, it is easier to start from linear interpolation.</p>
<p><br /></p>
<dl>
<dd><img class='tex' src="../../../math/4/a/3/4a3b5fe4cf81183c7e187975f9d2ddc3.png" alt="y_a = y_0 + \frac{y_1-y_0}{u_1-u_0}(u-u_0) \,\!" /></dd>
<dd><img class='tex' src="../../../math/8/5/1/851d971e26055dd812305efde5145bcf.png" alt="y_b = y_2 + \frac{y_3-y_2}{u_3-u_2}(u-u_2) \,\!" /></dd>
<dd><img class='tex' src="../../../math/a/2/9/a29d162f55a6133206e4dcbae7382ce3.png" alt="y = y_a + \frac{y_b-y_a}{v_2-v_0}(v-v_0) \,\!" /></dd>
</dl>
<p>Assuming that the texture is a square bitmap,</p>
<dl>
<dd><img class='tex' src="../../../math/e/8/1/e81912d5c8d1313b21f62dd0addc4942.png" alt="v_1 = v_0 \,\!" /></dd>
<dd><img class='tex' src="../../../math/b/e/3/be31b69f5c5ebdf7d14969d9ecc00cdc.png" alt="v_2 = v_3 \,\!" /></dd>
<dd><img class='tex' src="../../../math/0/7/6/076900cbb98a23f73698abf15a0644eb.png" alt="u_1 = u_3 \,\!" /></dd>
<dd><img class='tex' src="../../../math/6/0/6/606e642f3d41c3ba7d8b12d68892d1a7.png" alt="u_2 = u_0 \,\!" /></dd>
<dd><img class='tex' src="../../../math/9/e/e/9ee1bedb627487fe682e753e1e012a3a.png" alt="v_3 - v_0 = u_3 - u_0 = w \,\!" /></dd>
</dl>
<p>Are all true. Further, define</p>
<dl>
<dd><img class='tex' src="../../../math/1/5/2/1527612c526ca5112c9eac92e3112b4b.png" alt="U = \frac{u - u_0}{w} \,\!" /></dd>
<dd><img class='tex' src="../../../math/4/3/f/43f5a701ed5e795c7999f8c5a2743b2f.png" alt="V = \frac{v - v_0}{w} \,\!" /></dd>
</dl>
<p>With these we can simplify the interpolation equations:</p>
<dl>
<dd><img class='tex' src="../../../math/e/3/9/e394da77e9893e5706034b3fe4790966.png" alt="y_a = y_0 + (y_1-y_0)U \,\!" /></dd>
<dd><img class='tex' src="../../../math/e/c/e/eced82a104622815ca6a08d0d6ed8e8e.png" alt="y_b = y_2 + (y_3-y_2)U \,\!" /></dd>
<dd><img class='tex' src="../../../math/7/d/3/7d302ce63583e13ead355658d384c1a5.png" alt="y = y_a + (y_b-y_a)V \,\!" /></dd>
</dl>
<p>And combine them:</p>
<dl>
<dd><img class='tex' src="../../../math/f/9/3/f9344d8cf82d0bc9fa902125e2873769.png" alt="y = y_0 + (y_1 - y_0)U + (y_2 - y_0)V + (y_3 - y_2 - y_1 + y_0)UV \,\!" /></dd>
</dl>
<p>Or, alternatively:</p>
<dl>
<dd><img class='tex' src="../../../math/c/9/8/c98f49195fc81cf5340dac97a1f2a16c.png" alt="y = y_0(1 - U)(1 - V) + y_1 U (1 - V) + y_2 (1 - U) V + y_3 U V \,\!" /></dd>
</dl>
<p>Which is rather convenient. However, if the image is merely scaled (and not rotated, sheared, put into perspective, or any other manipulation), it can be considerably faster to use the separate equations and store y<sub>b</sub> (and sometimes y<sub>a</sub>, if we are increasing the scale) for use in subsequent rows.</p>
<p><a name="Sample_Code" id="Sample_Code"></a></p>
<h2><span class="editsection">[<a href="../../../b/i/l/Bilinear_filtering.html" title="Edit section: Sample Code">edit</a>]</span> <span class="mw-headline">Sample Code</span></h2>
<p>This code assumes that the texture is square (an extremely common occurrence), that no <a href="../../../m/i/p/Mipmap.html" title="Mipmap">mipmapping</a> comes into play, and that there is only one channel of data (not so common. Nearly all textures are in color so they have red, green, and blue channels, and many have an alpha transparency channel, so we must make three or four calculations of y, one for each channel).</p>
<pre>
double getBilinearFilteredPixelColor(Texture tex, double u, double v) {
  u *= tex.size;
  v *= tex.size;
  int x = floor(u);
  int y = floor(v);
  double u_ratio = u - x;
  double v_ratio = v - y;
  double u_opposite = 1 - u_ratio;
  double v_opposite = 1 - v_ratio;
  double result = (tex[x][y]   * u_opposite  + tex[x+1][y]   * u_ratio) * v_opposite + 
                  (tex[x][y+1] * u_opposite  + tex[x+1][y+1] * u_ratio) * v_ratio;
  return result;
}
</pre>
<p><a name="Limitations" id="Limitations"></a></p>
<h2><span class="editsection">[<a href="../../../b/i/l/Bilinear_filtering.html" title="Edit section: Limitations">edit</a>]</span> <span class="mw-headline">Limitations</span></h2>
<p>Bilinear filtering is rather accurate until the scaling of the texture gets below half or above double the original size of the texture - that is, if the texture was 256 pixels in each direction, scaling it to below 128 or above 512 pixels can make the texture look bad, because of missing pixels or too much smoothness. Often, <a href="../../../m/i/p/Mipmap.html" title="Mipmap">mipmapping</a> is used to provide a scaled-down version of the texture for better performance; however, the transition between two differently-sized mipmaps on a texture in perspective using bilinear filtering can be very abrupt. <a href="../../../t/r/i/Trilinear_filtering.html" title="Trilinear filtering">Trilinear filtering</a>, though somewhat more complex, can make this transition smooth throughout.</p>
<p>For a quick demonstration of how a texel can be missing from a filtered texture, here's a list of numbers representing the centers of boxes from an 8-texel-wide texture, intermingled with the numbers from the centers of boxes from a 3-texel-wide texture (in blue). The red numbers represent texels that would not be used in calculating the 3-texel texture at all.</p>
<p>0.0625, <span style="color: blue">0.1667</span>, 0.1875, <span style="color: red">0.3125</span>, 0.4375, <span style="color: blue">0.5000</span>, 0.5625, <span style="color: red">0.6875</span>, 0.8125, <span style="color: blue">0.8333</span>, 0.9375</p>
<p><a name="Special_cases" id="Special_cases"></a></p>
<h2><span class="editsection">[<a href="../../../b/i/l/Bilinear_filtering.html" title="Edit section: Special cases">edit</a>]</span> <span class="mw-headline">Special cases</span></h2>
<p>Textures aren't infinite, in general, and sometimes one ends up with a pixel coordinate that lies outside the grid of texel coordinates. There are a few ways to handle this:</p>
<ul>
<li>Wrap the texture, so that the last texel in a row also comes right before the first, and the last texel in a column also comes right above the first. This works best when the texture is being tiled.</li>
<li>Make the area outside the texture all one color. This may be of use for a texture designed to be laid over a solid background or to be transparent.</li>
<li>Repeat the edge texels out to infinity. This works best if the texture is not designed to be repeated.</li>
</ul>
<p><a name="See_also" id="See_also"></a></p>
<h2><span class="editsection">[<a href="../../../b/i/l/Bilinear_filtering.html" title="Edit section: See also">edit</a>]</span> <span class="mw-headline">See also</span></h2>
<ul>
<li><a href="../../../t/r/i/Trilinear_filtering.html" title="Trilinear filtering">Trilinear filtering</a></li>
<li><a href="../../../a/n/i/Anisotropic_filtering.html" title="Anisotropic filtering">Anisotropic filtering</a></li>
</ul>

<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../b/i/l/Bilinear_filtering.html">http://en.wikipedia.org../../../b/i/l/Bilinear_filtering.html</a>"</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Categories</a>: <span dir='ltr'><a href="../../../3/d/_/Category%7E3D_computer_graphics_0938.html" title="Category:3D computer graphics">3D computer graphics</a></span> | <span dir='ltr'><a href="../../../c/o/m/Category%7EComputer_graphics_0422.html" title="Category:Computer graphics">Computer graphics</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main"
	       class="selected"	       ><a href="../../../b/i/l/Bilinear_filtering.html">Article</a></li><li id="ca-talk"
	       	       ><a href="../../../b/i/l/Talk%7EBilinear_filtering_6a5f.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/Bilinear_filtering">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	<div id="p-lang" class="portlet">
	  <h5>In other languages</h5>
	  <div class="pBody">
	    <ul>
	      	      <li>
	      <a href="../../../../de/b/i/l/Bilineare_Filterung_51da.html">Deutsch</a>
	      </li>
	      	      <li>
	      <a href="../../../../fr/f/i/l/Filtrage_bilin%C3%A9aire.html">Français</a>
	      </li>
	      	      <li>
	      <a href="../../../../ko/%EC%9D%B4/%EC%A4%91/%EC%84%A0/%EC%9D%B4%EC%A4%91%EC%84%A0%ED%98%95_%ED%95%84%ED%84%B0%EB%A7%81.html">한국어</a>
	      </li>
	      	      <li>
	      <a href="../../../../zh/%E5%8F%8C/%E7%BA%BF/%E6%80%A7/%E5%8F%8C%E7%BA%BF%E6%80%A7%E6%BB%A4%E6%B3%A2.html">中文</a>
	      </li>
	      	    </ul>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 17:17, 27 February 2007 by Anonymous user(s) of Wikipedia. Based on work by Wikipedia user(s) <a href="../../../d/j/a/User%7EDjanvk_73b3.html" title="User:Djanvk">Djanvk</a>, <a href="../../../m/a/r/User%7EMarylandArtLover_6b2e.html" title="User:MarylandArtLover">MarylandArtLover</a>, <a href="../../../s/c/e/User%7EScepia_1657.html" title="User:Scepia">Scepia</a>, Mmj, Sterrys, <a href="../../../v/a/l/User%7EValarauka_53df.html" title="User:Valarauka">Valarauka</a>, <a href="../../../c/h/o/User%7EChobot_0dce.html" title="User:Chobot">Chobot</a>, <a href="../../../m/i/n/User%7EMinorEdits_f1a0.html" title="User:MinorEdits">MinorEdits</a>, <a href="../../../x/a/o/User%7EXaosflux_5b5b.html" title="User:Xaosflux">Xaosflux</a>, <a href="../../../s/p/a/User%7ESparsefarce_8ed6.html" title="User:Sparsefarce">Sparsefarce</a>, <a href="../../../s/k/u/User%7ESkulvar_38a9.html" title="User:Skulvar">Skulvar</a>, <a href="../../../h/a/r/User%7EHarrisX_c09f.html" title="User:HarrisX">HarrisX</a>, <a href="../../../a/x/e/User%7EAxelBoldt_4306.html" title="User:AxelBoldt">AxelBoldt</a>, <a href="../../../p/o/o/User%7EPoor_Yorick_efc9.html" title="User:Poor Yorick">Poor Yorick</a>, <a href="../../../m/s/i/User%7EMsikma_222d.html" title="User:Msikma">Msikma</a>, <a href="../../../s/a/t/User%7ESatchmo_5c6d.html" title="User:Satchmo">Satchmo</a>, <a href="../../../e/s/k/User%7EEskimbot_5fb5.html" title="User:Eskimbot">Eskimbot</a>, <a href="../../../v/o/r/User%7EVorn_3a1d.html" title="User:Vorn">Vorn</a>, <a href="../../../n/o/r/User%7ENorkNork_be83.html" title="User:NorkNork">NorkNork</a>, <a href="../../../d/c/o/User%7EDcoetzee_a2a7.html" title="User:Dcoetzee">Dcoetzee</a>, <a href="../../../g/r/e/User%7EGrendelkhan_c5fb.html" title="User:Grendelkhan">Grendelkhan</a>, <a href="../../../n/e/c/User%7ENeckelmann_a3c1.html" title="User:Neckelmann">Neckelmann</a>, <a href="../../../l/u/n/User%7ELunaverse_6a9e.html" title="User:Lunaverse">Lunaverse</a> and Rgaddipa.</li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>

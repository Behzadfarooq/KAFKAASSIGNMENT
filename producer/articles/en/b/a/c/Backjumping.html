<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="Backjumping,Algorithm,Backtracking,Constraint learning,Constraint satisfaction,Recursion,Search space,Search tree" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>Backjumping - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-0">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Backjumping</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"></div>
	    	    <div class="usermessage">You have <a href="../../../1/2/7/User_talk%7E127.0.0.1.html" title="User talk:127.0.0.1">new messages</a> (<a href="../../../1/2/7/User_talk%7E127.0.0.1.html" title="User talk:127.0.0.1">last change</a>).</div>	    <!-- start content -->
	    <p>In <a href="../../../b/a/c/Backtracking.html" title="Backtracking">backtracking</a> <a href="../../../a/l/g/Algorithm.html" title="Algorithm">algorithms</a>, <b>backjumping</b> is a technique that reduce <a href="../../../s/e/a/Search_space.html" title="Search space">search</a>, therefore increasing efficiency. While backtracking always goes up one level in the <a href="../../../s/e/a/Search_tree.html" title="Search tree">search tree</a> when all values for a variables has been tested, backjumping may go up more levels. In this article, a fixed order of evaluation of variables <img class='tex' src="../../../math/c/2/a/c2a79f82f9c9783d20426062c9feebbe.png" alt="x_1,\ldots,x_n" /> is used, but the same considerations apply to a dynamic order of evaluation.</p>
<table class="gallery" cellspacing="0" cellpadding="0">
<tr>
<td>
<div class="gallerybox" style="width: 150px;">
<div class="thumb" style="padding: 19px 0; width: 150px;"><a href="../../../b/a/c/Image%7EBacktracking-no-backjumping.svg_d791.html" title="Image:Backtracking-no-backjumping.svg"><img src="../../../upload/shared/thumb/1/1e/Backtracking-no-backjumping.svg/120px-Backtracking-no-backjumping.svg.png" width="120" height="107" alt="" /></a></div>
<div class="gallerytext">
<p>A search tree visited by regular backtracking</p>
<p><br /></p>
</div>
</div>
</td>
<td>
<div class="gallerybox" style="width: 150px;">
<div class="thumb" style="padding: 19px 0; width: 150px;"><a href="../../../b/a/c/Image%7EBacktracking-with-backjumping.svg_4af7.html" title="Image:Backtracking-with-backjumping.svg"><img src="../../../upload/shared/thumb/9/9e/Backtracking-with-backjumping.svg/120px-Backtracking-with-backjumping.svg.png" width="120" height="108" alt="" /></a></div>
<div class="gallerytext">
<p>A backjump: the grey node is not visited</p>
<p><br /></p>
</div>
</div>
</td>
</tr>
</table>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Definition"><span class="tocnumber">1</span> <span class="toctext">Definition</span></a></li>
<li class="toclevel-1"><a href="#Backjumping_at_leaf_nodes"><span class="tocnumber">2</span> <span class="toctext">Backjumping at leaf nodes</span></a></li>
<li class="toclevel-1"><a href="#Backjumping_at_internal_nodes"><span class="tocnumber">3</span> <span class="toctext">Backjumping at internal nodes</span></a>
<ul>
<li class="toclevel-2"><a href="#Simplifications"><span class="tocnumber">3.1</span> <span class="toctext">Simplifications</span></a></li>
<li class="toclevel-2"><a href="#Graph-based_backjumping"><span class="tocnumber">3.2</span> <span class="toctext">Graph-based backjumping</span></a></li>
<li class="toclevel-2"><a href="#Conflict-based_backjumping"><span class="tocnumber">3.3</span> <span class="toctext">Conflict-based backjumping</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1"><a href="#Reference"><span class="tocnumber">5</span> <span class="toctext">Reference</span></a></li>
</ul>
</td>
</tr>
</table>
<p><script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script><a name="Definition" id="Definition"></a></p>
<h2><span class="editsection">[<a href="../../../b/a/c/Backjumping.html" title="Edit section: Definition">edit</a>]</span> <span class="mw-headline">Definition</span></h2>
<p>Whenever backtracking has tried all values for a variables without finding any solution, it reconsiders the last of the previously assigned variables, changing its value or further backtracking if no other values are to be tried. If <img class='tex' src="../../../math/9/3/9/939922b4a0f667833fc9b4f01a791f66.png" alt="x_1=a_1,\ldots,x_k=a_k" /> is the current partial assignment and all values for <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span> have been tried without finding a solution, backtracking concludes that no solution extending <img class='tex' src="../../../math/9/3/9/939922b4a0f667833fc9b4f01a791f66.png" alt="x_1=a_1,\ldots,x_k=a_k" /> exists. It then "goes up" to <span class="texhtml"><i>x</i><sub><i>k</i></sub></span>, changing its value if possible, backtracking again otherwise.</p>
<p>The partial assignment is not always necessary in full to prove that no value of <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span> lead to a solution. In particular, a prefix of the partial assignment may have the same property, that is, there exists an index <span class="texhtml"><i>j</i> &lt; <i>k</i></span> such that <img class='tex' src="../../../math/a/0/8/a08bbf70a5a189d8c0f030fe90171fad.png" alt="x_1,\ldots,x_j=a_1,\ldots,a_j" /> cannot be extended to form a solution with whatever value for <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span>. If the algorithm can prove this fact, it can directly consider a different value for <span class="texhtml"><i>x</i><sub><i>j</i></sub></span> instead of reconsidering <span class="texhtml"><i>x</i><sub><i>k</i></sub></span> as it would normally do.</p>
<table cellpadding="20" style="border: thin solid gray;">
<tr>
<td><a href="../../../b/a/c/Image%7EBackjump-variables-1.svg_793c.html" class="image" title="Image:Backjump-variables-1.svg"><img src="../../../upload/shared/thumb/7/7f/Backjump-variables-1.svg/144px-Backjump-variables-1.svg.png" alt="Image:Backjump-variables-1.svg" width="144" height="126" longdesc="../../../b/a/c/Image%7EBackjump-variables-1.svg_793c.html" /></a></td>
<td><a href="../../../b/a/c/Image%7EBackjump-variables-2.svg_d764.html" class="image" title="Image:Backjump-variables-2.svg"><img src="../../../upload/shared/thumb/7/70/Backjump-variables-2.svg/144px-Backjump-variables-2.svg.png" alt="Image:Backjump-variables-2.svg" width="144" height="126" longdesc="../../../b/a/c/Image%7EBackjump-variables-2.svg_d764.html" /></a></td>
<td><a href="../../../b/a/c/Image%7EBackjump-variables-3.svg_c6bc.html" class="image" title="Image:Backjump-variables-3.svg"><img src="../../../upload/shared/thumb/9/9c/Backjump-variables-3.svg/144px-Backjump-variables-3.svg.png" alt="Image:Backjump-variables-3.svg" width="144" height="126" longdesc="../../../b/a/c/Image%7EBackjump-variables-3.svg_c6bc.html" /></a></td>
</tr>
<tr>
<td>An example in which the current assignment to <span class="texhtml"><i>x</i><sub>1</sub><i>x</i><sub>2</sub><i>x</i><sub>3</sub><i>x</i><sub>4</sub></span> has been unsuccessfully tried with every possible value of <span class="texhtml"><i>x</i><sub>5</sub></span>. Backtracking goes back to <span class="texhtml"><i>x</i><sub>4</sub></span>, trying to assign it a new value.</td>
<td>Instead of backtracking, the algorithm makes some further elaboration, proving that the evaluations <span class="texhtml"><i>x</i><sub>1</sub><i>x</i><sub>2</sub><i>x</i><sub>5</sub> = 211</span>, <span class="texhtml"><i>x</i><sub>1</sub><i>x</i><sub>5</sub> = 22</span>, and <span class="texhtml"><i>x</i><sub>1</sub><i>x</i><sub>2</sub><i>x</i><sub>5</sub> = 213</span> are not part of any solution.</td>
<td>As a result, the current evaluation of <span class="texhtml"><i>x</i><sub>1</sub><i>x</i><sub>2</sub></span> is not part of any solution, and the algorithm can directly backjump to <span class="texhtml"><i>x</i><sub>2</sub></span>, trying a new value for it.</td>
</tr>
</table>
<p>The efficiency of a backjumping algorithm depends on how high it is able to backjump. Ideally, the algorithm could jump from <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span> to whichever variable <span class="texhtml"><i>x</i><sub><i>j</i></sub></span> is such that the current assignment to <img class='tex' src="../../../math/5/5/3/5538cb6f2854872b73a50675dc5f3fcc.png" alt="x_1,\ldots,x_j" /> cannot be extended to form a solution with any value of <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span>. If this is the case, <span class="texhtml"><i>j</i></span> is called a <i>safe jump</i>.</p>
<p>Establishing whether a jump is safe is not always feasible, as safe jumps are defined in terms of the set of solutions, which is what the algorithm is trying to find. In practice, backjumping algorithms use the lowest index they can efficiently prove to be a safe jump. Different algorithms use different methods for determining whether a jump is safe. These methods have different cost, but a higher cost of finding a higher safe jump may be traded off a reduced amount of search due to skipping parts of the search tree.</p>
<p><a name="Backjumping_at_leaf_nodes" id="Backjumping_at_leaf_nodes"></a></p>
<h2><span class="editsection">[<a href="../../../b/a/c/Backjumping.html" title="Edit section: Backjumping at leaf nodes">edit</a>]</span> <span class="mw-headline">Backjumping at leaf nodes</span></h2>
<p>The simplest condition in which backjumping is possible is when all values of a variable have been proved inconsistent without further branching. In <a href="../../../c/o/n/Constraint_satisfaction.html" title="Constraint satisfaction">constraint satisfaction</a>, a partial evaluation is <i>consistent</i> if and only if it satisfies all constraints involving the assigned variables, and <i>inconsistent</i> otherwise. It might be the case that a consistent partial solution cannot be extended to a consistent complete solution because some of the unassigned variables may not be assigned without violating other constraints.</p>
<p>The condition in which all values of a given variable <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span> are inconsistent with the current partial solution <img class='tex' src="../../../math/6/c/6/6c63f7053baf0b05171ea6313a0b278e.png" alt="x_1,\ldots,x_k=a_1,\ldots,a_k" /> is called a <i>leaf dead end</i>. This happens exactly when the variable <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span> is a leaf of the search tree (which correspond to nodes having only leaves as children in the figures of this article.)</p>
<p>The backjumping algorithm by Gaschnig does a backjump only in leaf dead ends. In other words, it works differently to backtracking only when every possible value of <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span> has been tested and resulted inconsistent without the need of branching over another variable.</p>
<p>A safe jump can be found by simply evaluating, for every value <span class="texhtml"><i>a</i><sub><i>k</i> + 1</sub></span>, the shortest prefix of <img class='tex' src="../../../math/6/c/6/6c63f7053baf0b05171ea6313a0b278e.png" alt="x_1,\ldots,x_k=a_1,\ldots,a_k" /> consistent with <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub> = <i>a</i><sub><i>k</i> + 1</sub></span>. In other words, if <span class="texhtml"><i>a</i><sub><i>k</i> + 1</sub></span> is a possible value for <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span>, the algorithm checks the consistency of the following evaluations:</p>
<table cellpadding="10">
<tr>
<td><span class="texhtml"><i>x</i><sub>1</sub> = <i>a</i><sub>1</sub></span></td>
<td>...</td>
<td><span class="texhtml"><i>x</i><sub><i>k</i> − 1</sub> = <i>a</i><sub><i>k</i> − 1</sub></span></td>
<td><span class="texhtml"><i>x</i><sub><i>k</i></sub> = <i>a</i><sub><i>k</i></sub></span></td>
<td><span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub> = <i>a</i><sub><i>k</i> + 1</sub></span></td>
</tr>
<tr>
<td><span class="texhtml"><i>x</i><sub>1</sub> = <i>a</i><sub>1</sub></span></td>
<td>...</td>
<td><span class="texhtml"><i>x</i><sub><i>k</i> − 1</sub> = <i>a</i><sub><i>k</i> − 1</sub></span></td>
<td></td>
<td><span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub> = <i>a</i><sub><i>k</i> + 1</sub></span></td>
</tr>
<tr>
<td>...</td>
</tr>
<tr>
<td><span class="texhtml"><i>x</i><sub>1</sub> = <i>a</i><sub>1</sub></span></td>
<td></td>
<td></td>
<td></td>
<td><span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub> = <i>a</i><sub><i>k</i> + 1</sub></span></td>
</tr>
</table>
<p>The smallest index for which one of these evaluations is consistent would be a safe jump if <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub> = <i>a</i><sub><i>k</i> + 1</sub></span> were the only possible value for <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span>. Since every variable can usually take more than one value, the maximal index that comes out from the check for each value is a safe jump, and is the point where Gaschnig's algorithm jumps.</p>
<p>In practice, the algorithm can check the evaluations above at the same time it is checking the consistency of <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub> = <i>a</i><sub><i>k</i> + 1</sub></span>.</p>
<p><a name="Backjumping_at_internal_nodes" id="Backjumping_at_internal_nodes"></a></p>
<h2><span class="editsection">[<a href="../../../b/a/c/Backjumping.html" title="Edit section: Backjumping at internal nodes">edit</a>]</span> <span class="mw-headline">Backjumping at internal nodes</span></h2>
<p>The previous algorithm only backjumps when the values of a variable can be shown inconsistent with the current partial solution without further branching. In other words, it allows for a backjump only at leaf nodes in the search tree.</p>
<p>An internal node of the search tree represent an assignment of a variable that is consistent with the previous ones. If no solution extends this assignment, the previous algorithm always backtracks: no backjump is done in this case.</p>
<p>Backjumping at internal nodes cannot be done as for leaf nodes. Indeed, if some evaluations of <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span> required branching, it is because they are consistent with the current assignment. As a result, searching for a prefix that is inconsistent with these values of the last variable does not succeed.</p>
<p>In such cases, what proved an evaluation <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub> = <i>a</i><sub><i>k</i> + 1</sub></span> not to be part of a solution with the current partial evaluation <img class='tex' src="../../../math/0/a/a/0aa86b202607893c2f3a6e8edfed2df3.png" alt="x_1,\ldots,x_k" /> is the <a href="../../../r/e/c/Recursion.html" title="Recursion">recursive</a> search. In particular, the algorithm "knows" that no solution exists from this point on because it comes back to this node instead of stopping after having found a solution.</p>
<p>This return is due to a number of <i>dead ends</i>, points where the algorithm has proved a partial solution inconsistent. In order to further backjump, the algorithm has to take into account that the impossibility of finding solutions is due to these dead ends. In particular, the safe jumps are indexes of prefixes that still make these dead ends to be inconsistent partial solutions.</p>
<table>
<tr>
<td><a href="../../../d/e/a/Image%7EDead-ends-1.svg_9444.html" class="image" title="Image:Dead-ends-1.svg"><img src="../../../upload/shared/thumb/4/44/Dead-ends-1.svg/180px-Dead-ends-1.svg.png" alt="Image:Dead-ends-1.svg" width="180" height="216" longdesc="../../../d/e/a/Image%7EDead-ends-1.svg_9444.html" /></a></td>
<td><a href="../../../d/e/a/Image%7EDead-ends-1a.svg_aae1.html" class="image" title="Image:Dead-ends-1a.svg"><img src="../../../upload/shared/thumb/1/19/Dead-ends-1a.svg/180px-Dead-ends-1a.svg.png" alt="Image:Dead-ends-1a.svg" width="180" height="216" longdesc="../../../d/e/a/Image%7EDead-ends-1a.svg_aae1.html" /></a></td>
<td><a href="../../../d/e/a/Image%7EDead-ends-2.svg_2684.html" class="image" title="Image:Dead-ends-2.svg"><img src="../../../upload/shared/thumb/a/a0/Dead-ends-2.svg/180px-Dead-ends-2.svg.png" alt="Image:Dead-ends-2.svg" width="180" height="216" longdesc="../../../d/e/a/Image%7EDead-ends-2.svg_2684.html" /></a></td>
<td><a href="../../../d/e/a/Image%7EDead-ends-3.svg_2fe1.html" class="image" title="Image:Dead-ends-3.svg"><img src="../../../upload/shared/thumb/9/99/Dead-ends-3.svg/180px-Dead-ends-3.svg.png" alt="Image:Dead-ends-3.svg" width="180" height="216" longdesc="../../../d/e/a/Image%7EDead-ends-3.svg_2fe1.html" /></a></td>
</tr>
<tr>
<td>In this example, the algorithm come back to <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span>, after trying all its possible values, because of the three crossed points of inconsistency.</td>
<td>The second point remains inconsistent even if the values of <span class="texhtml"><i>x</i><sub><i>k</i> − 1</sub></span> and <span class="texhtml"><i>x</i><sub><i>k</i></sub></span> are removed from its partial evaluation (note that the values of a variable are in its children)</td>
<td>The other inconsistent evaluations remains so even without <span class="texhtml"><i>x</i><sub><i>k</i> − 2</sub></span>, <span class="texhtml"><i>x</i><sub><i>k</i> − 1</sub></span>, and <span class="texhtml"><i>x</i><sub><i>k</i></sub></span></td>
<td>The algorithm can backjump to <span class="texhtml"><i>x</i><sub><i>k</i> − 2</sub></span> since this is the lowest variables that maintains all inconsistencies. A new value for <span class="texhtml"><i>x</i><sub><i>k</i> − 2</sub></span> will be tried.</td>
</tr>
</table>
<p>In other words, when all values of <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span> have been tried, the algorithm can backjump to a variable <span class="texhtml"><i>x</i><sub><i>i</i></sub></span> provided that the current truth evaluation of <img class='tex' src="../../../math/8/7/2/872ba266baf778e6e56285fe78092a21.png" alt="x_1,\ldots,x_i" /> is inconsistent with all truth evaluations of <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub>,<i>x</i><sub><i>k</i> + 1</sub>,...</span> in the leaf nodes that are descendants of the node <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span>.</p>
<p><a name="Simplifications" id="Simplifications"></a></p>
<h3><span class="editsection">[<a href="../../../b/a/c/Backjumping.html" title="Edit section: Simplifications">edit</a>]</span> <span class="mw-headline">Simplifications</span></h3>
<div class="thumb tright">
<div class="thumbinner" style="width:202px;"><a href="../../../b/a/c/Image%7EBackjump-ignored.svg_3a6d.html" class="internal" title="While looking for a possible backjump for xk+1 or one its ancestors, all nodes in the shaded area can be ignored."><img src="../../../upload/shared/thumb/d/d9/Backjump-ignored.svg/200px-Backjump-ignored.svg.png" alt="While looking for a possible backjump for xk+1 or one its ancestors, all nodes in the shaded area can be ignored." width="200" height="181" longdesc="../../../b/a/c/Image%7EBackjump-ignored.svg_3a6d.html" class="thumbimage" /></a>
<div class="thumbcaption">
<div class="magnify" style="float:right"><a href="../../../b/a/c/Image%7EBackjump-ignored.svg_3a6d.html" class="internal" title="Enlarge"><img src="../../../skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>
While looking for a possible backjump for xk+1 or one its ancestors, all nodes in the shaded area can be ignored.</div>
</div>
</div>
<p>Due to the potentially high number of nodes that are in the subtree of <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span>, the information that is necessary to safely backjump from <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span> is collected during the visit of its subtree. Finding a safe jump can be simplified by two considerations. The first is that the algorithm needs a safe jump, but still works with a jump that is not the highest possible safe jump.</p>
<p>The second simplification is that nodes in the subtree of <span class="texhtml"><i>x</i><sub><i>l</i></sub></span> that have been skipped by a backjump can be ignored while looking for a backjump for <span class="texhtml"><i>x</i><sub><i>l</i></sub></span>. More precisely, all nodes skipped by a backjump from node <span class="texhtml"><i>x</i><sub><i>m</i></sub></span> up to node <span class="texhtml"><i>x</i><sub><i>l</i></sub></span> are irrelevant to the subtree rooted at <span class="texhtml"><i>x</i><sub><i>m</i></sub></span>, and also irrelevant are their other subtrees.</p>
<p>Indeed, if an algorithm went down from node <span class="texhtml"><i>x</i><sub><i>l</i></sub></span> to <span class="texhtml"><i>x</i><sub><i>m</i></sub></span> via a path but backjumps in its way back, then it could have gone directly from <span class="texhtml"><i>x</i><sub><i>l</i></sub></span> to <span class="texhtml"><i>x</i><sub><i>m</i></sub></span> instead. Indeed, the backjump indicates that the nodes between <span class="texhtml"><i>x</i><sub><i>l</i></sub></span> and <span class="texhtml"><i>x</i><sub><i>m</i></sub></span> are irrelevant to the subtree rooted at <span class="texhtml"><i>x</i><sub><i>m</i></sub></span>. In other words, a backjump indicates that the visit of a region of the search tree had been a mistake. This part of the search tree can therefore be ignored when considering a possible backjump from <span class="texhtml"><i>x</i><sub><i>l</i></sub></span> or from one of its ancestors.</p>
<div class="thumb tright">
<div class="thumbinner" style="width:302px;"><a href="../../../b/a/c/Image%7EBackjump-collect.svg_a536.html" class="internal" title="Variables whose values are sufficient to prove unsatisfiability in the subtree rooted at a node are collected in the node and sent (after removing the variable of the node) to the node above when retracting."><img src="../../../upload/shared/thumb/a/a3/Backjump-collect.svg/300px-Backjump-collect.svg.png" alt="Variables whose values are sufficient to prove unsatisfiability in the subtree rooted at a node are collected in the node and sent (after removing the variable of the node) to the node above when retracting." width="300" height="175" longdesc="../../../b/a/c/Image%7EBackjump-collect.svg_a536.html" class="thumbimage" /></a>
<div class="thumbcaption">
<div class="magnify" style="float:right"><a href="../../../b/a/c/Image%7EBackjump-collect.svg_a536.html" class="internal" title="Enlarge"><img src="../../../skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>
Variables whose values are sufficient to prove unsatisfiability in the subtree rooted at a node are collected in the node and sent (after removing the variable of the node) to the node above when retracting.</div>
</div>
</div>
<p>This fact can be exploited by collecting, in each node, a set of previously assigned variables whose evaluation suffices to prove that no solution exists in the subtree rooted at the node. This set is built during the execution of the algorithm. When retracting from a node, this set is removed the variable of the node and collected in the set of the destination of backtracking or backjumping. Since nodes that are skipped from backjumping are never retracted from, their sets are automatically ignored.</p>
<p><a name="Graph-based_backjumping" id="Graph-based_backjumping"></a></p>
<h3><span class="editsection">[<a href="../../../b/a/c/Backjumping.html" title="Edit section: Graph-based backjumping">edit</a>]</span> <span class="mw-headline">Graph-based backjumping</span></h3>
<p>The rationale of graph-based backjumping is that a safe jump can be found by checking which of the variables <img class='tex' src="../../../math/0/a/a/0aa86b202607893c2f3a6e8edfed2df3.png" alt="x_1,\ldots,x_k" /> are in a constraint with the variables <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub>,<i>x</i><sub><i>k</i> + 2</sub>,...</span> that are instantiated in leaf nodes. For every leaf node and every variable <span class="texhtml"><i>x</i><sub><i>i</i></sub></span> of index <span class="texhtml"><i>i</i> &gt; <i>k</i></span> that is instantiated there, the indexes less than or equal to <span class="texhtml"><i>k</i></span> whose variable is in a constraint with <span class="texhtml"><i>x</i><sub><i>i</i></sub></span> can be used to find safe jumps. In particular, when all values for <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span> have been tried, this set contains the indexes of the variables whose evaluations allow proving that no solution can be found by visiting the subtree rooted at <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span>. As a result, the algorithm can backjump to the highest index in this set.</p>
<p>The fact that nodes skipped by backjumping can be ignored when considering a further backjump can be exploited by the following algorithm. When retracting from a lead node, the set of variables that are in constraint with it is created and "sent back" to its parent, or ancestor in case of backjumping. At every internal node, a set of variables is maintained. Every time a set of variable is received from one of its children or descendant, their variables are added to the maintained set. When further backtracking or backjumping from the node, the variable of the node is removed from this set, and the set is sent to the node that is the destination of backtracking or backjumping. This algorithm works because the set maintained in a node collects all variables that are relevant to prove unsatisfiability in the leaves that are descendant of this node. Since sets of variables are only sent when retracing from nodes, the sets collected at nodes skipped by backjumping are automatically ignored.</p>
<p><a name="Conflict-based_backjumping" id="Conflict-based_backjumping"></a></p>
<h3><span class="editsection">[<a href="../../../b/a/c/Backjumping.html" title="Edit section: Conflict-based backjumping">edit</a>]</span> <span class="mw-headline">Conflict-based backjumping</span></h3>
<p>A still more refined backjumping algorithm, sometimes able to larger backjumps, is based on checking not only the common presence of two variables in the same constraint but also on whether the constraint actually caused inconsistency. In particular, this algorithm collects one of the violated constraint in every leaf. At every node, the highest index of a variable that is in one of the constraints collected at the leaves is a safe jump.</p>
<p>While the violated constraint chosen in each leaf does not affect the safeness of the resulting jump, choosing constraints of highest possible indexes increases the highness of the jump. For this reason, conflict-based backjumping orders constraints in such a way constraints over lower indexes variables are preferred over constraints on higher index variables.</p>
<p>Formally, a constraint <span class="texhtml"><i>C</i></span> is preferred over another one <span class="texhtml"><i>D</i></span> if the highest index of a variable in <span class="texhtml"><i>C</i></span> but not in <span class="texhtml"><i>D</i></span> is lower than the highest index of a variable in <span class="texhtml"><i>D</i></span> but not in <span class="texhtml"><i>C</i></span>. In other words, excluding common variables, the constraint that has the all lower indexes is preferred.</p>
<p>In a leaf node, the algorithm chooses the lowest index <span class="texhtml"><i>i</i></span> such that <img class='tex' src="../../../math/8/7/2/872ba266baf778e6e56285fe78092a21.png" alt="x_1,\ldots,x_i" /> is inconsistent with the last variable evaluated in the leaf. Among the constraints that are violated in this evaluation, it chooses the most preferred one, and collects all its indexes less than <span class="texhtml"><i>k</i> + 1</span>. This way, when the algorithm comes back to the variable <span class="texhtml"><i>x</i><sub><i>k</i> + 1</sub></span>, the lowest collected index identify a safe jump.</p>
<p>In practice, this algorithm is simplified by collecting all indexes in a single set, instead of creating a set for every value of <span class="texhtml"><i>k</i></span>. In particular, the algorithm collects, in each node, all sets coming from its descendants that have not been skipped by backjumping. When retracting from this node, this set is removed the variable of the node and collected into the destination of backtracking or backjumping.</p>
<p><a name="See_also" id="See_also"></a></p>
<h2><span class="editsection">[<a href="../../../b/a/c/Backjumping.html" title="Edit section: See also">edit</a>]</span> <span class="mw-headline">See also</span></h2>
<ul>
<li><a href="../../../c/o/n/Constraint_learning.html" title="Constraint learning">Constraint learning</a></li>
</ul>
<p><a name="Reference" id="Reference"></a></p>
<h2><span class="editsection">[<a href="../../../b/a/c/Backjumping.html" title="Edit section: Reference">edit</a>]</span> <span class="mw-headline">Reference</span></h2>
<ul>
<li><cite class="book" style="font-style:normal" id="Reference-Dechter-2003">Dechter, Rina (2003). <i><a href="http://www.ics.uci.edu/~dechter/books/index.html" class="external text" title="http://www.ics.uci.edu/~dechter/books/index.html" rel="nofollow">Constraint Processing</a></i>. Morgan Kaufmann. <a href="../../../b/o/o/Special%7EBooksources_ed7b.html" class="internal">ISBN 1-55860-890-7</a>.</cite><span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Constraint+Processing&amp;rft.title=Constraint+Processing&amp;rft.aulast=Dechter&amp;rft.aufirst=Rina&amp;rft.date=2003&amp;rft.pub=Morgan+Kaufmann&amp;rft_id=http%3A%2F%2Fwww.ics.uci.edu%2F%7Edechter%2Fbooks%2Findex.html">&#160;</span></li>
</ul>

<!-- 
Pre-expand include size: 4974 bytes
Post-expand include size: 1514 bytes
Template argument size: 1075 bytes
Maximum: 2048000 bytes
-->
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../b/a/c/Backjumping.html">http://en.wikipedia.org../../../b/a/c/Backjumping.html</a>"</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>: <span dir='ltr'><a href="../../../c/o/n/Category%7EConstraint_satisfaction_9cb8.html" title="Category:Constraint satisfaction">Constraint satisfaction</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main"
	       class="selected"	       ><a href="../../../b/a/c/Backjumping.html">Article</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../b/a/c/Talk%7EBackjumping_2562.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/Backjumping">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 16:39, 15 November 2006 by Anonymous user(s) of Wikipedia. Based on work by Wikipedia user(s) Stefano Pacifico, <a href="../../../t/i/z/User%7ETizio_edab.html" title="User:Tizio">Tizio</a>, <a href="../../../n/e/i/User%7ENeilc_4027.html" title="User:Neilc">Neilc</a>, <a href="../../../c/m/d/User%7ECmdrjameson_3c06.html" title="User:Cmdrjameson">Cmdrjameson</a> and <a href="../../../l/i/g/User%7ELigulembot_623f.html" title="User:Ligulembot">Ligulembot</a>.</li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>

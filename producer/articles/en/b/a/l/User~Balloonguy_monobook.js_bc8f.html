<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="User:Balloonguy/monobook.js,Blocking policy,Bypass your cache,Village pump (technical)" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>User:Balloonguy/monobook.js - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-2">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">User:Balloonguy/monobook.js</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"><span class="subpages">&lt; <a href="../../../b/a/l/User%7EBalloonguy_1ec0.html" title="User:Balloonguy">User:Balloonguy</a></span></div>
	    	    <div class="usermessage">You have <a href="../../../1/2/7/User_talk%7E127.0.0.1.html" title="User talk:127.0.0.1">new messages</a> (<a href="../../../1/2/7/User_talk%7E127.0.0.1.html" title="User talk:127.0.0.1">last change</a>).</div>	    <!-- start content -->
	    <p><span id="clearyourcache"><b>Note:</b> After saving, you have to <a href="../../../b/y/p/Wikipedia%7EBypass_your_cache_1dae.html" title="Wikipedia:Bypass your cache">bypass your browser's cache</a> to see the changes. <b>Firefox/Mozilla/Safari:</b> hold down <i>Shift</i> while clicking <i>Reload</i> (or press <i>Ctrl-Shift-R</i>), <b>Internet Explorer:</b> press <i>Ctrl-F5</i>, <b>Opera/Konqueror:</b> press <i>F5</i>. 
</p>
<div style="color:darkred;background-color:#EEEEEE;border: darkred 2px solid;padding:5px;" id="jswarning"><div style="clear: both;color:darkred;"></div><b><div style="display:block;">If a message on your talk page led you here, please be wary of who left it.  The code below could contain malicious content capable of compromising your account; if your account appears to be compromised, it will be <a href="../../../b/l/o/Wikipedia%7EBlocking_policy_2eb0.html" title="Wikipedia:Blocking policy">blocked</a>.  If you are unsure whether the code is safe, you can ask at the appropriate <a href="../../../v/i/l/Wikipedia%7EVillage_pump_%28technical%29_e812.html" title="Wikipedia:Village pump (technical)">village pump</a>.</b></div></div></span>
<pre>// installation of the wikEd editing page extension
wikEdLoadRegExTypoFix = true;
// install [[User:Cacycle/diff]] text diff code
document.write('&lt;script type=&quot;text/javascript&quot; src=&quot;'
+ 'http://en.wikipedia.org/w/index.php?title=User:Cacycle/diff.js'
+ '&amp;action=raw&amp;ctype=text/javascript&amp;dontcountme=s&quot;&gt;&lt;/script&gt;');

// install [[User:Pilaf/Live_Preview]] page preview tool
document.write('&lt;script type=&quot;text/javascript&quot; src=&quot;'
+ 'http://en.wikipedia.org/w/index.php?title=User:Pilaf/livepreview.js'
+ '&amp;action=raw&amp;ctype=text/javascript&amp;dontcountme=s&quot;&gt;&lt;/script&gt;');

// install [[User:Mboverload/RegExTypoFix|RegExTypoFix]] common typo fixer
document.write('&lt;script type=&quot;text/javascript&quot; src=&quot;'
+ 'http://en.wikipedia.org/w/index.php?title=User:Cacycle/RegExTypoFix.js'
+ '&amp;action=raw&amp;ctype=text/javascript&amp;dontcountme=s&quot;&gt;&lt;/script&gt;');

// install [[User:Cacycle/wikEd international]] translation here

// install [[User:Cacycle/wikEd]] editing page extension
document.write('&lt;script type=&quot;text/javascript&quot; src=&quot;'
+ 'http://en.wikipedia.org/w/index.php?title=User:Cacycle/wikEd.js'
+ '&amp;action=raw&amp;ctype=text/javascript&amp;dontcountme=s&quot;&gt;&lt;/script&gt;');
/* &lt;pre&gt;&lt;nowiki&gt; */
/* quickimgdelete.js
 * Current version: 1.5
 * =======================================
 * Created by [[User:Howcheng|Howard Cheng]]
 * Released under the [[GNU Public License]] (GPL)
 * Full documentation at [[User talk:Howcheng/quickimgdelete.js]]
 * =======================================
 */
// ==General configuration==
qid_autosave = true; // Should the edits be saved automatically?
// Site info
qid_path = &quot;/w/index.php&quot;;
qid_prettypath = &quot;/wiki/&quot;;
qid_hostname = window.location.hostname;

// ==Helper functions== 
// from [[User:Jnothman/automod.js]]
function GuessUTCDate() {
    var monthnames = new Array( &quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;);
    var today = new Date();
    return today.getUTCFullYear() + ' ' + monthnames[today.getUTCMonth()] + ' ' + today.getUTCDate();
}

// From [[en:User:Lupin/autoedit.js]]
function getParamValue(paramName) {
  var cmdRe=RegExp('[&amp;?]'+paramName+'=([^&amp;]*)');
  var h=document.location;
  var m=cmdRe.exec(h);
  if (m) {
    try {
      return decodeURIComponent(m[1]);
    } catch (someError) {}
  }
  return null;
}

function qid_openWindow(url, windowName) {
  if (!windowName) windowName = 'qid_window';
  var res = window.open(url, windowName);
  if (!res) alert(&quot;qid_openWindow: window.open() returned null&quot;);
}

function qid_getUploader() {
  // Get uploader from first point in the list under &quot;File history&quot;
  // Uploader is stored in second A tag in UL tag under &quot;File history&quot;
  // Returns title of user page (without name space) in URL form
  var el = document.getElementById('filehistory')
  if (!el) {
    alert(&quot;qid_getUploader: Cannot find filehistory ... exiting&quot;);
    return null;
  }
  while (el.nextSibling) {
    el = el.nextSibling;
    if (el.tagName &amp;&amp; el.tagName.toLowerCase() == 'ul') 
      break;
  }
  if (!el) {
    alert(&quot;qid_getUploader: Cannot find UL tag ... exiting&quot;);
    return null;
  }
  
  var els = el.getElementsByTagName('li');
  if (!els) {
    alert(&quot;qid_getUploader: Cannot find LI tag ... exiting&quot;);
    return null;
  }
  var uploaders = new Array();
  var re1 = new RegExp('http://' + (qid_hostname + qid_prettypath).replace(/\./g, '\\.') + 'User:(.*)$');
  var re2 = new RegExp('http://' + (qid_hostname + qid_path).replace(/\./g, '\\.') + '\\?title=User:([^&amp;]*)');
  var re3 = /User( talk)?:(.*)$/; // this is for IE and handling Unicode characters

  var m;
  var uploader;
  var uploaderList = &quot;&quot;;
  var count = 0;
  el = els[0];
  do {
    var as = el.childNodes;
    for (var k=0; k&lt;as.length; k++) {
       if (as[k].tagName != 'A') continue;
       m = re3.exec(as[k].title);
       if (m) uploader = encodeURIComponent(m[2]);
       m = re1.exec(as[k].href);
       if (m) uploader = m[1];
       m = re2.exec(as[k].href);
       if (m) uploader = m[1];
    }

    if (uploaderList.indexOf(uploader) == -1) {
      if (count &gt; 0) uploaderList += &quot;; &quot;;
      uploaderList += count + &quot; - &quot; + uploader;
      uploaders[uploaders.length] = uploader;
      count += 1;
    }
    el = el.nextSibling;
  } while (el);

  if (!uploaders || uploaders.length == 0) {
    alert(&quot;qid_getUploader: Cannot find uploader ... exiting&quot;);
    return null;
  }
  if (uploaders.length == 1)
    return uploaders[0];

  var which = parseInt(window.prompt(&quot;Choose which uploader to notify: &quot; + uploaderList));
  if (isNaN(which) || which &lt; 0 || which &gt; uploaders.length) {
    alert(&quot;qid_getUploader: Invalid selection ... exiting&quot;);
    return null;
  }
  return uploaders[which];
}

function qid_removeUntaggedTemplate(editformval) {
  var untaggedpos = editformval.indexOf('{{untagged');
  if (untaggedpos &gt; -1) {
    var lastbracepos = editformval.indexOf('}}', untaggedpos) + 1;
    editformval = editformval.substr(0, untaggedpos) + editformval.substr(lastbracepos + 2);
  }
  return editformval;
}

function qid_checkForRedirect(editformval, type) {
  if (editformval.toLowerCase().indexOf(&quot;#redirect&quot;) == -1)
    return;

  var re = /\[\[([^\]]+)\]\]/;
  var m = re.exec(editformval);
  var redirtarget = m[1];
  var fakeaction = getParamValue(&quot;fakeaction&quot;);
  var pagename = getParamValue(&quot;target&quot;);
  var redirurl = qid_path + '?title=' + redirtarget
               + '&amp;action=edit&amp;fakeaction=' + fakeaction + '&amp;target=' + pagename;
  if (type)
    redirurl += '&amp;type=' + type;
  window.location.replace(redirurl);
}

function qid_saveEditForm(txt, summary) {
  document.editform.wpTextbox1.value = txt;
  document.editform.wpSummary.value = summary;
  if (qid_autosave) document.editform.wpSave.click();
}

/** ================================================================================
  * ==Automatic 'nominate for deletion/pui/imagevio' script==
  * The actions in this section do three things:
  * 1. Add a tag to the image page.
  * 2. List the image on a log page.
  * 3. Add a warning template to the uploader's talk page.
  */
// Configuration
nfd_text = &quot;Nominate for deletion&quot;;
nfd_tooltip = &quot;Nominate this image for deletion&quot;;
nfd_prompt = &quot;Why do you want to nominate this image for deletion?&quot;;
nfd_delReq = &quot;Wikipedia:Images_and_media_for_deletion/&quot; + GuessUTCDate().replace(' ', '_');
nfd_deleteTemplate = &quot;ifd&quot;;
nfd_idwTemplate = &quot;idw&quot;;
nfd_ifdTemplate = &quot;ifd2&quot;;

pui_text = &quot;Possibly unfree image&quot;;
pui_tooltip = &quot;Mark this image as possibly unfree&quot;;
pui_prompt = &quot;Why do you think this image is possibly unfree?&quot;;
pui_delReq = &quot;Wikipedia:Possibly_unfree_images&quot;;
pui_deleteTemplate = &quot;PUIdisputed&quot;;
pui_idwTemplate = &quot;idw-pui&quot;;

vio_text = &quot;Copyright violation&quot;;
vio_tooltip = &quot;Mark this image as a copyright violation&quot;;
vio_prompt = &quot;Enter the URL that this image is copied from.&quot;;
vio_delReq = &quot;Wikipedia:Copyright_problems/&quot; + GuessUTCDate().replace(' ', '_') + &quot;/Images&quot;;
vio_deleteTemplate = &quot;imagevio&quot;;
vio_idwTemplate = &quot;idw-cp&quot;;

function nfd_tagImage(which) {
  var promptTxt;
  var targetUrl;
  
  var editlk = document.getElementById('ca-edit').getElementsByTagName('a')[0].href;
  editlk += '&amp;fakeaction=' + which + '_delete'

  switch (which) {
    case 'nfd':
      promptTxt = nfd_prompt;
      targetUrl = nfd_delReq;
      break;
    case 'pui':
      promptTxt = pui_prompt;
      targetUrl = pui_delReq;
      break;
    case 'vio':
      promptTxt = vio_prompt;
      targetUrl = vio_delReq;
      editlk += '&amp;url=' + reason;
      break;
  }

  var reason = prompt(promptTxt, '');
  if (!reason) return;

  var pagename = encodeURIComponent(wgPageName);
  var uploader = qid_getUploader();
  if (!uploader) return;
  qid_openWindow(qid_path + '?title=User_talk:' + uploader
                 + '&amp;action=edit&amp;fakeaction=' + which + '_warn&amp;target=' + pagename);
  qid_openWindow(qid_path + '?title=' + targetUrl + '&amp;action=edit&amp;fakeaction=' + which + '_add' 
                 + '&amp;target=' + pagename + '&amp;reason=' + encodeURIComponent(reason)
                 + '&amp;uploader=' + uploader, 'qid_ifd_window');
  window.location = editlk;
}

function nfd_addDeleteTemplate(template, otherparam) {
  var txt = '{{' + template;
  var summary;
  switch (template) {
    case nfd_deleteTemplate:
      summary = 'nomination for [[WP:IFD|deletion]]';
      break;
    case pui_deleteTemplate:
      summary = 'this is a [[WP:PUI|possibly unfree image]]';
      break;
    case vio_deleteTemplate:
      summary = 'this image is suspected to be a [[WP:CP|copyright violation]]';
      txt += '|1=' + otherparam;
      break;
  }
  txt += '}}';
  var editformval = qid_removeUntaggedTemplate(document.editform.wpTextbox1.value);
  qid_saveEditForm(txt + '\n' + editformval, summary);
}

function nfd_addIdwTemplate(template, target) {
  qid_checkForRedirect(document.editform.wpTextbox1.value);
  var txt = '{{subst:' + template + '|1=' + target + '}}';
  var editformval = document.editform.wpTextbox1.value + '\n' + txt + '\n';
  qid_saveEditForm(editformval, txt);
}

function nfd_updateDelReq(target, reason, uploader) {
  var colonPos = target.indexOf(':');
  var imageName = target.substring(colonPos + 1);
  var txt = '{{subst:' + nfd_ifdTemplate + '|' + imageName +
    '|Uploader=' + uploader + '|Reason=' + reason + '}}';
  var editformval = document.editform.wpTextbox1.value + '\n' + txt + ' ~~' + '~~ \n';
  var summary = 'Nominating [[:' + target + ']]';
  qid_saveEditForm(editformval, summary);
}

function pui_updateDelReq(target, reason) {
  var txt = '* [[:' + target + ']] - ' + reason;
  var editformval = document.editform.wpTextbox1.value + txt + ' ~~' + '~~ \n';
  var summary = document.editform.wpSummary.value + 'Adding [[:' + target + ']]';
  qid_saveEditForm(editformval, summary);
}

function vio_updateDelReq(target, url) {
  var txt = '* {{subst:Image-cv|' + target + '}} from [' + url + '].';
  var editformval = document.editform.wpTextbox1.value + txt + ' ~~' + '~~ \n';
  var summary = document.editform.wpSummary.value + 'Adding [[:' + target + ']]';
  qid_saveEditForm(editformval, summary);
}

function nfd_onload() {
  if (document.getElementById('ca-edit') == null) // not editable by non-admin
    return;
  if (wgCanonicalNamespace == &quot;Image&quot;) {
    addPortletLink('p-tb', 'javascript:nfd_tagImage(\'nfd\')', nfd_text, 'nom-for-del', nfd_tooltip);
    addPortletLink('p-tb', 'javascript:nfd_tagImage(\'pui\')', pui_text, 'pui', pui_tooltip);
    addPortletLink('p-tb', 'javascript:nfd_tagImage(\'vio\')', vio_text, 'imagevio', 'vio_tooltip');
  }
  var fakeaction = getParamValue('fakeaction');
  switch (fakeaction) {
    case 'nfd_delete':
      nfd_addDeleteTemplate(nfd_deleteTemplate);
      break;
    case 'pui_delete':
      nfd_addDeleteTemplate(pui_deleteTemplate);
      break;
    case 'vio_delete':
      nfd_addDeleteTemplate(vio_deleteTemplate, 
        decodeURIComponent(getParamValue('url')));
      break;
    case 'nfd_warn':
      nfd_addIdwTemplate(nfd_idwTemplate, unescape(getParamValue('target')));
      break;
    case 'pui_warn':
      nfd_addIdwTemplate(pui_idwTemplate, unescape(getParamValue('target')));
      break;
    case 'vio_warn':
      nfd_addIdwTemplate(vio_idwTemplate, unescape(getParamValue('target')));
      break;
    case 'nfd_add':
      nfd_updateDelReq(decodeURIComponent(getParamValue('target')), 
        decodeURIComponent(getParamValue('reason')), decodeURIComponent(getParamValue('uploader')));
      break;
    case 'pui_add':
      pui_updateDelReq(decodeURIComponent(getParamValue('target')), 
        decodeURIComponent(getParamValue('reason')));
      break;
    case 'vio_add':
      vio_updateDelReq(decodeURIComponent(getParamValue('target')), 
        decodeURIComponent(getParamValue('reason')));
      break;
  }
}

addOnloadHook(nfd_onload);

/** ================================================================================
  * ==Automatic 'mark no source' (mns) and 'mark no license' (mnl) script== // mnx = applies to all
  * The actions in this section do two things:
  * 1. Add a tag to the image page.
  * 2. Add a warning to the uploader's talk page.
  */
// Configuration
mns_text = &quot;Mark as no source&quot;;
mns_tooltip = &quot;Mark this image as missing required source information&quot;;

mnl_text = &quot;Mark as no license&quot;;
mnl_tooltip = &quot;Mark this image as missing required licensing information&quot;;

mnsl_text = &quot;Mark as no source/license&quot;;
mnsl_tooltip = &quot;Mark this image as missing both required source and licensing information&quot;;

mnr_text = &quot;Mark as no rationale&quot;;
mnr_tooltip = &quot;Mark this image as missing fair use rationale&quot;;

mor_text = &quot;Mark as orphaned fairuse&quot;;
mor_tooltip = &quot;Mark this image as an orphaned fair use image&quot;;

mrfu_text = &quot;Mark as replaceable fairuse&quot;;
mrfu_tooltip = &quot;Mark this image as a replaceable fair use image&quot;;

function mnx_markNo(action) {
  var pagename = encodeURIComponent(wgPageName);
  var uploader = qid_getUploader();
  if (!uploader) return;
  qid_openWindow(qid_path + '?title=User_talk:' + uploader
                 + '&amp;action=edit&amp;fakeaction=mnx_warn&amp;target=' + pagename
                 + '&amp;type=' + action);
  var editlk = document.getElementById('ca-edit').getElementsByTagName('a')[0].href;
  window.location = editlk + '&amp;fakeaction=' + action ;
}

function mnx_addTemplate(template) {
  var txt = '{{subst:' + template + '}}';
// this MUST be subst since templates are NSD, NLD
  var editformval = qid_removeUntaggedTemplate(document.editform.wpTextbox1.value);
  var summary;
  switch (template) {
    case &quot;nsl&quot;:
      txt = '{{subst:nsd}}\n{{subst:nld}}';
    case &quot;nsd&quot;:
      summary = &quot;Image is missing source information and will be deleted in seven days if it is not added.&quot;;
      break;
    case &quot;nld&quot;:
      summary = &quot;Image is missing license information and will be deleted in seven days if it is not added.&quot;;
      break;
    case &quot;nrd&quot;:
      summary = &quot;Image is missing fair use rationale and will be deleted in seven days if it is not added.&quot;;
      break;
    case &quot;orfud&quot;:
      summary = &quot;This fair use image is not used in any articles and will be deleted in seven days if it remains so.&quot;;
      break;
    case &quot;rfu&quot;:
      summary = &quot;This fair use appears to illustrate a subject for which a free image could reasonably be found or created and will be deleted in seven days.&quot;;
      break;
  }
  qid_saveEditForm(txt + '\n' + editformval, summary);
}

function mnx_addUserWarningTemplate(type, imagetarget) {
  qid_checkForRedirect(document.editform.wpTextbox1.value, type);
  var template;
  var editSummary;
  switch (type) {
    case &quot;mnx_mns&quot;:
    case &quot;mnx_mnsl&quot;:
      template = &quot;image source&quot;;
      editSummary = &quot;Warning: image missing source information.&quot;;
      break;
    case &quot;mnx_mnl&quot;:
      template = &quot;image copyright&quot;;
      editSummary = &quot;Warning: image missing license information.&quot;;
      break;
    case &quot;mnx_mnr&quot;:
      template = &quot;missing rationale&quot;;
      editSummary = &quot;Warning: image missing fair use rationale.&quot;;
      break;
    case &quot;mnx_mor&quot;:
      template = &quot;orphaned&quot;;
      editSummary = &quot;The fair use image you uploaded is now orphaned.&quot;;
      break;
    case &quot;mnx_mrfu&quot;:
      template = &quot;replaceable&quot;;
      editSummary = &quot;The fair use image you uploaded is replaceable by a free one.&quot;;
      imagetarget = imagetarget.substring(6); // {{replaceable|example.png}}
      break;
  }
  var txt = '{{subst:' + template + '|1=' + imagetarget + '}}';
  var editformval = document.editform.wpTextbox1.value + '\n' + txt + ' ~~' + '~~\n';
  qid_saveEditForm(editformval, editSummary);
}

function mnx_onload() {
  if (document.getElementById('ca-edit') == null) // not editable by non-admin
    return;
  if (wgCanonicalNamespace == &quot;Image&quot;) {
    addPortletLink('p-tb', 'javascript:mnx_markNo(\'mnx_mns\')', mns_text, 'mark-no-source', mns_tooltip);
    addPortletLink('p-tb', 'javascript:mnx_markNo(\'mnx_mnl\')', mnl_text, 'mark-no-license', mnl_tooltip);
    addPortletLink('p-tb', 'javascript:mnx_markNo(\'mnx_mnsl\')', mnsl_text, 'mark-no-source-license', mnsl_tooltip);
    addPortletLink('p-tb', 'javascript:mnx_markNo(\'mnx_mnr\')', mnr_text, 'mark-no-rationale', mnr_tooltip);
    addPortletLink('p-tb', 'javascript:mnx_markNo(\'mnx_mor\')', mor_text, 'mark-orphaned', mor_tooltip);
    addPortletLink('p-tb', 'javascript:mnx_markNo(\'mnx_mrfu\')', mrfu_text, 'mark-replaceable', mrfu_tooltip);
  }
  var fakeaction = getParamValue('fakeaction');

  switch (fakeaction) {
    case 'mnx_mns':
      mnx_addTemplate('nsd');
      break;
    case 'mnx_mnl':
      mnx_addTemplate('nld');
      break;
    case 'mnx_mnsl':
      mnx_addTemplate('nsl');
      break;
    case 'mnx_mnr':
      mnx_addTemplate('nrd');
      break;
    case 'mnx_mor':
      mnx_addTemplate('orfud');
      break;
    case 'mnx_mrfu':
      mnx_addTemplate('rfu');
      break;
    case 'mnx_warn':
      mnx_addUserWarningTemplate(getParamValue('type'), decodeURIComponent(getParamValue('target')));
      break;
  }
}

addOnloadHook(mnx_onload);

/** ================================================================================
  * ==Automatic speedy tagging==
  * The actions in this section do one thing:
  * 1. Add a tag to the image page.
  */
mred_text = &quot;Mark as redundant image&quot;;
mred_tooltip = &quot;Mark this image as redundant (tag for speedy deletion)&quot;;

mmi_text = &quot;Mark as missing image&quot;;
mmi_tooltip = &quot;Mark as missing image (tag for speedy deletion)&quot;;

mmtc_text = &quot;Mark as Move to Commons&quot;;
mmtc_tooltip = &quot;Mark as candidate to move to Commons&quot;;

mncd_text = &quot;Mark as Commons duplicate&quot;;
mncd_tooltip = &quot;Mark as Commons duplicate&quot;;

function speedyi_addTemplate(template, imagetarget) {
  var summary;
  var usesubst = false;
  
  switch (template) {
    case 'isd':
      summary = 'Tagging for [[WP:CSD#I1|speedy deletion]]: Image is redundant to [[:Image:' + imagetarget + ']].';
      break;
    case 'missing image':
      summary = 'Tagging for [[WP:CSD#I2|speedy deletion]]: Image is missing or corrupt.';
      break;
    case 'Move to Commons':
      summary = 'Image is a candidate for moving to [[Commons:Main Page|Wikimedia Commons]].';
      break;
    case 'ncd':
      var commonsimgname = (!imagetarget) ? 'Image:{{subst:PAGENAME}}' : imagetarget;
      summary = 'Image is duplicate of [[Commons:Main Page|Commons]] image [[Commons:' + imagetarget + '|]].';
      usesubst = true;
      break;
  }

  var txt = '{{' + (usesubst ? 'subst:' : '') + template;
  if (template == 'isd' || (template == 'ncd' &amp;&amp; imagetarget)) {
    txt += '|1=' + imagetarget;
  }
  txt += '}}';
  var editformval = qid_removeUntaggedTemplate(document.editform.wpTextbox1.value);
  qid_saveEditForm(txt + '\n' + editformval, summary);
}

function speedyi_mark(action) {
  var editlk = document.getElementById('ca-edit').getElementsByTagName('a')[0].href;
  var xtra = '';
  switch (action) {
    case &quot;speedyi_mred&quot;:
      var dupe = window.prompt('Please enter the name of the image this one is redundant to.', '');
      if (!dupe) {
        alert('speedyi_mark: No image name entered.');
        return;
      }
      if (dupe.indexOf('Image:') == 0) {
        dupe = dupe.substring(6);
      }
      xtra = '&amp;target=' + dupe;
      break;
    case &quot;speedyi_mncd&quot;:
      var commonsimg = window.prompt('Please enter the name of the corresponding image on Commons (leave empty if the same name).', '');
      if (commonsimg == null) {
        alert('speedyi_mark: Action canceled.');
        return;
      }
      if (commonsimg != '') {
        xtra = '&amp;target=' + commonsimg;
      }
      break;
  }
  window.location = editlk + '&amp;fakeaction=' + action + xtra;
}

function speedyi_onload() {
  if (document.getElementById('ca-edit') == null) // not editable by non-admin
    return;
  if (wgCanonicalNamespace == &quot;Image&quot;) {
    addPortletLink('p-tb', 'javascript:speedyi_mark(\'speedyi_mred\')', mred_text, 'mark-redundant', mred_tooltip);
    addPortletLink('p-tb', 'javascript:speedyi_mark(\'speedyi_mmi\')', mmi_text, 'mark-missing', mmi_tooltip);
    addPortletLink('p-tb', 'javascript:speedyi_mark(\'speedyi_mmtc\')', mmtc_text, 'mark-movecommons', mmtc_tooltip);
    addPortletLink('p-tb', 'javascript:speedyi_mark(\'speedyi_mncd\')', mncd_text, 'mark-commons', mncd_tooltip);
  }
  var fakeaction = getParamValue('fakeaction');
  switch (fakeaction) {
    case 'speedyi_mred':
      speedyi_addTemplate('isd', decodeURIComponent(getParamValue('target')));
      break;
    case 'speedyi_mmi':
      speedyi_addTemplate('missing image');
      break;
    case 'speedyi_mmtc':
      speedyi_addTemplate('Move to Commons');
      break;
    case 'speedyi_mncd':
      var target = getParamValue('target');
      if (target) target = decodeURIComponent(target);
      speedyi_addTemplate('ncd', target);
      break;
  }
}

addOnloadHook(speedyi_onload);
/* &lt;/nowiki&gt;&lt;/pre&gt; */
// [[User:Outriggr/metadatatest.js]]      
 importScript('User:Outriggr/metadatatest.js');
 defaultProject = &quot;WPBiography&quot;;
 assessmentMarkAsMinor = false;
</pre><div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../b/a/l/User%7EBalloonguy_monobook.js_bc8f.html">http://en.wikipedia.org../../../b/a/l/User%7EBalloonguy_monobook.js_bc8f.html</a>"</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-user"
	       class="selected"	       ><a href="../../../b/a/l/User%7EBalloonguy_monobook.js_bc8f.html">User page</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../b/a/l/User_talk%7EBalloonguy_monobook.js_380a.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/User:Balloonguy/monobook.js">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 22:25, 5 March 2007 by Wikipedia user <a href="../../../b/a/l/User%7EBalloonguy_1ec0.html" title="User:Balloonguy">Balloonguy</a>. </li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>

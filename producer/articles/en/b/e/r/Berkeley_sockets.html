<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="Berkeley sockets,1983,1989,AF INET,AT&amp;T,Abstraction (computer science),Application programming interface,Berkeley Software Distribution,C (programming language),Computer network,Connectionless" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>Berkeley sockets - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-0">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Berkeley sockets</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"></div>
	    	    <div class="usermessage">You have <a href="../../../1/2/7/User_talk%7E127.0.0.1.html" title="User talk:127.0.0.1">new messages</a> (<a href="../../../1/2/7/User_talk%7E127.0.0.1.html" title="User talk:127.0.0.1">last change</a>).</div>	    <!-- start content -->
	    <p>The <b>Berkeley sockets</b> <a href="../../../a/p/p/Application_programming_interface.html" title="Application programming interface">application programming interface</a> (API) comprises a <a href="../../../l/i/b/Library_%28computing%29.html" title="Library (computing)">library</a> for developing applications in the <a href="../../../c/_/%28/C_%28programming_language%29.html" title="C (programming language)">C programming language</a> that perform <a href="../../../i/n/t/Inter-process_communication.html" title="Inter-process communication">inter-process communication</a>, most commonly across a <a href="../../../c/o/m/Computer_network.html" title="Computer network">computer network</a>.</p>
<p>Berkeley sockets (also known as the <a href="../../../b/e/r/Berkeley_Software_Distribution_433f.html" title="Berkeley Software Distribution">BSD</a> socket API) originated with the 4.2BSD <a href="../../../u/n/i/Unix.html" title="Unix">Unix</a> <a href="../../../o/p/e/Operating_system.html" title="Operating system">operating system</a> (released in <a href="../../../1/9/8/1983.html" title="1983">1983</a>) as an API. Only in <a href="../../../1/9/8/1989.html" title="1989">1989</a>, however, could <a href="../../../u/n/i/University_of_California%2C_Berkeley_70e2.html" title="University of California, Berkeley">UC Berkeley</a> release versions of its operating system and networking library free from the licensing constraints of <a href="../../../a/t/%26/AT%26T_b74e.html" title="AT&amp;T">AT&amp;T</a>'s copyright-protected Unix.</p>
<p>The Berkeley socket API forms the <i><a href="../../../d/e/_/De_facto.html" title="De facto">de facto</a></i> standard <a href="../../../a/b/s/Abstraction_%28computer_science%29.html" title="Abstraction (computer science)">abstraction</a> for network <a href="../../../s/o/c/Socket.html" title="Socket">sockets</a>. Most other programing languages use an interface similar to the C API.</p>
<p>The <a href="../../../s/t/r/Streams_%28networking_API%29_7361.html" title="Streams (networking API)">STREAMS</a>-based <a href="../../../t/r/a/Transport_Layer_Interface_9993.html" title="Transport Layer Interface">Transport Layer Interface</a> (TLI) API offers an alternative to the socket API. However, the Berkeley socket API predominates convincingly in popularity and in the number of implementations.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#Berkeley_socket_interface"><span class="tocnumber">1</span> <span class="toctext">Berkeley socket interface</span></a></li>
<li class="toclevel-1"><a href="#The_header_files"><span class="tocnumber">2</span> <span class="toctext">The header files</span></a></li>
<li class="toclevel-1"><a href="#TCP"><span class="tocnumber">3</span> <span class="toctext">TCP</span></a>
<ul>
<li class="toclevel-2"><a href="#Server"><span class="tocnumber">3.1</span> <span class="toctext">Server</span></a></li>
<li class="toclevel-2"><a href="#Client"><span class="tocnumber">3.2</span> <span class="toctext">Client</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#UDP"><span class="tocnumber">4</span> <span class="toctext">UDP</span></a>
<ul>
<li class="toclevel-2"><a href="#Server_2"><span class="tocnumber">4.1</span> <span class="toctext">Server</span></a></li>
<li class="toclevel-2"><a href="#Client_2"><span class="tocnumber">4.2</span> <span class="toctext">Client</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Functions"><span class="tocnumber">5</span> <span class="toctext">Functions</span></a>
<ul>
<li class="toclevel-2"><a href="#socket.28.29"><span class="tocnumber">5.1</span> <span class="toctext">socket()</span></a>
<ul>
<li class="toclevel-3"><a href="#Prototype:"><span class="tocnumber">5.1.1</span> <span class="toctext">Prototype:</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#gethostbyname.28.29_and_gethostbyaddr.28.29"><span class="tocnumber">5.2</span> <span class="toctext">gethostbyname() and gethostbyaddr()</span></a>
<ul>
<li class="toclevel-3"><a href="#Prototypes:"><span class="tocnumber">5.2.1</span> <span class="toctext">Prototypes:</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#connect.28.29"><span class="tocnumber">5.3</span> <span class="toctext">connect()</span></a>
<ul>
<li class="toclevel-3"><a href="#Prototype:_2"><span class="tocnumber">5.3.1</span> <span class="toctext">Prototype:</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#bind.28.29"><span class="tocnumber">5.4</span> <span class="toctext">bind()</span></a>
<ul>
<li class="toclevel-3"><a href="#Prototype:_3"><span class="tocnumber">5.4.1</span> <span class="toctext">Prototype:</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#listen.28.29"><span class="tocnumber">5.5</span> <span class="toctext">listen()</span></a>
<ul>
<li class="toclevel-3"><a href="#Prototype:_4"><span class="tocnumber">5.5.1</span> <span class="toctext">Prototype:</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#accept.28.29"><span class="tocnumber">5.6</span> <span class="toctext">accept()</span></a>
<ul>
<li class="toclevel-3"><a href="#Prototype:_5"><span class="tocnumber">5.6.1</span> <span class="toctext">Prototype:</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Blocking_vs._nonblocking"><span class="tocnumber">6</span> <span class="toctext">Blocking vs. nonblocking</span></a></li>
<li class="toclevel-1"><a href="#Cleaning_up"><span class="tocnumber">7</span> <span class="toctext">Cleaning up</span></a></li>
<li class="toclevel-1"><a href="#See_also"><span class="tocnumber">8</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1"><a href="#References"><span class="tocnumber">9</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1"><a href="#External_links"><span class="tocnumber">10</span> <span class="toctext">External links</span></a></li>
</ul>
</td>
</tr>
</table>
<p><script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script><a name="Berkeley_socket_interface" id="Berkeley_socket_interface"></a></p>
<h2><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Berkeley socket interface">edit</a>]</span> <span class="mw-headline">Berkeley socket interface</span></h2>
<p>The <b>Berkeley socket interface</b>, an <a href="../../../a/p/p/Application_programming_interface.html" title="Application programming interface">API</a>, allows communications between <a href="../../../s/e/r/Server_%28computing%29.html" title="Server (computing)">hosts</a> or between processes on one computer, using the concept of an <i><a href="../../../i/n/t/Internet_socket.html" title="Internet socket">internet socket</a></i>. It can work with many different <a href="../../../i/n/p/Input_output_43c4.html" title="Input/output">I/O</a> devices and <a href="../../../d/e/v/Device_driver.html" title="Device driver">drivers</a>, although support for these depends on the <a href="../../../o/p/e/Operating_system.html" title="Operating system">operating-system</a> implementation. This interface implementation is implicit for <a href="../../../i/n/t/Internet_protocol_suite.html" title="Internet protocol suite">TCP/IP</a>, and it is therefore one of the fundamental technologies underlying the <a href="../../../i/n/t/Internet.html" title="Internet">Internet</a>. It was first developed at the <a href="../../../u/n/i/University_of_California%2C_Berkeley_70e2.html" title="University of California, Berkeley">University of California, Berkeley</a> for use on Unix systems. All modern operating systems now have some implementation of the Berkeley socket interface, as it has become the standard interface for connecting to the Internet.</p>
<p>Programmers can make the socket interfaces accessible at three different levels, most powerfully and fundamentally at the <a href="../../../r/a/w/Raw_socket.html" title="Raw socket">RAW socket</a> level. Very few applications need the degree of control over outgoing communications that this provides, so RAW sockets support was intended to be available only on computers used for developing Internet-related technologies. In recent years, most operating systems have implemented support for it anyway, including <a href="../../../m/i/c/Microsoft_Windows_48e2.html" title="Microsoft Windows">Windows XP</a>.</p>
<p><a name="The_header_files" id="The_header_files"></a></p>
<h2><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: The header files">edit</a>]</span> <span class="mw-headline">The header files</span></h2>
<p>The Berkeley socket development library has many associated <code>header files</code>. They include:</p>
<dl>
<dd>
<dl>
<dt><code>&lt;sys/socket.h&gt;</code></dt>
<dd>Core BSD socket functions and data structures.</dd>
<dt><code>&lt;netinet/in.h&gt;</code></dt>
<dd>AF_INET and AF_INET6 address families. Widely used on the Internet, these include IP addresses and TCP and UDP port numbers.</dd>
<dt><code>&lt;sys/un.h&gt;</code></dt>
<dd>AF_UNIX address family. Used for local communication between programs running on the same computer. Not used on networks.</dd>
<dt><code>&lt;arpa/inet.h&gt;</code></dt>
<dd>Functions for manipulating numeric IP addresses.</dd>
<dt><code>&lt;netdb.h&gt;</code></dt>
<dd>Functions for translating protocol names and host names into numeric addresses. Searches local data as well as DNS.</dd>
</dl>
</dd>
</dl>
<p><a name="TCP" id="TCP"></a></p>
<h2><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: TCP">edit</a>]</span> <span class="mw-headline">TCP</span></h2>
<p><a href="../../../t/r/a/Transmission_Control_Protocol_c142.html" title="Transmission Control Protocol">TCP</a> provides the concept of a connection. A process creates a TCP socket by calling the <code>socket()</code> function with the parameters <code><a href="../../../p/f/_/PF_INET_c79a.html" title="PF INET">PF INET</a></code> or <code>PF_INET6</code> and <code>SOCK_STREAM</code> (<a href="../../../s/t/r/Stream_Sockets_bf2f.html" title="Stream Sockets">Stream Sockets</a>).</p>
<p><a name="Server" id="Server"></a></p>
<h3><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Server">edit</a>]</span> <span class="mw-headline">Server</span></h3>
<p>Setting up a simple TCP server involves the following steps:</p>
<ul>
<li>Creating a TCP socket, with a call to <code>socket()</code>.</li>
<li>Binding the socket to the listen port, with a call to <code>bind()</code>. Before calling <code>bind()</code>, a programmer must declare a <code>sockaddr_in</code> structure, clear it (with <code>bzero()</code> or <code>memset()</code>), and the <code>sin_family</code> (<code>AF_INET</code> or <code>AF_INET6</code>), and fill its <code>sin_port</code> (the listening port, in <a href="../../../n/e/t/Network_byte_order.html" title="Network byte order">network byte order</a>) fields. Converting a <code>short int</code> to network byte order can be done by calling the function <code>htons()</code> (host to network short).</li>
<li>Preparing the socket to listen for connections (making it a listening socket), with a call to <code>listen()</code>.</li>
<li>Accepting incoming connections, via a call to <code>accept()</code>. This blocks until an incoming connection is received, and then returns a socket descriptor for the accepted connection. The initial descriptor remains a listening descriptor, and <code>accept()</code> can be called again at any time with this socket, until it is closed.</li>
<li>Communicating with the remote host, which can be done through <code>send()</code> and <code>recv()</code> or <code>write()</code> and <code>read()</code>.</li>
<li>Eventually closing each socket that was opened, once it is no longer needed, using <code>close()</code>. Note that if there were any calls to <code>fork()</code>, each process must close the sockets it knew about (the kernel keeps track of how many processes have a descriptor open), and two processes should not use the same socket at once.</li>
</ul>
<p><a name="Client" id="Client"></a></p>
<h3><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Client">edit</a>]</span> <span class="mw-headline">Client</span></h3>
<p>Setting up a TCP client involves the following steps:</p>
<ul>
<li>Creating a TCP socket, with a call to <code>socket()</code>.</li>
<li>Connecting to the server with the use of <code>connect()</code>, passing a <code>sockaddr_in</code> structure with the <code>sin_family</code> set to <code><a href="../../../a/f/_/AF_INET_5bc6.html" title="AF INET">AF INET</a></code> or <code>AF_INET6</code>, <code>sin_port</code> set to the port the endpoint is listening (in network byte order), and <code>sin_addr</code> set to the IPv4 or IPv6 address of the listening server (also in network byte order.)</li>
<li>Communicating with the server by using <code>send()</code> and <code>recv()</code> or <code>write()</code> and <code>read()</code>.</li>
<li>Terminating the connection and cleaning up with a call to <code>close()</code>. Again, if there were any calls to <code>fork()</code>, each process must <code>close()</code> the socket.</li>
</ul>
<p><a name="UDP" id="UDP"></a></p>
<h2><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: UDP">edit</a>]</span> <span class="mw-headline">UDP</span></h2>
<p><a href="../../../u/s/e/User_Datagram_Protocol_d466.html" title="User Datagram Protocol">UDP</a> consists of a <a href="../../../c/o/n/Connectionless.html" title="Connectionless">connectionless</a> protocol with no guarantee of delivery. UDP packets may arrive out of order, become duplicated and arrive more than once, or even not arrive at all. Due to the minimal guarantees involved, UDP has considerably less overhead than TCP. Being connectionless means that there is no concept of a stream or connection between two hosts, instead, data arrives in datagrams (<a href="../../../d/a/t/Datagram_Sockets_f0ea.html" title="Datagram Sockets">Datagram Sockets</a>).</p>
<p>UDP address space, the space of UDP port numbers (in ISO terminology, the TSAPs), is completely disjoint from that of TCP ports.</p>
<p><a name="Server_2" id="Server_2"></a></p>
<h3><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Server">edit</a>]</span> <span class="mw-headline">Server</span></h3>
<p>Code may set up a UDP server on port 7654 as follows:</p>
<pre>
sock = socket(PF_INET,SOCK_DGRAM,IPPROTO_IP); 

sa.sin_addr.s_addr = INADDR_ANY;
sa.sin_port = htons(7654);

bound = bind(sock,(struct sockaddr *)&amp;sa, sizeof(struct sockaddr));
if (bound &lt; 0)
    fprintf(stderr, "bind(): %s\n",strerror(errno));
</pre>
<p><tt>bind()</tt> binds the socket to an address/port pair.</p>
<pre>
while (1) {
    printf ("recv test....\n");
    recsize = recvfrom(sock, (void *)Hz, 100, 0, (struct sockaddr *)&amp;sa, fromlen);
    printf ("recsize: %d\n ",recsize);
    if (recsize &lt; 0)
        fprintf(stderr, "%s\n", strerror(errno));
    sleep(1);
    printf("datagram: %s\n",Hz);
}
</pre>
<p>This infinite loop receives any UDP datagrams to port 7654 using <tt>recvfrom()</tt>. It uses the parameters:</p>
<ul>
<li>socket</li>
<li>pointer to buffer for data</li>
<li>size of buffer</li>
<li>flags (same as in read or other receive socket function)</li>
<li>address struct of sending peer</li>
<li>length of address struct of sending peer.</li>
</ul>
<p><a name="Client_2" id="Client_2"></a></p>
<h3><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Client">edit</a>]</span> <span class="mw-headline">Client</span></h3>
<p>A simple demo to send a UDP packet containing "Hello World!" to address 127.0.0.1, port 7654 might look like this:</p>
<pre>
#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;unistd.h&gt;//for close() for socket

int main(int argc, char *argv[])
{
  int sock;
  struct sockaddr_in sa;
  int bytes_sent, buffer_length;
  char buffer[200];
  
  sprintf(buffer, "Hello World!");
  buffer_length = strlen(buffer) + 1;
  
  sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_IP);
  if(-1 == sock)//if socket failed to initialize, exit
  {
     printf("Error Creating Socket");
     return 0;
  }
  
  sa.sin_family = AF_INET;
  sa.sin_addr.s_addr = htonl(0x7F000001);
  sa.sin_port = htons(7654);
  
  bytes_sent = sendto(sock, buffer, buffer_length, 0,(struct sockaddr*) &amp;sa, sizeof(struct sockaddr_in) );
  if(bytes_sent &lt; 0)
    printf("Error sending packet: %s\n", strerror(errno) );
  
  close(sock);//close the socket
  return 0;
}
</pre>
<p>In this code, <code>buffer</code> provides a pointer to the data to send, and <code>buffer_length</code> specifies the size of the buffer contents.</p>
<p><a name="Functions" id="Functions"></a></p>
<h2><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Functions">edit</a>]</span> <span class="mw-headline">Functions</span></h2>
<p><a name="socket.28.29" id="socket.28.29"></a></p>
<h3><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: socket()">edit</a>]</span> <span class="mw-headline">socket()</span></h3>
<p><code>socket()</code> creates an endpoint for communication and returns a <a href="../../../f/i/l/File_Descriptor_f637.html" title="File Descriptor">descriptor</a>. <code>socket()</code> takes three arguments:</p>
<ul>
<li><var>domain</var>, which specifies the protocol family of the created socket. For example:
<ul>
<li><code>PF_INET</code> for network protocol <a href="../../../i/p/v/IPv4_42a9.html" title="IPv4">IPv4</a> or</li>
<li><code>PF_INET6</code> for <a href="../../../i/p/v/IPv6_fdb7.html" title="IPv6">IPv6</a>.</li>
</ul>
</li>
<li><var>type</var>, one of:
<ul>
<li><code>SOCK_STREAM</code> (reliable stream-oriented service or <a href="../../../s/t/r/Stream_Sockets_bf2f.html" title="Stream Sockets">Stream Sockets</a>)</li>
<li><code>SOCK_DGRAM</code> (datagram service or <a href="../../../d/a/t/Datagram_Sockets_f0ea.html" title="Datagram Sockets">Datagram Sockets</a>)</li>
<li><code>SOCK_SEQPACKET</code> (reliable sequenced packet service), or</li>
<li><code>SOCK_RAW</code> (raw protocols atop the network layer).</li>
</ul>
</li>
<li><var>protocol</var>, usually set to <code>IPPROTO_IP</code>, which is defined as 0, to represent the default <a href="../../../t/r/a/Transport_protocol.html" title="Transport protocol">transport protocol</a> for the specified <var>domain</var> and <var>type</var> values (<a href="../../../t/r/a/Transmission_Control_Protocol_c142.html" title="Transmission Control Protocol">TCP</a> for <code>PF_INET</code> or <code>PF_INET6</code> and <code>SOCK_STREAM</code>, <a href="../../../u/s/e/User_Datagram_Protocol_d466.html" title="User Datagram Protocol">UDP</a> for those <code>PF_</code> values and <code>SOCK_DGRAM</code>), but which can also explicitly specify a protocol. These protocols are specified in &lt;netinet/in.h&gt;.</li>
</ul>
<p>The function returns -1 if an error occurred. Otherwise, it returns an integer representing the newly-assigned descriptor.</p>
<p><a name="Prototype:" id="Prototype:"></a></p>
<h4><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Prototype:">edit</a>]</span> <span class="mw-headline">Prototype:</span></h4>
<p><code>#include &lt;sys/types.h&gt;</code></p>
<p><code>#include &lt;sys/socket.h&gt;</code></p>
<p><code>int socket(int domain, int type, int protocol);</code></p>
<p><a name="gethostbyname.28.29_and_gethostbyaddr.28.29" id="gethostbyname.28.29_and_gethostbyaddr.28.29"></a></p>
<h3><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: gethostbyname() and gethostbyaddr()">edit</a>]</span> <span class="mw-headline">gethostbyname() and gethostbyaddr()</span></h3>
<p>The <code>gethostbyname()</code> and <code>gethostbyaddr()</code> functions each return a pointer to an object of type <var>struct hostent</var>, which describes an internet host referenced by name or by address, respectively. This structure contains either the information obtained from a name server (ex: named), or broken-out fields from a line in /etc/hosts. If the local name server is not running these routines do a lookup in /etc/hosts. The functions take the following arguments:</p>
<ul>
<li><var>name</var>, which specifies the name of the host. For example: www.wikipedia.org</li>
<li><var>addr</var>, which specifies a pointer to a <var>struct in_addr</var> containing the address of the host.</li>
<li><var>len</var>, which specifies the length, in bytes, of <var>addr</var>.</li>
<li><var>type</var>, which specifies the domain type of the host address. For example: AF_INET</li>
</ul>
<p>The functions return a NULL pointer in case of error, in which case the external integer <var>h_errno</var> may be checked so see whether this is a temporary failure or an invalid or unknown host. Otherwise a valid <var>struct hostent *</var> is returned.</p>
<p><a name="Prototypes:" id="Prototypes:"></a></p>
<h4><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Prototypes:">edit</a>]</span> <span class="mw-headline">Prototypes:</span></h4>
<p><code>struct hostent *gethostbyname(const char *name);</code></p>
<p><code>struct hostent *gethostbyaddr(const void *addr, int len, int type);</code></p>
<p><a name="connect.28.29" id="connect.28.29"></a></p>
<h3><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: connect()">edit</a>]</span> <span class="mw-headline">connect()</span></h3>
<p><code>connect()</code> It returns an integer representing the error code: 0 represents success, while -1 represents an error.</p>
<p>Certain types of sockets are <i>connectionless</i>, most commonly user datagram protocol sockets. For these sockets, connect takes on a special meaning: the default target for sending and receiving data gets set to the given address, allowing the use of functions such as send() and recv() on connectionless sockets.</p>
<p><a name="Prototype:_2" id="Prototype:_2"></a></p>
<h4><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Prototype:">edit</a>]</span> <span class="mw-headline">Prototype:</span></h4>
<p><code>#include &lt;sys/types.h&gt;</code></p>
<p><code>#include &lt;sys/socket.h&gt;</code></p>
<p><code>int connect(int sockfd, const struct sockaddr *serv_addr, socklen_t addrlen);</code></p>
<p><a name="bind.28.29" id="bind.28.29"></a></p>
<h3><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: bind()">edit</a>]</span> <span class="mw-headline">bind()</span></h3>
<p><code>bind()</code> assigns a socket an address. When a socket is created using <code>socket()</code>, it is given an address family, but not assigned an address. Before a socket may accept incoming connections, it must be bound. <code>bind()</code> takes three arguments:</p>
<ul>
<li><code>sockfd</code>, a descriptor representing the socket to perform the bind on</li>
<li><code>my_addr</code>, a pointer to a <code>sockaddr</code> structure representing the address to bind to.</li>
<li><code>addrlen</code>, a <code>socklen_t</code> field representing the length of the <code>sockaddr</code> structure.</li>
</ul>
<p>It returns 0 on success and -1 if an error occurs.</p>
<p><a name="Prototype:_3" id="Prototype:_3"></a></p>
<h4><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Prototype:">edit</a>]</span> <span class="mw-headline">Prototype:</span></h4>
<p><code>#include &lt;sys/types.h&gt;</code></p>
<p><code>#include &lt;sys/socket.h&gt;</code></p>
<p><code>int bind(int sockfd, struct sockaddr *my_addr, socklen_t addrlen);</code></p>
<p><a name="listen.28.29" id="listen.28.29"></a></p>
<h3><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: listen()">edit</a>]</span> <span class="mw-headline">listen()</span></h3>
<p><code>listen()</code> prepares a bound socket to accept incoming connections. This function is only applicable to the <code>SOCK_STREAM</code> and <code>SOCK_SEQPACKET</code> socket types. It takes two arguments:</p>
<ul>
<li><code>sockfd</code>, a valid socket descriptor.</li>
<li><code>backlog</code>, an integer representing the number of pending connections that can be queued up at any one time. The operating system usually places a cap on this value.</li>
</ul>
<p>Once a connection is accepted, it is dequeued. On success, 0 is returned. If an error occurs, -1 is returned.</p>
<p><a name="Prototype:_4" id="Prototype:_4"></a></p>
<h4><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Prototype:">edit</a>]</span> <span class="mw-headline">Prototype:</span></h4>
<p><code>#include &lt;sys/socket.h&gt;</code></p>
<p><code>int listen(int sockfd, int backlog);</code></p>
<p><a name="accept.28.29" id="accept.28.29"></a></p>
<h3><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: accept()">edit</a>]</span> <span class="mw-headline">accept()</span></h3>
<p><code>accept()</code> is used to accept a connection request from a remote host. It takes the following arguments:</p>
<ul>
<li><code>sockfd</code>, the descriptor of the listening socket to accept the connection from.</li>
<li><code>cliaddr</code>, a pointer to the sockaddr structure that <code>accept()</code> should put the client's address information into.</li>
<li><code>addrlen</code>, a pointer to the <code>socklen_t</code> integer that will indicate to <code>accept()</code> how large the sockaddr structure pointed to by <code>cliaddr</code> is. When <code>accept()</code> returns, the <code>socklen_t</code> integer then indicates how many bytes of the <code>cliaddr</code> structure were actually used.</li>
</ul>
<p>The function returns a socket corresponding to the accepted connection, or -1 if an error occurs.</p>
<p><a name="Prototype:_5" id="Prototype:_5"></a></p>
<h4><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Prototype:">edit</a>]</span> <span class="mw-headline">Prototype:</span></h4>
<p><code>#include &lt;sys/types.h&gt;</code></p>
<p><code>#include &lt;sys/socket.h&gt;</code></p>
<p><code>int accept(int sockfd, struct sockaddr *cliaddr, socklen_t *addrlen);</code></p>
<p><a name="Blocking_vs._nonblocking" id="Blocking_vs._nonblocking"></a></p>
<h2><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Blocking vs. nonblocking">edit</a>]</span> <span class="mw-headline">Blocking <i>vs.</i> nonblocking</span></h2>
<p>Berkeley sockets can operate in one of two modes: blocking or non-blocking. A <i>blocking</i> socket will not "return" until it has sent (or received) all the data specified for the operation. This may cause problems if a socket continues to listen: a program may hang as the socket waits for data that may never arrive.</p>
<p>A socket is typically set to blocking or nonblocking mode using the <code>fcntl()</code> or <code><a href="../../../i/o/c/Ioctl.html" title="Ioctl">ioctl</a>()</code> functions.</p>
<p><a name="Cleaning_up" id="Cleaning_up"></a></p>
<h2><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: Cleaning up">edit</a>]</span> <span class="mw-headline">Cleaning up</span></h2>
<p>The system will not release the resources allocated by the <code>socket()</code> call until a <code>close()</code> call occurs. This is especially important if the <code>connect()</code> call fails and may be retried. Each call to <code>socket()</code> must have a matching call to <code>close()</code> in all possible execution paths. Include &lt;unistd.h&gt; for the close function.</p>
<p><a name="See_also" id="See_also"></a></p>
<h2><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: See also">edit</a>]</span> <span class="mw-headline">See also</span></h2>
<ul>
<li><a href="../../../c/o/m/Computer_network.html" title="Computer network">Computer network</a></li>
<li><a href="../../../i/n/t/Internet_socket.html" title="Internet socket">Internet socket</a></li>
<li><a href="../../../u/n/i/Unix_domain_socket.html" title="Unix domain socket">Unix domain socket</a></li>
<li><a href="../../../w/i/n/Winsock.html" title="Winsock">Winsock</a>, the Berkeley sockets-based <a href="../../../a/p/p/Application_programming_interface.html" title="Application programming interface">application programming interface</a> for networking on <a href="../../../m/i/c/Microsoft_Windows_48e2.html" title="Microsoft Windows">Microsoft Windows</a></li>
</ul>
<p><a name="References" id="References"></a></p>
<h2><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: References">edit</a>]</span> <span class="mw-headline">References</span></h2>
<p>The "de jure" standard definition of the Sockets interface is contained in the POSIX standard, known as:</p>
<ul>
<li>IEEE Std. 1003.1-2001 Standard for Information Technology -- Portable Operating System Interface (POSIX).</li>
<li>Open Group Technical Standard: Base Specifications, Issue 6, December 2001.</li>
<li>ISO/IEC 9945:2002</li>
</ul>
<p>Information about this standard and ongoing work on it is available from <a href="http://www.opengroup.org/austin/" class="external text" title="http://www.opengroup.org/austin/" rel="nofollow">the Austin website</a>.</p>
<p>The IPv6 extensions to the base socket API are documented in <a href="http://tools.ietf.org/html/rfc3493" class="external" title="http://tools.ietf.org/html/rfc3493">RFC 3493</a> and <a href="http://tools.ietf.org/html/rfc3542" class="external" title="http://tools.ietf.org/html/rfc3542">RFC 3542</a>.</p>
<p><a name="External_links" id="External_links"></a></p>
<h2><span class="editsection">[<a href="../../../b/e/r/Berkeley_sockets.html" title="Edit section: External links">edit</a>]</span> <span class="mw-headline">External links</span></h2>
<ul>
<li><a href="http://foldoc.doc.ic.ac.uk/foldoc/foldoc.cgi?Unix+manual+pages" class="external text" title="http://foldoc.doc.ic.ac.uk/foldoc/foldoc.cgi?Unix+manual+pages" rel="nofollow">Unix Manual Pages:</a>
<ul>
<li><a href="http://www.die.net/doc/linux/man/man2/accept.2.html" class="external text" title="http://www.die.net/doc/linux/man/man2/accept.2.html" rel="nofollow">accept(2)</a></li>
<li><a href="http://www.die.net/doc/linux/man/man2/connect.2.html" class="external text" title="http://www.die.net/doc/linux/man/man2/connect.2.html" rel="nofollow">connect(2)</a></li>
</ul>
</li>
<li><a href="http://beej.us/guide/bgnet/" class="external text" title="http://beej.us/guide/bgnet/" rel="nofollow">Beej's Guide to Network Programming</a></li>
<li><a href="http://www.developerweb.net/forum/index.php" class="external text" title="http://www.developerweb.net/forum/index.php" rel="nofollow">UnixSocket FAQ</a></li>
<li><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winsock/winsock/porting_socket_applications_to_winsock.asp" class="external text" title="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winsock/winsock/porting_socket_applications_to_winsock.asp" rel="nofollow">Porting Berkley Socket programs to Winsock</a></li>
</ul>
<p><span class="boilerplate" id="foldoc"><i>This article was originally based on material from the <a href="../../../f/r/e/Free_On-line_Dictionary_of_Computing_81c7.html" title="Free On-line Dictionary of Computing">Free On-line Dictionary of Computing</a>, which is <a href="../../../f/o/l/Wikipedia%7EFoldoc_license_9ee2.html" title="Wikipedia:Foldoc license">licensed</a> under the <a href="../../../g/n/u/GNU_Free_Documentation_License_9d01.html" title="GNU Free Documentation License">GFDL</a>.</i></span></p>

<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../b/e/r/Berkeley_sockets.html">http://en.wikipedia.org../../../b/e/r/Berkeley_sockets.html</a>"</div>
	    <div id="catlinks"><p class='catlinks'><a href="../../../c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Categories</a>: <span dir='ltr'><a href="../../../f/o/l/Category%7EFOLDOC_sourced_articles_b3fe.html" title="Category:FOLDOC sourced articles">FOLDOC sourced articles</a></span> | <span dir='ltr'><a href="../../../n/e/t/Category%7ENetwork-related_software_b81c.html" title="Category:Network-related software">Network-related software</a></span> | <span dir='ltr'><a href="../../../a/p/p/Category%7EApplication_programming_interfaces_5a9b.html" title="Category:Application programming interfaces">Application programming interfaces</a></span> | <span dir='ltr'><a href="../../../i/n/t/Category%7EInter-process_communication_4f8f.html" title="Category:Inter-process communication">Inter-process communication</a></span></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main"
	       class="selected"	       ><a href="../../../b/e/r/Berkeley_sockets.html">Article</a></li><li id="ca-talk"
	       	       ><a href="../../../b/e/r/Talk%7EBerkeley_sockets_f6c5.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/Berkeley_sockets">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	<div id="p-lang" class="portlet">
	  <h5>In other languages</h5>
	  <div class="pBody">
	    <ul>
	      	      <li>
	      <a href="../../../../de/s/o/c/Socket.html">Deutsch</a>
	      </li>
	      	      <li>
	      <a href="../../../../es/s/o/c/Socket.html">Español</a>
	      </li>
	      	      <li>
	      <a href="../../../../fr/b/e/r/Berkeley_sockets.html">Français</a>
	      </li>
	      	      <li>
	      <a href="../../../../ru/%D1%81/%D0%BE/%D0%BA/%D0%A1%D0%BE%D0%BA%D0%B5%D1%82_%28%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%BD%D1%8B%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%29.html">Русский</a>
	      </li>
	      	    </ul>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 01:42, 1 April 2007 by Wikipedia user <a href="../../../r/o/b/User%7ERoboto_de_Ajvol_7755.html" title="User:Roboto de Ajvol">Roboto de Ajvol</a>. Based on work by Wikipedia user(s) Frank Lofaro Jr., Rrelf, <a href="../../../n/e/i/User%7ENeilc_4027.html" title="User:Neilc">Neilc</a>, <a href="../../../v/i/n/User%7EVinu_Padmanabhan_46b6.html" title="User:Vinu Padmanabhan">Vinu Padmanabhan</a>, <a href="../../../g/w/e/User%7EGwern_2189.html" title="User:Gwern">Gwern</a>, Mkoko483, <a href="../../../r/e/e/User%7EReedy_Boy_3c7f.html" title="User:Reedy Boy">Reedy Boy</a>, <a href="../../../a/l/v/User%7EAlvestrand_d574.html" title="User:Alvestrand">Alvestrand</a>, <a href="../../../j/g/r/User%7EJgrahn_4a4a.html" title="User:Jgrahn">Jgrahn</a>, <a href="../../../r/y/a/User%7ERyanrs_66bb.html" title="User:Ryanrs">Ryanrs</a>, 4donis, Infiwise, <a href="../../../r/e/b/User%7ERebelRobot_94c7.html" title="User:RebelRobot">RebelRobot</a>, <a href="../../../m/i/c/User%7EMichaelMcGuffin_220e.html" title="User:MichaelMcGuffin">MichaelMcGuffin</a>, <a href="../../../p/e/d/User%7EPedant17_032b.html" title="User:Pedant17">Pedant17</a>, <a href="../../../g/u/y/User%7EGuy_Harris_fa37.html" title="User:Guy Harris">Guy Harris</a>, Agueijo, Rdavl, Rjmooney, <a href="../../../q/w/e/User%7EQwertyus_c4c3.html" title="User:Qwertyus">Qwertyus</a>, <a href="../../../h/a/r/User%7EHarryboyles_b16b.html" title="User:Harryboyles">Harryboyles</a>, <a href="../../../j/o/n/User%7EJonHarder_ef53.html" title="User:JonHarder">JonHarder</a>, <a href="../../../m/i/k/User%7EMikeblas_16be.html" title="User:Mikeblas">Mikeblas</a>, <a href="../../../j/l/e/User%7EJleedev_48f1.html" title="User:Jleedev">Jleedev</a>, <a href="../../../g/a/r/User%7EGardar_Rurak_890e.html" title="User:Gardar Rurak">Gardar Rurak</a>, James Foster, <a href="../../../m/a/x/User%7EMaxDZ8_259f.html" title="User:MaxDZ8">MaxDZ8</a>, <a href="../../../j/s/m/User%7EJsmethers_855e.html" title="User:Jsmethers">Jsmethers</a>, <a href="../../../l/u/p/User%7ELupin_68a5.html" title="User:Lupin">Lupin</a>, <a href="../../../n/v/i/User%7ENvineeth_4547.html" title="User:Nvineeth">Nvineeth</a>, <a href="../../../b/l/u/User%7EBluebot_e595.html" title="User:Bluebot">Bluebot</a>, SunAdmin111, <a href="../../../f/p/g/User%7EFpga_1a64.html" title="User:Fpga">Fpga</a>, <a href="../../../n/i/c/User%7ENickj_5f86.html" title="User:Nickj">Nickj</a>, <a href="../../../t/a/r/User%7ETarret_c08f.html" title="User:Tarret">Tarret</a>, <a href="../../../h/e/l/User%7EHelix84_a51c.html" title="User:Helix84">Helix84</a>, <a href="../../../t/h/e/User%7EThe_Anome_61a9.html" title="User:The Anome">The Anome</a>, <a href="../../../c/o/n/User%7EConan_ce7d.html" title="User:Conan">Conan</a>, <a href="../../../m/e/t/User%7EMetasquares_f66f.html" title="User:Metasquares">Metasquares</a>, <a href="../../../t/h/o/User%7EThomas_Willerich_0dc1.html" title="User:Thomas Willerich">Thomas Willerich</a>, <a href="../../../s/i/e/User%7ESietse_Snel_e2d7.html" title="User:Sietse Snel">Sietse Snel</a>, <a href="../../../c/a/n/User%7ECanisRufus_0875.html" title="User:CanisRufus">CanisRufus</a>, <a href="../../../r/e/d/User%7ERedWolf_0f32.html" title="User:RedWolf">RedWolf</a>, <a href="../../../a/n/g/User%7EAngela_56ea.html" title="User:Angela">Angela</a>, <a href="../../../c/y/r/User%7ECyrius_3685.html" title="User:Cyrius">Cyrius</a>, <a href="../../../j/i/a/User%7EJiang_5faa.html" title="User:Jiang">Jiang</a>, <a href="../../../r/h/o/User%7ERholton_b2db.html" title="User:Rholton">Rholton</a>, Ujuhh, <a href="../../../e/c/l/User%7EEclecticology_b6d7.html" title="User:Eclecticology">Eclecticology</a>, <a href="../../../d/a/m/User%7EDamian_Yerrick_2a18.html" title="User:Damian Yerrick">Damian Yerrick</a> and <a href="../../../e/l/l/User%7EEllmist_6655.html" title="User:Ellmist">Ellmist</a> and Anonymous user(s) of Wikipedia.</li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>

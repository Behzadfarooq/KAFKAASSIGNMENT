<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="User:Blair Bonnett/monobook.js,Blocking policy,Bypass your cache,Help desk" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>User:Blair Bonnett/monobook.js - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-2">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">User:Blair Bonnett/monobook.js</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"><span class="subpages">&lt; <a href="../../../b/l/a/User%7EBlair_Bonnett_99ec.html" title="User:Blair Bonnett">User:Blair Bonnett</a></span></div>
	    	    <div class="usermessage">You have <a href="../../../1/2/7/User_talk%7E127.0.0.1.html" title="User talk:127.0.0.1">new messages</a> (<a href="../../../1/2/7/User_talk%7E127.0.0.1.html" title="User talk:127.0.0.1">last change</a>).</div>	    <!-- start content -->
	    <p><span id="clearyourcache"><b>Note:</b> After saving, you have to <a href="../../../b/y/p/Wikipedia%7EBypass_your_cache_1dae.html" title="Wikipedia:Bypass your cache">bypass your browser's cache</a> to see the changes. <b>Firefox/Mozilla/Safari:</b> hold down <i>Shift</i> while clicking <i>Reload</i> (or press <i>Ctrl-Shift-R</i>), <b>Internet Explorer:</b> press <i>Ctrl-F5</i>, <b>Opera/Konqueror:</b> press <i>F5</i>. 
</p>
<div style="color:darkred;background-color:#EEEEEE;border: darkred 2px solid;padding:5px;" id="jswarning"><div style="clear: both;color:darkred;"></div><b><div style="display:block;">If a message on your talk page led you here, please be wary of who left it.  The code below could contain malicious content capable of compromising your account; if your account appears to be compromised, it will be <a href="../../../b/l/o/Wikipedia%7EBlocking_policy_2eb0.html" title="Wikipedia:Blocking policy">blocked</a>.  If you are unsure of whether the code is safe, you can ask at the <a href="../../../h/e/l/Wikipedia%7EHelp_desk_5342.html" title="Wikipedia:Help desk">help desk</a>.</b></div></div></span>
<pre>/*

AJAX Rollbacks

A rollback script, designed to be placed in your user javascript page (User:name/monobook.js if you
use the monobook skin). When you navigate to a diff page where the later of the two versions is the
current version of the article, you will be given a form which allows you to roll back the article
to an earlier version. You also choose which warning template should be added to the vandals talk
page.

This version only works on Mozilla Firefox.

Disclaimer: By using this script, you accept that the result of any rollbacks is your responsibility.
While this is bug-free to the best of my knowledge, my knowledge may be deficient or you may utilise
the script in a manner I haven't predicted. As a result, it is up to you to check that the results
of using this script are what you intended.

Version 0.1.0 (2 January 2007)
(c) Blair Bonnett

*/

// Global variables
var XMLHTTP, arbBox, arbTitle, arbContent, arbVandal, arbOldEditor, arbBackTo, arbTemplate, arbPostParams;

// If this is a diff page set functions to run when page is loaded
if(location.href.indexOf('diff') != -1){
	if (window.addEventListener) window.addEventListener(&quot;load&quot;, arbPageLoad, false);
	else if (window.attachEvent) window.attachEvent(&quot;onload&quot;, arbPageLoad);
}

function arbPageLoad(){
    // Create and place our &lt;div&gt; after the contentSub element. contentSub is the one that says:
    // (Difference between revisions)
    arbBox = document.createElement(&quot;div&quot;);
    var bodyContent = document.getElementById(&quot;bodyContent&quot;);
    var contentSub = document.getElementById(&quot;contentSub&quot;);
    if(arbBox &amp;&amp; bodyContent &amp;&amp; contentSub &amp;&amp; contentSub.nextSibling) bodyContent.insertBefore(arbBox, contentSub.nextSibling);
    else return;

    // Create the title
    arbTitle = document.createElement(&quot;div&quot;);
    arbTitle.className = &quot;arbTitle&quot;;
    arbTitle.innerHTML = &quot;AJAX Rollbacks&quot;;
    arbBox.appendChild(arbTitle);

    // Create the content
    arbContent = document.createElement(&quot;div&quot;);
    arbContent.className = &quot;arbContent&quot;;
    arbBox.appendChild(arbContent);

    // Style the whole box
    arbBox.className = &quot;arbBox&quot;;

    // First, check that the revision shown is the current one
    var td = bodyContent.getElementsByTagName(&quot;td&quot;);
    for(i = 0; i &lt; td.length; i++){
        if(td[i].className == &quot;diff-ntitle&quot;){
            if(td[i].getElementsByTagName(&quot;a&quot;)[0].href.indexOf(&quot;oldid&quot;) != -1){
                arbContent.innerHTML = &quot;This is not the current revision.&quot;;
                return;
            }
        }
    }

    // Attempt to create an XMLHTTP object
    if(window.XMLHttpRequest){
        XMLHTTP = new XMLHttpRequest();
    }
    else if(window.ActiveXObject){
        try{
            XMLHTTP = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);
        }
        catch(e){
            try{
                XMLHTTP = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
            }
            catch(s){
                XMLHTTP = null;
            }
        }
    }
    if(!XMLHTTP){
        arbContent.innerHTML = &quot;Unable to create an XMLHTTP object to use to communicate with the server.&quot;;
        return;
    }

    // Load the page history
    var url = wgServer + wgArticlePath.replace(/\$1/, wgPageName);
    url += ((url.indexOf(&quot;?&quot;) == -1) ? &quot;?&quot; : &quot;&amp;&quot;) + &quot;action=history&amp;limit=21&quot;;
    arbContent.innerHTML = &quot;Loading &lt;a href=\&quot;&quot; + url + &quot;\&quot;&gt;page history&lt;/a&gt;...&quot;;
    XMLHTTP.open(&quot;GET&quot;, url, true);
    XMLHTTP.onreadystatechange = arbHistoryLoaded;
    XMLHTTP.send(null);
}

function arbHistoryLoaded(){
    if(XMLHTTP.readyState != 4) return;

    // Check status
    try{
        if(XMLHTTP.status != 200){
            arbContent.innerHTML = &quot;Unable to load history (status: &quot; + XMLHTTP.status + &quot;)&quot;;
            return;
        }
    }
    catch(e){
        arbContent.innerHTML = &quot;Unable to load history&quot;;
        return;
    }

    // Try to parse the page
    arbContent.innerHTML = &quot;Parsing page history...&quot;;
    var doc = arbParseXML(XMLHTTP.responseText);
    if (!doc || !doc.getElementById(&quot;pagehistory&quot;)){
        arbContent.innerHTML = &quot;Unable to parse the page history.&quot;;
        return;
    }

    // Revision history is in list
    var list = doc.getElementById(&quot;pagehistory&quot;).getElementsByTagName(&quot;li&quot;);

    // Check the first revision is still the current article
    // We checked in arbPageLoad that this was the current revision at the time of page load
    // Hence wgCurRevisionId is the revision ID of the version on this page
    var inputs = list[0].getElementsByTagName(&quot;input&quot;);
    for(j = 0; j &lt; inputs.length; j++){
        if(inputs[j].name == &quot;diff&quot;){
            var id = inputs[j].value;
            break;
        }
    }
    if(id != wgCurRevisionId){
        arbContent.innerHTML = &quot;The current article is no longer the latest revision.&quot;;
        return;
    }

    // Get the username of the vandal
    var links = list[0].getElementsByTagName(&quot;a&quot;);
    for(j = 0; j &lt; links.length; j++){
        if(links[j].innerHTML == &quot;Talk&quot;){
            arbVandal = links[j].title.split(&quot;User talk:&quot;)[1];
            break;
        }
    }

    // Add the older revisions to a drop-down list
    var optionList = &quot;&quot;;
    var lastNonVandalFound = false;
    for(i = 1; i &lt; list.length; i++){
        var id, date, editor;

        // Get the id
        var inputs = list[i].getElementsByTagName(&quot;input&quot;);
        for(j = 0; j &lt; inputs.length; j++){
            if(inputs[j].name == &quot;diff&quot;){
                id = inputs[j].value;
                break;
            }
        }

        // Get the date
        var links = list[i].getElementsByTagName(&quot;a&quot;);
        for(j = 0; j &lt; links.length; j++){
            if(links[j].href.indexOf(&quot;oldid&quot;) &gt; -1 &amp;&amp; links[j].href.indexOf(&quot;diff&quot;) == -1){
                date = links[j].innerHTML;
                break;
            }
        }

        // Get the editor
        for(j = 0; j &lt; links.length; j++){
            if(links[j].innerHTML == &quot;Talk&quot;){
                editor = links[j].title.split(&quot;User talk:&quot;)[1];
                break;
            }
        }

        // Add the option
        optionList += &quot;&lt;option value=\&quot;&quot; + id + &quot;\&quot;&quot;;
        if(lastNonVandalFound == false &amp;&amp; editor != arbVandal){
            optionList += &quot; selected&quot;
            lastNonVandalFound = true;
        }
        optionList += &quot;&gt;&quot; + i + &quot;. #&quot; + id + &quot; - &quot; + date + &quot; - &quot; + editor + &quot;&lt;/option&gt;&quot;;
    }
    arbContent.innerHTML = &quot;Roll Back To: &lt;select id=\&quot;arbRevisions\&quot;&gt;&quot; + optionList + &quot;&lt;/select&gt;&lt;br&gt;&lt;br&gt;&quot;;

    // Output templates to warn user with
    arbContent.innerHTML += &quot;Template To Warn User With:&lt;select id=\&quot;arbTemplates\&quot;&gt;&quot; +
                            &quot;&lt;option value=\&quot;test\&quot;&gt;{{test}} - unintentional vandalism/test&lt;/option&gt;&quot; +
                            &quot;&lt;option value=\&quot;test1a\&quot;&gt;{{test1a}} - unintentional removal of content&lt;/option&gt;&quot; +
                            &quot;&lt;option value=\&quot;test2\&quot;&gt;{{test2}} - suitable for nonsense&lt;/option&gt;&quot; +
                            &quot;&lt;option value=\&quot;test2a\&quot;&gt;{{test2a}} - variant for blankings&lt;/option&gt;&quot; +
                            &quot;&lt;option value=\&quot;test3\&quot;&gt;{{test3}} - please stop&lt;/option&gt;&quot; +
                            &quot;&lt;option value=\&quot;blatantvandal\&quot;&gt;{{blatantvandal}} - obvious vandalism&lt;/option&gt;&quot; +
                            &quot;&lt;option value=\&quot;test4\&quot;&gt;{{test4}} - last warning&lt;/option&gt;&quot; +
                            &quot;&lt;option value=\&quot;test4im\&quot;&gt;{{test4im}} - only warning&lt;/option&gt;&quot; +
                            &quot;&lt;/select&gt;&lt;br&gt;&lt;br&gt;&quot;;

    // Output button
    arbContent.innerHTML += &quot;&lt;button id=\&quot;arbRollback\&quot; value=\&quot;Roll Back\&quot; onclick=\&quot;arbStartRollback()\&quot;&gt;Roll Back&lt;/button&gt;&quot;;
}

function arbStartRollback(){
    // Get the revision and template dropdowns
    var arbRevisions = document.getElementById(&quot;arbRevisions&quot;);
    var arbTemplates = document.getElementById(&quot;arbTemplates&quot;);
    if(!(arbRevisions &amp;&amp; arbTemplates)){
        arbContent.innerHTML = &quot;Unable to load the options you selected.&quot;;
        return;
    }

    // Get the chosen editor, revision and template
    arbOldEditor = arbRevisions.options[arbRevisions.selectedIndex].innerHTML.split(&quot;- &quot;)[2];
    arbBackTo = arbRevisions.options[arbRevisions.selectedIndex].value;
    arbTemplate = arbTemplates.options[arbTemplates.selectedIndex].value;

    // Load the edit form for the chosen revision
    var url = wgServer + wgArticlePath.replace(/\$1/, wgPageName);
    url += ((url.indexOf(&quot;?&quot;) == -1) ? &quot;?&quot; : &quot;&amp;&quot;) + &quot;action=edit&amp;oldid=&quot; + arbBackTo;
    arbContent.innerHTML = &quot;Loading &lt;a href=\&quot;&quot; + url + &quot;\&quot;&gt;article edit form&lt;/a&gt;...&lt;br&gt;&quot;;
    XMLHTTP.open(&quot;GET&quot;, url, true);
    XMLHTTP.onreadystatechange = arbFormLoaded;
    XMLHTTP.send(null);
}

function arbFormLoaded(){
    if(XMLHTTP.readyState != 4) return;

    // Check status
    try{
        if(XMLHTTP.status != 200){
            arbContent.innerHTML += &quot;Unable to load edit form (status: &quot; + XMLHTTP.status + &quot;)&lt;br&gt;&quot;;
            return;
        }
    }
    catch(e){
        arbContent.innerHTML += &quot;Unable to load edit form&lt;br&gt;&quot;;
        return;
    }

    // Try to parse the page
    arbContent.innerHTML += &quot;Parsing edit form...&lt;br&gt;&quot;;
    var doc = arbParseXML(XMLHTTP.responseText);
    if (!doc || !doc.getElementById(&quot;editform&quot;)){
        arbContent.innerHTML += &quot;Unable to parse edit form.&lt;br&gt;&quot;;
        return;
    }
    arbPostParams = &quot;&quot;;

    // Process the &lt;input&gt; tags
    inputs = doc.getElementById(&quot;editform&quot;).getElementsByTagName(&quot;input&quot;);
    for(i = 0; i &lt; inputs.length; i++){
        if(inputs[i].name == &quot;wpSummary&quot;) arbPostParams += &quot;&amp;wpSummary=&quot; + escape(&quot;Reverted edits by [[Special:Contributions/&quot; + arbVandal + &quot;|&quot; + arbVandal + &quot;]] to revision &quot; + arbBackTo + &quot; by &quot; + arbOldEditor);
        else if(inputs[i].name == &quot;wpMinoredit&quot;) arbPostParams += &quot;&amp;wpMinoredit=1&quot;;
        else if(inputs[i].name == &quot;wpPreview&quot;) continue;
        else if(inputs[i].name == &quot;wpDiff&quot;) continue;
        else arbPostParams += &quot;&amp;&quot; + inputs[i].name + &quot;=&quot; + escape(inputs[i].value);
    }

    // Process the &lt;textarea&gt; tags
    inputs = doc.getElementById(&quot;editform&quot;).getElementsByTagName(&quot;textarea&quot;);
    for(i = 0; i &lt; inputs.length; i++) arbPostParams += &quot;&amp;&quot; + inputs[i].name + &quot;=&quot; + escape(inputs[i].value);

    // Trim off leading &amp;
    arbPostParams = arbPostParams.substring(1);

    // We now need to check this is still the latest revision
    var url = wgServer + wgArticlePath.replace(/\$1/, wgPageName);
    url += ((url.indexOf(&quot;?&quot;) == -1) ? &quot;?&quot; : &quot;&amp;&quot;) + &quot;action=history&amp;limit=1&quot;;
    arbContent.innerHTML += &quot;Checking this is still the current revision...&lt;br&gt;&quot;;
    XMLHTTP.open(&quot;GET&quot;, url, true);
    XMLHTTP.onreadystatechange = arbCheckCurrent;
    XMLHTTP.send(null);
}

function arbCheckCurrent(){
    if(XMLHTTP.readyState != 4) return;

    // Check status
    try{
        if(XMLHTTP.status != 200){
            arbContent.innerHTML += &quot;Unable to load history (status: &quot; + XMLHTTP.status + &quot;)&lt;br&gt;&quot;;
            return;
        }
    }
    catch(e){
        arbContent.innerHTML += &quot;Unable to load history&lt;br&gt;&quot;;
        return;
    }

    // Try to parse the page
    arbContent.innerHTML += &quot;Parsing page history...&lt;br&gt;&quot;;
    var doc = arbParseXML(XMLHTTP.responseText);
    if (!doc || !doc.getElementById(&quot;pagehistory&quot;)){
        arbContent.innerHTML += &quot;Unable to parse the page history.&lt;br&gt;&quot;;
        return;
    }

    // Revision history is in list
    var list = doc.getElementById(&quot;pagehistory&quot;).getElementsByTagName(&quot;li&quot;);

    // Check the first revision is still the current article
    // We checked in arbPageLoad that this was the current revision at the time of page load
    // Hence wgCurRevisionId is the revision ID of the version on this page
    var inputs = list[0].getElementsByTagName(&quot;input&quot;);
    for(j = 0; j &lt; inputs.length; j++){
        if(inputs[j].name == &quot;diff&quot;){
            var id = inputs[j].value;
            break;
        }
    }
    if(id != wgCurRevisionId){
        arbContent.innerHTML += &quot;The current article is no longer the latest revision.&lt;br&gt;&quot;;
        return;
    }

    // Rollback
    arbContent.innerHTML += &quot;Rolling back the article...&lt;br&gt;&quot;;
    var url = wgServer + wgArticlePath.replace(/\$1/, wgPageName);
    url += ((url.indexOf(&quot;?&quot;) == -1) ? &quot;?&quot; : &quot;&amp;&quot;) + &quot;action=submit&quot;;
    XMLHTTP.open(&quot;POST&quot;, url, true);
    XMLHTTP.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);
    XMLHTTP.onreadystatechange = arbLoadWarning;
    XMLHTTP.send(arbPostParams);
}

function arbLoadWarning(){
    if(XMLHTTP.readyState != 4) return;

    // Check status
    try{
        if(XMLHTTP.status != 200){
            arbContent.innerHTML += &quot;Unable to roll back (status: &quot; + XMLHTTP.status + &quot;)&lt;br&gt;&quot;;
            return;
        }
    }
    catch(e){
        arbContent.innerHTML += &quot;Unable to roll back&lt;br&gt;&quot;;
        return;
    }

    // Load talk page edit form
    arbContent.innerHTML += &quot;Article rolled back.&lt;br&gt;Loading user talk page form...&lt;br&gt;&quot;;
    var url = wgServer + wgArticlePath.replace(/\$1/, &quot;User_talk:&quot; + arbVandal);
    url += ((url.indexOf(&quot;?&quot;) == -1) ? &quot;?&quot; : &quot;&amp;&quot;) + &quot;action=edit&amp;section=new&quot;;
    XMLHTTP.open(&quot;GET&quot;, url, true);
    XMLHTTP.onreadystatechange = arbSendWarning;
    XMLHTTP.send(null);
}

function arbSendWarning(){
    if(XMLHTTP.readyState != 4) return;

    // Check status
    try{
        if(XMLHTTP.status != 200){
            arbContent.innerHTML += &quot;Unable to load user talk page form (status: &quot; + XMLHTTP.status + &quot;)&lt;br&gt;&quot;;
            return;
        }
    }
    catch(e){
        arbContent.innerHTML += &quot;Unable to load user talk page form&lt;br&gt;&quot;;
        return;
    }

    // Try to parse the page
    arbContent.innerHTML += &quot;Parsing edit form...&lt;br&gt;&quot;;
    var doc = arbParseXML(XMLHTTP.responseText);
    if (!doc || !doc.getElementById(&quot;editform&quot;)){
        arbContent.innerHTML += &quot;Unable to parse edit form.&lt;br&gt;&quot;;
        return;
    }
    arbPostParams = &quot;&quot;;

    // Process the &lt;input&gt; tags
    inputs = doc.getElementById(&quot;editform&quot;).getElementsByTagName(&quot;input&quot;);
    for(i = 0; i &lt; inputs.length; i++){
        if(inputs[i].name == &quot;wpSummary&quot;) arbPostParams += &quot;&amp;wpSummary=&quot; + escape(&quot;Vandalism to [[&quot; + wgTitle + &quot;]]&quot;);
        else if(inputs[i].name == &quot;wpMinoredit&quot;) arbPostParams += &quot;&amp;wpMinoredit=1&quot;;
        else if(inputs[i].name == &quot;wpPreview&quot;) continue;
        else if(inputs[i].name == &quot;wpDiff&quot;) continue;
        else arbPostParams += &quot;&amp;&quot; + inputs[i].name + &quot;=&quot; + escape(inputs[i].value);
    }

    // Add the warning
    var url = wgServer + wgArticlePath.replace(/\$1/, wgPageName);
    url += ((url.indexOf(&quot;?&quot;) == -1) ? &quot;?&quot; : &quot;&amp;&quot;) + &quot;diff=&quot; + wgCurRevisionId + &quot;&amp;oldid=&quot; + arbBackTo;
    arbPostParams += &quot;&amp;wpTextbox1=&quot; + escape(&quot;{{subst:&quot; + arbTemplate + &quot;|&quot; + wgTitle + &quot;}}\n\nA diff for the reverted revision can be found at [&quot; + url + &quot;].\n\n~&quot; + &quot;~&quot; + &quot;~&quot; + &quot;~&quot;);

    // Trim off leading &amp;
    arbPostParams = arbPostParams.substring(1);

    // Post the warning
    arbContent.innerHTML += &quot;Posting warning...&lt;br&gt;&quot;;
    var url = wgServer + wgArticlePath.replace(/\$1/, &quot;User_talk:&quot; + arbVandal);
    url += ((url.indexOf(&quot;?&quot;) == -1) ? &quot;?&quot; : &quot;&amp;&quot;) + &quot;action=submit&quot;;
    XMLHTTP.open(&quot;POST&quot;, url, true);
    XMLHTTP.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);
    XMLHTTP.onreadystatechange = arbFinished;
    XMLHTTP.send(arbPostParams);
}

function arbFinished(){
    if(XMLHTTP.readyState != 4) return;

    // Check status
    try{
        if(XMLHTTP.status != 200){
            arbContent.innerHTML += &quot;Unable to post warning (status: &quot; + XMLHTTP.status + &quot;)&lt;br&gt;&quot;;
            return;
        }
    }
    catch(e){
        arbContent.innerHTML += &quot;Unable to post warning&lt;br&gt;&quot;;
        return;
    }

    // Report success
    arbContent.innerHTML += &quot;Warning added to user page.&lt;br&gt;&lt;br&gt;&quot;;

    // Add link to article
    var url = wgServer + wgArticlePath.replace(/\$1/, wgPageName);
    arbContent.innerHTML += &quot;&lt;a href=\&quot;&quot; + url + &quot;\&quot;&gt;Go to article&lt;/a&gt; | &quot;;

    // Add link to talk page
    var url = wgServer + wgArticlePath.replace(/\$1/, &quot;User_talk:&quot; + arbVandal);
    arbContent.innerHTML += &quot;&lt;a href=\&quot;&quot; + url + &quot;\&quot;&gt;Go to vandal's talk page&lt;/a&gt; | &quot;;

    // Add link to recent changes
    var url = wgServer + wgArticlePath.replace(/\$1/, &quot;Special:Recentchanges&quot;);
    arbContent.innerHTML += &quot;&lt;a href=\&quot;&quot; + url + &quot;\&quot;&gt;Go to recent changes&lt;/a&gt;&lt;br&gt;&quot;;
}

// Returns a document object if possible
function arbParseXML(xml){
    if(document.implementation.createDocument){
        var parser = new DOMParser();
        return parser.parseFromString(xml, &quot;text/xml&quot;);
    }
    else if(window.ActiveXObject){
        var parser = new ActiveXObject(&quot;MSXML2.DOMDocument.3.0&quot;);
        parser.async = &quot;false&quot;;
        var ret = parser.loadXML(xml);
        if (ret) return parser.documentElement;
    }

    return null;
}
</pre><div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../b/l/a/User%7EBlair_Bonnett_monobook.js_f286.html">http://en.wikipedia.org../../../b/l/a/User%7EBlair_Bonnett_monobook.js_f286.html</a>"</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-user"
	       class="selected"	       ><a href="../../../b/l/a/User%7EBlair_Bonnett_monobook.js_f286.html">User page</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../b/l/a/User_talk%7EBlair_Bonnett_monobook.js_27cf.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/User:Blair_Bonnett/monobook.js">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 05:08, 2 January 2007 by Wikipedia user <a href="../../../b/l/a/User%7EBlair_Bonnett_99ec.html" title="User:Blair Bonnett">Blair Bonnett</a>. </li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>

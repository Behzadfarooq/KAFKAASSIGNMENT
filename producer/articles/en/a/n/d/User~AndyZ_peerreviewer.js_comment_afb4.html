<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="User:AndyZ/peerreviewer.js/comment,WP:FOOTNOTE,WP:GTL,WP:PR/A,&quot;+wgTitle+&quot;,Pilaf,&quot;+PRtemplateName+&quot;" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>User:AndyZ/peerreviewer.js/comment - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-2">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">User:AndyZ/peerreviewer.js/comment</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"><span class="subpages">&lt; <a href="../../../a/n/d/User%7EAndyZ_5810.html" title="User:AndyZ">User:AndyZ</a> | <a href="../../../a/n/d/User%7EAndyZ_peerreviewer.js_782c.html" title="User:AndyZ/peerreviewer.js">peerreviewer.js</a></span></div>
	    	    	    <!-- start content -->
	    <p>////////////////////////////////////////// // Unused code // //////////////////////////////////////////</p>
<p><a name="1"></a></p>
<h1><span class="editsection">[<a href="../../../a/n/d/User%7EAndyZ_peerreviewer.js_comment_afb4.html" title="Edit section: 1">edit</a>]</span> <span class="mw-headline">1</span></h1>
<p>// /* ////////////////////////////////////////////////Not working as of now////////////////////////////////////// function imgtest(){ //checks image status img = /\[\[image\:.{1,}(\||\])/gi</p>
<p>notag="" futag="" alltagged = true allfurat = true</p>
<p>if(img.test(wpTxt)){ var imglist = wpTxt.match(img)</p>
<p>for(i=0;i&lt;imglist.length;i++){ imglist[i] = imglist[i].substring(2,imglist[i].length-2) imglist[i] = imglist[i].replace(/\s/g,"_") }</p>
<p>for(i=0;i&lt;imglist.length;i++){ imgWin = window.open(document.location.href,"Images") imgWin.document.write("&lt;html&gt;&lt;frameset rows='100%,*'&gt;&lt;frame src='<a href="http://en.wikipedia.org/w/index.php?title=" class="external free" title="http://en.wikipedia.org/w/index.php?title=" rel="nofollow">http://en.wikipedia.org/w/index.php?title=</a>"+imglist[i]+"&amp;action=edit' name='theImgWin'&gt;&lt;frame src='about:blank' name='blank'&gt;&lt;/frameset&gt;&lt;/html&gt;") x=0 while(x&lt;10000){ if(imgWin.theImgWin.document.editform.wpTextbox1.value){ imgtest2() break; } x++ } }</p>
<p>if(alltagged==false){ document.theForm.theResponse.value+="\n{{subst:User:AndyZ/PR/imgtag"+notag+"}}" }</p>
<p>if(allfurat==false){ document.theForm.theResponse.value+="\n{{subst:User:AndyZ/PR/imgfu"+futag+"}}" } }</p>
<p>function imgtest2(){ theImgText = imgWin.theImgWin.document.editform.wpTextbox1.value if(theImgText!=null){alert("finally")}</p>
<p>templ1 = /\{\{/gi templPD = /\{\{PD\}\}/gi if(templ1.test(theImgText)){ if(templPD.test(theImgText)){</p>
<pre>
          alltagged = false      
</pre>
<p>notag=notag+"|"+imglist[i] } } else{ alltagged = false notag=notag+"|"+imglist[i] }</p>
<p>templFU = /\{\{.{0,}(Music sample|Speech|Sheet music|Albumcover|Boardgamecover|Book cover|Comiccover|DVDcover|Gamecover|Softwarecover|Magazinecover|Time|Newspapercover|Video tape cover|Logo|Computer hardware logo|Disneylogo|PreK12\-logo|Restaurant|Radiologo|Schoolboard\-logo|Scoutlogo|Sports\-logo|Hqfl logo|Olympics\-logo|Tv\-logo|Tv\-program\-logo|Univ\-logo|Symbol|Seal|Icon|Game\-icon|Wayfinding|Stamp|USPSstamp|Money|Promotional|DisneyAttractionPoster|Eventposter|Sportsposter|Movie poster|Political poster|Film\-screenshot|Machinima\-screenshot|Musicpromo\-screenshot|Tv\-screenshot|Video\-screenshot|Game\-screenshot|Cvg\-titlescreen|screenshot|screen|art|photo|sign|cover|artwork|Digimonimage|DisneyCharacter|Pokeimage|Yugiohimage|Comicpanel|comicscene|Public Library images|Otto Perry image|Robert Richardson image|Parody|Smithsonian|Standard test|Fair use in|Fairusein\d)/gi FUrat = /rationale/gi</p>
<p>if((templFU.test(theImgText))&amp;&amp;(!FUrat.test(theImgText))){ allfurat = false futag=futag+"|"+imglist[i] }</p>
<p>imgWin.close()</p>
<p>} }</p>
<ul>
<li>/</li>
</ul>
<p>// -------------------- // -------------------- /* //not working; takes too long //looks for redundant links wpTxtlink = wpTxt; sectExp = /\n==/gi; titleExp = /\n==(.{1,})==/gi commonlinkstr = ""; linkmatch = false;</p>
<p>while(sectExp.test(wpTxtlink)) { wpTxtlink = wpTxtlink.substring(wpTxtlink.indexOf("\n=="),wpTxtlink.length); if(sectExp.test(wpTxtlink)) sectTitle = RegExp.$1 else sectTitle = "\0"; wpTxtlink.substring(5,wpTxtlink.length); wpTxtlink2 = wpTxtlink.substring(0,wpTxtlink.indexOf("\n=="))</p>
<p>linkarray = wpTxtlink2.match(/\[\[.{1,}[\|\]]/g); //linkarray is array of links in a section</p>
<pre>
       if(!linkarray) continue; 
</pre>
<p>var linkarray2 = new Array(); for(i = 0; i &lt; linkarray.length; i++) linkarray2[i] = linkarray[i].substring(2,linkarray[i].length-1)</p>
<p>for(i = 0; i &lt; linkarray2.length; i++) { for(j = i+1; j &lt; linkarray2.length; j++) { if(linkarray2[i] == linkarray2[j]) { linkmatch = true; if(sectTitle&#160;!= "\0") commonlinkstr += "|" + linkarray2[i] + " in " + sectTitle; else commonlinkstr += "|" + linkarray2[i]; } } } }</p>
<p>if(linkmatch) document.theForm.theResponse.value+="\n{{subst:User:AndyZ/PR/redunlink"+commonlinkstr+"}}"</p>
<ul>
<li>/</li>
</ul>
<p><br />
//&lt;/nowiki&gt;</p>
<p>//// NO LONGER NEEDED (but kept here to continue archiving <a href="../../../p/r/2F/WP%7EPR_A_a755.html" title="WP:PR/A">WP:PR/A</a>) PRheader = /\{\{PR\-/gi theArchive = ""</p>
<p>// - archiving of [[WP:PR/A|automated peer reviews]] if(document.location.href=="http://en.wikipedia.org/w/index.php?title=Wikipedia:Peer_review/Automated&amp;action=edit"){ if(PRheader.test(document.getElementById(output_PR).value)){ thePRarticle = wpTxt.match(/===\[\[(.{1,})\]\]===/gi) for(i=0;i&lt;thePRarticle.length;i++){ if(document.getElementById(output_PR).value.indexOf(thePRarticle[i].substring(5,thePRarticle[i].length-5))==-1){ loc1 = wpTxt.indexOf(thePRarticle[i]) wpTxt2 = wpTxt.substring(loc1+5,wpTxt.length) loc2 = ((wpTxt2.indexOf("===[[") &lt; wpTxt2.indexOf("==Requests")) || (wpTxt2.indexOf("==Requests")==-1)) ? wpTxt2.indexOf("===[[") : wpTxt2.indexOf("==Requests") theArchive+="\n===[[" theArchive+=wpTxt2.substring(0,loc2) document.editform.wpTextbox1.value = wpTxt.substring(0,loc1) + wpTxt2.substring(loc2,wpTxt2.length) wpTxt = document.editform.wpTextbox1.value } } document.getElementById(output_PR).value = theArchive // Add a tag to the summary box - ''stolen'' from [[User:Bobblewik]] var txt = document.editform.wpSummary; var summary = "JS - [[Wikipedia:Peer review/Automated/Archives|archiving]] closed [[WP:PR|peer reviews]]"; if (txt.value.indexOf(summary) == -1) { if (txt.value.match(/[^\*\/\s][^\/\s]?\s*$/)) { txt.value += " | "; } txt.value += summary; } } } //// END UNNEEDED ARCHIVING CODE //</p>
<p>///////////////////////////////// Toolbar code failing /* addOnloadHook fails to work... else if(toolbar_PR == "toolbar" &amp;&amp; document.getElementById("toolbar")){ //image file: <a href="http://upload.wikimedia.org/wikipedia/en/a/a9/AZbutton_PR.PNG" class="external free" title="http://upload.wikimedia.org/wikipedia/en/a/a9/AZbutton_PR.PNG" rel="nofollow">http://upload.wikimedia.org/wikipedia/en/a/a9/AZbutton_PR.PNG</a> addOnloadHook(function () { alert("creating button"); //document.getElementById('toolbar').innerHTML = document.getElementById('toolbar').innerHTML + "&lt;a href='javascript:review1();'&gt;&lt;img src='<a href="http://upload.wikimedia.org/wikipedia/en/a/a9/AZbutton_PR.PNG'" class="external free" title="http://upload.wikimedia.org/wikipedia/en/a/a9/AZbutton_PR.PNG'" rel="nofollow">http://upload.wikimedia.org/wikipedia/en/a/a9/AZbutton_PR.PNG'</a> alt='JavaScript peer reviewer' title='JS peer review' style='CURSOR: pointer' border=0&gt;&lt;/a&gt;"</p>
<p>AZbutton_PR = document.createElement("img"); AZbutton_PR.setAttribute("src","<a href="http://upload.wikimedia.org/wikipedia/en/a/a9/AZbutton_PR.PNG" class="external free" title="http://upload.wikimedia.org/wikipedia/en/a/a9/AZbutton_PR.PNG" rel="nofollow">http://upload.wikimedia.org/wikipedia/en/a/a9/AZbutton_PR.PNG</a>"); AZbutton_PR.setAttribute("width","23"); AZbutton_PR.setAttribute("height","22"); AZbutton_PR.setAttribute("alt","uses JavaScript to suggest corrections to the article"); AZbutton_PR.setAttribute("style","CURSOR: pointer"); AZbutton_PR.setAttribute("border",0); AZbutton_PR.setAttribute("onclick","review1()"); document.getElementById("toolbar").appendChild(AZbutton_PR); alert("done"); }) } ///////////////////////////////// end commented code</p>
<ul>
<li>/</li>
</ul>
<p>/* if(!noXHR_PR &amp;&amp;&#160;!PRtemplateData){ PRtemplateData = new Array(); prtemp_regex = /\{\{subst:(User:AndyZ\/PR\/.*)\}\}/gi if(prtemp_regex.test(document.getElementById(output_PR))){ var PRtemplates = document.getElementById(output_PR).value.match(prtemp_regex); for(i=0;i&lt;PRtemplates.length;i++){ PRtemplates[i] = PRtemplates[i].replace(prtemp_regex,"$1"); wpajax.download({url:'<a href="http://en.wikipedia.org/w/index.php?title='" class="external free" title="http://en.wikipedia.org/w/index.php?title='" rel="nofollow">http://en.wikipedia.org/w/index.php?title='</a> + PRtemplates[i] + '&amp;action=raw', onSuccess: replacesubstInOutput, onFailure: errorInReplaceSubst, message: PRtemplates[i]}); PRtemplateData[i] = PRtemplates[i] + ",,," + tempPRdata; } } } else if(PRtemplateData){ var PRtemplateName, PRtemplateContent; for(i=0;i&lt;PRtemplateData.length;i++){ PRtemplateName = PRtemplateData[i].split(',,,')[0]; PRtemplateContent = PRtemplateData[i].split(',,,')[1]; document.getElementById(output_PR).value = document.getElementById(output_PR).value.replace("Template:"+PRtemplateName+"",PRtemplateContent); } } else if(noXHR_PR){ */</p>
<p>/* not in use now // -------------------- // dragging PR box around // --------------------</p>
<p>var IE = (navigator.appName == "Microsoft Internet Explorer")&#160;? true&#160;: false</p>
<p>if(wgNamespaceNumber == 0 || allSpaces_PR){ if(!IE) document.captureEvents(Event.MOUSEMOVE) document.onmousemove = getMouseXY; }</p>
<p>var posX, posY, elemPosX, elemPosY, difX, difY, cur_drag = false, theSpotX = 0, theSpotY = 0;</p>
<p>function getMouseXY(e){ if(IE){ posX = event.clientX + document.body.scrollLeft; posY = event.clientY + document.body.scrollTop; } else { posX = e.pageX; posY = e.pageY; } return true; }</p>
<p>function getObjectXY(theElement){ try{ elemPosX = 40; } catch(e){ alert("X - error"); }</p>
<p>try{ elemPosY = 150; } catch(e){ alert("Y - error"); }</p>
<p>try{ theElement = document.getElementsByTagName("HTML")[0]; } catch(e){ alert("Error2"); }</p>
<p>while(theElement&#160;!= null){ elemPosX += theElement.offsetLeft; elemPosY += theElement.offsetTop; theElement = theElement.offsetParent; } }</p>
<p>function StartDrag(elem){ getObjectXY(elem); difX = elemPosX - posX; difY = elemPosY - posY; cur_drag = setInterval("DragIt(" + elem.id + ")",1); }</p>
<p>function DragIt(elem){ //new position of element elem.style.left = posX + difX; elem.style.top = posY + difY; }</p>
<p>function CancelDrag(){ //stop the dragging if(cur_drag) window.clearInterval(cur_drag); }</p>
<ul>
<li>/</li>
</ul>
<p><a name="2"></a></p>
<h1><span class="editsection">[<a href="../../../a/n/d/User%7EAndyZ_peerreviewer.js_comment_afb4.html" title="Edit section: 2">edit</a>]</span> <span class="mw-headline">2</span></h1>
<p>// -------------------- // not in usage: allows user to move results to a different page // fails to work (unable to access popup?) // --------------------</p>
<p>//ideally the following function can be replaced by a menu function addToPage(){ replaceProse(); var faketarget; // results_PR = document.getElementById(output_PR).value; results_PR = results_PR.match(/\{\{subst:User:AndyZ\/PR\/(.*)\}\}/gi); for(i=0;i&lt;results_PR.length;i++) results_PR[i] = results_PR[i].replace(/\{\{subst:User:AndyZ\/PR\/(.*)\}\}/gi,"$1"); //</p>
<p>var newPageName; var moveToPrompt = prompt("Move PR to: 1 - talk page 2 - article's peer review page 3 - personal sandbox 0 - Auto-PR page\tOr enter pagename","Enter the destination page name or a menu option")</p>
<p>if(moveToPrompt.length == 1){ faketarget = moveToPrompt + "," + wgTitle + "," + results_PR.join(","); fakeaction = "movePR"; } else if(moveToPrompt.length &gt; 1){ faketarget = "9," + wgTitle + "," + results_PR.join(","); }</p>
<p>if(moveToPrompt == "0"){ //add it to WP:PRA/?0? var cur_d = new Date(); var cur_yr = d.getFullYear(); var cur_m = d.getMonth(); //date elements newPageName = "Wikipedia:Peer_review/Automated/" + cur_m + "_" + cur_yr + "&amp;section=2&amp;fakeaction=movePR&amp;faketarget="+faketarget; } else if(moveToPrompt == "1") newPageName = "Talk:" + wgPageName +"&amp;section=new&amp;fakeaction=movePR&amp;faketarget="+faketarget; else if(moveToPrompt == "2") newPageName = "Wikipedia:Peer review/" + wgPageName + "&amp;fakeaction=movePR&amp;faketarget="+faketarget; else if(moveToPrompt == "3") newPageName = userSandbox_PR + "&amp;fakeaction=movePR&amp;faketarget="+faketarget; else if(moveToPrompt == null || moveToPrompt == "" || moveToPrompt == " " || moveToPrompt == "Enter the destination page name or a menu option") return; else newPageName = moveToPrompt + "&amp;fakeaction=movePR&amp;faketarget=" + faketarget;</p>
<p>var newPage = window.open("<a href="http://en.wikipedia.org/w/index.php?title=" class="external free" title="http://en.wikipedia.org/w/index.php?title=" rel="nofollow">http://en.wikipedia.org/w/index.php?title=</a>"+newPageName+"&amp;action=edit")</p>
<p>//do stuff on new pages /* if(moveToPrompt == "0"){ newPage.document.getElementById('wpTextbox1').value = document.getElementById(input_PR).value + newPage.document.getElementById('wpTextbox1').value; newPage.document.editform.wpSummary.value += " "+wgTitle+"" } else if(moveToPrompt == "1"){ newPage.document.getElementById('wpTextbox1').value = document.getElementById(input_PR).value.replace(/===.*===/gi,""); newPage.document.editform.wpSummary.value = "JavaScript peer review suggestions"; } else if(moveToPrompt == "2"){ newPage.document.getElementById('wpTextbox1').value += document.getElementById(input_PR).value.replace(/===.*===/gi,"===JavaScript suggestions==="); newPage.document.editform.wpSummary.value = "JavaScript peer review suggestions"; } else if(moveToPrompt == "3"){ newPage.document.getElementById('wpTextbox1').value += document.getElementById(input_PR).value; newPage.document.editform.wpSummary.value = "JavaScript peer review suggestions"; } else{ if(wgNamespaceNumber!=0){ newPage.document.getElementById('wpTextbox1').value += document.getElementById(input_PR).value; newPage.document.editform.wpSummary.value = "JavaScript peer review suggestions"; } else alert("These suggestions should not be on an article page; please move them to a discussion page."); } */ }</p>
<p><br /></p>
<p>else if (theaction == 'movePR'){</p>
<p>/*list_PR = target.split(","); if(list_PR[0] == 0){ cur_txt = document.getElementById('wpTextbox1').value; document.getElementById('wpTextbox1').value = "===[[" + list_PR[1] + "]]===\n" + initMsg_PR + "\n"; for(i=2;i&lt;list_PR.length;i++) // document.getElementById('wpTextbox1').value += "{{subst:User:AndyZ/PR/"+list_PR[i]+"}}\n" // document.getElementById('wpTextbox1').value += document.getElementById(output_PR).value+=endMsg_PR; document.getElementById('wpTextbox1').value += cur_txt; document.getElementById('wpSummary').value += "+ [["+list_PR[1]+"]]" } else if(list_PR[0] == 1){ document.getElementById('wpTextbox1').value = "===[[" + list_PR[1] + "]]===\n" + initMsg_PR + "\n"; for(i=2;i&lt;list_PR.length;i++) // document.getElementById('wpTextbox1').value += "{{subst:User:AndyZ/PR/"+list_PR[i]+"}}\n" // document.getElementById('wpTextbox1').value +=endMsg_PR; document.getElementById('wpSummary').value = "JavaScript peer review suggestions" } else if(list_PR[0] == 2){ document.getElementById('wpTextbox1').value += "\n\n===[[" + list_PR[1] + "]]===\n" + initMsg_PR + "\n"; for(i=2;i&lt;list_PR.length;i++) // document.getElementById('wpTextbox1').value += "{{subst:User:AndyZ/PR/"+list_PR[i]+"}}\n" // document.getElementById('wpTextbox1').value +=endMsg_PR; document.getElementById('wpSummary').value += "JavaScript-generated suggestions" } else if(list_PR[0] == 3){ document.getElementById('wpTextbox1').value += "\n\n===[[" + list_PR[1] + "]]===\n" + initMsg_PR + "\n"; for(i=2;i&lt;list_PR.length;i++) // document.getElementById('wpTextbox1').value += "{{subst:User:AndyZ/PR/"+list_PR[i]+"}}\n" // document.getElementById('wpTextbox1').value += endMsg_PR; document.getElementById('wpSummary').value += "JavaScript-generated suggestions for [[" + list_PR[1] + "]]"; } else if(list_PR[0] == 9){ if(wgNamespaceNumber == 0) alert("Please do not add these comments to an article; move them instead to a discussion page"); else { document.getElementById('wpTextbox1').value += "\n\n===[[" + list_PR[1] + "]]===\n" + initMsg_PR + "\n"; for(i=2;i&lt;list_PR.length;i++) // document.getElementById('wpTextbox1').value += "{{subst:User:AndyZ/PR/"+list_PR[i]+"}}\n" // document.getElementById('wpTextbox1').value += endMsg_PR; document.getElementById('wpSummary').value += "JavaScript-generated suggestions for [[" + list_PR[1] + "]]"; } }*/</p>
<p>}</p>
<p>// NOT needed as of now, could be useful in future though /* function createCookie(name,value,expdate){ document.cookie = name + "=" + escape(value) + ";expires=" + expdate; }</p>
<p>function readCookie(name){ if(document.cookie.length &gt; 0){ cookieIndex = document.cookie.indexOf(name+"="); if(cookieIndex&#160;!= -1){ cookieIndex += name.length + 1; endCookieIndex = document.cookie.indexOf(";",cookieIndex); if(endCookieIndex == -1) endCookieIndex = document.cookie.length; return unescape(document.cookie.substring(cookieIndex,endCookieIndex)); } } return null; }</p>
<p>function saveReview(){ curdate = new Date(); PRarchiveTxt = wgTitle;</p>
<pre>
    PRarchiveTxt += "^t^" + document.getElementById('theResponse').value.replace(/\n/gi,"^n^");
</pre>
<p>PRarchiveTxt += "^d^" + curdate.getFullYear() + "," + curdate.getMonth() + "," + curdate.getDate();</p>
<p>var thearchives = new Array(5); var thearchives_dates = new Array(5); var lowyear; var lowdate; var lowmonth; var lownum = 0; for(i=0;i&lt;5;i++){ thearchives[i] = readCookie("archivePRA" + i.toString()); thearchives_dates[i] = thearchives[i].split("^d^")[1]; if(i==0){ lowyear = thearchives_dates[i].split(",")[0]; lowmonth = thearchives_dates[i].split(",")[1]; lowdate = thearchives_dates[i].split(",")[2]; } else{ if(parseInt(thearchives_dates[i].split(",")[0]) &lt; parseInt(lowyear)){ lowyear = thearchives_dates[i].split(",")[0]; lowmonth = thearchives_dates[i].split(",")[1]; lowdate = thearchives_dates[i].split(",")[2]; lownum = i; } else if(parseInt(thearchives_dates[i].split(",")[0]) == parseInt(lowyear)){ if(parseInt(thearchives_dates[i].split(",")[1]) &lt; parseInt(lowmonth)){ lowyear = thearchives_dates[i].split(",")[0]; lowmonth = thearchives_dates[i].split(",")[1]; lowdate = thearchives_dates[i].split(",")[2]; lownum = i; } else if(parseInt(thearchives_dates[i].split(",")[1]) == parseInt(lowmonth)){ if(parseInt(thearchives_dates[i].split(",")[2]) &lt; parseInt(lowdate)){ lowyear = thearchives_dates[i].split(",")[0]; lowmonth = thearchives_dates[i].split(",")[1]; lowdate = thearchives_dates[i].split(",")[2]; lownum = i; } } } }</p>
<pre>
   }
</pre>
<pre>
    expdate = new Date(); expdate.setDate(curdate.getDate()+30);   
    createCookie("archivePRA"+lownum,PRarchiveTxt,expdate);
</pre>
<p>}</p>
<p>function locateReview(){ scores = readCookie("highs"); scoreChart = scores.split(",");</p>
<p>theHTML = ""; if(scoreChart.length&gt;20){scoreChartLength=20;} else scoreChartLength = scoreChart.length;</p>
<p>for(i=0;i&lt;scoreChartLength;i++){ if(i&lt;9){theHTML += " " + (i+1) + ". " + "&#160;&#160;" + scoreChart[i] + "<br />
";} else{theHTML += " " + (i+1) + ". " + scoreChart[i] + "<br />
";} } }</p>
<ul>
<li>/</li>
</ul>
<p>// end unneeded stuff</p>
<p><a name="3"></a></p>
<h1><span class="editsection">[<a href="../../../a/n/d/User%7EAndyZ_peerreviewer.js_comment_afb4.html" title="Edit section: 3">edit</a>]</span> <span class="mw-headline">3</span></h1>
<p>// <s>Determine the length of a lead (number of paragraphs)</s></p>
<pre>
// <s>Figure out if the lead is too short (1 paragraph) or too long (&gt;=4 paragraphs), depending upon size of article</s>
// <s>Determine if no-break spaces ( ) are used </s>
// <s>Determine if standard abbreviations are used for conversions</s>
// <s>Determine if units are spelled out in text</s>
// <s>Determine if last few sections (see also, references, notes, external links) follow <a href="../../../g/t/l/WP%7EGTL_2e4c.html" title="WP:GTL">WP:GTL</a></s>
// <s>Determine if categories and interlanguage links are alphabetized</s>
// <s>Determine if all images have captions</s>
// <s>Find out the number of sections</s> 
// <s>Determine if footnote spacing standards are used (as in <a href="../../../f/o/o/WP%7EFOOTNOTE_26e2.html" title="WP:FOOTNOTE">WP:FOOTNOTE</a>)</s>
// <s>British/American English spellings</s>
// <s>Contractions, per MOS</s>
// <s>Time/future issues</s>
// <s>Improve the headingre function to exclude "the" and words in parentheses</s>
// <s>instaview version (somewhat like <a href="../../../p/i/l/User%7EPilaf_4730.html" title="User:Pilaf">User:Pilaf</a>'s, possibly) </s>
</pre>
<p>function replaceFoot(){ // removes the footnotes //temp_mem = document.getElementById(output_PR).value; // document.getElementById(output_PR).value = document.getElementById(output_PR).value.replace(/&lt;ref name='(\w{1,})'&gt;See footnote&lt;\/ref&gt;/gi,"").replace(/&lt;sup&gt;\[\[User:AndyZ\/PRnotes#_note-(.{1,})\|(.{1,})\]\]&lt;\/sup&gt;/gi,""); //// // use link to WP:PR/A's footnotes: "&lt;sup&gt;[[User:AndyZ/User:AndyZ/G#$1|[?]]]&lt;/sup&gt;" //// // document.theForm.switch_foot.value = "Show footnotes"; document.theForm.switch_foot.style.width = 150; }</p>
<p>var footorremove = 0; //if 0, add footnote, else remove them function determineFoot(){</p>
<pre>
    if(!footorremove) replaceNoFoot();
    else replaceFoot();
    footorremove = !footorremove;
</pre>
<p>}</p>
<p>function replaceNoFoot(){ // shows the footnotes else document.getElementById(output_PR).value = foot_mem; document.theForm.switch_foot.value = "Remove footnotes"; document.theForm.switch_foot.style.width = 150; }</p>
<p>function replaceSubstInOutput(xmlreq,data){ document.getElementById(output_PR).replace("{{subst:" + data.message + "}}",xmlreq.responseText.replace(/.*&lt;\/noinclude&gt;/gi,"").replace(/&lt;(\/|)includeonly&gt;/gi,"")); tempPRdata = xmlreq.responseText; }</p>
<p>function errorInReplaceSubst(xmlreq,data){ alert("Error: Unable to locate information at " + data.message); }</p>
<p>// Generally for images in Wikimedia Commons, still looking for method to fix // wpajax.download({url:'<a href="http://en.wikpedia.org/wiki/'+imgName" class="external free" title="http://en.wikpedia.org/wiki/'+imgName" rel="nofollow">http://en.wikpedia.org/wiki/'+imgName</a>, // onSuccess: checkImgLicense, message: "htm," + imgName}); // alert("Error in loading " + data.message.substring(4,data.message.length) + "\n" + xmlreq.responseText);</p>
<pre>
   ' &lt;input type="button" value="Add footnotes" name="switch_foot" onclick="determineFoot();" style="width:150" onMouseOver="window.status=\'Shows footnotes, which usually are links to footnotes on User:AndyZ/PRnotes\'" onMouseOut="window.status=\'\'"&gt; |' +
</pre>
<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../a/n/d/User%7EAndyZ_peerreviewer.js_comment_afb4.html">http://en.wikipedia.org../../../a/n/d/User%7EAndyZ_peerreviewer.js_comment_afb4.html</a>"</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-user"
	       class="selected"	       ><a href="../../../a/n/d/User%7EAndyZ_peerreviewer.js_comment_afb4.html">User page</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../a/n/d/User_talk%7EAndyZ_peerreviewer.js_comment_dab3.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/User:AndyZ/peerreviewer.js/comment">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 22:34, 8 January 2007 by Wikipedia user <a href="../../../a/n/d/User%7EAndyZ_5810.html" title="User:AndyZ">AndyZ</a>. Based on work by Wikipedia user(s) <a href="../../../a/z/p/User%7EAZPR_0ef0.html" title="User:AZPR">AZPR</a>.</li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="User talk:Aarchiba/SVG sanitizer,Fleminra,Jrincayc" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>User talk:Aarchiba/SVG sanitizer - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-3">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">User talk:Aarchiba/SVG sanitizer</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"><span class="subpages">&lt; <a href="../../../a/a/r/User_talk%7EAarchiba_29a9.html" title="User talk:Aarchiba">User talk:Aarchiba</a></span></div>
	    	    <div class="usermessage">You have <a href="../../../1/2/7/User_talk%7E127.0.0.1.html" title="User talk:127.0.0.1">new messages</a> (<a href="../../../1/2/7/User_talk%7E127.0.0.1.html" title="User talk:127.0.0.1">last change</a>).</div>	    <!-- start content -->
	    <p>The best way to do a SVG sanitizer is to create a custom DTD with no event tags or script tags, and then validate against the DTD. That way you only allow known safe tags, as opposed to trying to eliminate unsafe tags. <a href="../../../j/r/i/User%7EJrincayc_4757.html" title="User:Jrincayc">Jrincayc</a> 12:35, 24 August 2005 (UTC)</p>
<p><br />
After fixing the following file (by adding a xmlns:xlink="<a href="http://www.w3.org/1999/xlink" class="external free" title="http://www.w3.org/1999/xlink" rel="nofollow">http://www.w3.org/1999/xlink</a>" declaration to the root svg element), your script seems to transform it into illegal XML with elements from namespaces which have been removed:</p>
<p><a href="http://wiki.services.openoffice.org/twiki/pub/Main/SVGUserExperiences/Topologyanon.svg" class="external free" title="http://wiki.services.openoffice.org/twiki/pub/Main/SVGUserExperiences/Topologyanon.svg" rel="nofollow">http://wiki.services.openoffice.org/twiki/pub/Main/SVGUserExperiences/Topologyanon.svg</a></p>
<p>-- <a href="../../../../de/h/a/u/User%7EHauix_5a79.html" class="extiw" title="de:User:Hauix">Hauix</a> 12:38, 7 October 2005 (UTC).</p>
<p><a name="XSLT.3F" id="XSLT.3F"></a></p>
<h2><span class="editsection">[<a href="../../../a/a/r/User_talk%7EAarchiba_SVG_sanitizer_f0ac.html" title="Edit section: XSLT?">edit</a>]</span> <span class="mw-headline">XSLT?</span></h2>
<p>Just an (incomplete) idea:</p>
<pre>
&lt;?xml version="1.0"?&gt;
&lt;xsl:stylesheet version="1.0"
  xmlns:svg="<a href="http://www.w3.org/2000/svg" class="external free" title="http://www.w3.org/2000/svg" rel="nofollow">http://www.w3.org/2000/svg</a>"
  xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" class="external free" title="http://www.w3.org/1999/XSL/Transform" rel="nofollow">http://www.w3.org/1999/XSL/Transform</a>"&gt;

  &lt;xsl:template match="svg:script"/&gt;

  &lt;xsl:template match="*"&gt;
    &lt;xsl:copy&gt;
      &lt;xsl:for-each select="@*"&gt;
        &lt;xsl:if test="not(name() = 'onabort' or name() = 'onload')"&gt; &lt;!-- etc. --&gt;
          &lt;xsl:copy/&gt;
        &lt;/xsl:if&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</pre>
<p>Could even get the client itself to do the sanitizing by putting a processor instruction at the beginning of the SVG. â€”<a href="../../../f/l/e/User%7EFleminra_45b2.html" title="User:Fleminra">Fleminra</a> 06:17, 29 January 2006 (UTC)</p>

<div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../a/a/r/User_talk%7EAarchiba_SVG_sanitizer_f0ac.html">http://en.wikipedia.org../../../a/a/r/User_talk%7EAarchiba_SVG_sanitizer_f0ac.html</a>"</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-user"
	       	       ><a href="../../../a/a/r/User%7EAarchiba_SVG_sanitizer_a50a.html">User page</a></li><li id="ca-talk"
	       class="selected"	       ><a href="../../../a/a/r/User_talk%7EAarchiba_SVG_sanitizer_f0ac.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/User_talk:Aarchiba/SVG_sanitizer">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 06:18, 29 January 2006 by Wikipedia user <a href="../../../f/l/e/User%7EFleminra_45b2.html" title="User:Fleminra">Fleminra</a>. Based on work by Wikipedia user(s) <a href="../../../j/r/i/User%7EJrincayc_4757.html" title="User:Jrincayc">Jrincayc</a> and Anonymous user(s) of Wikipedia.</li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>

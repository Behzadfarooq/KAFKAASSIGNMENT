<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="User:Ais523/livepreview.js,Bypass your cache" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>User:Ais523/livepreview.js - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-2">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">User:Ais523/livepreview.js</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"><span class="subpages">&lt; <a href="../../../a/i/s/User%7EAis523_9dee.html" title="User:Ais523">User:Ais523</a></span></div>
	    	    	    <!-- start content -->
	    <p><span id="clearyourcache"><b>Note:</b> After saving, you have to <a href="../../../b/y/p/Wikipedia%7EBypass_your_cache_1dae.html" title="Wikipedia:Bypass your cache">bypass your browser's cache</a> to see the changes. <b>Firefox/Mozilla/Safari:</b> hold down <i>Shift</i> while clicking <i>Reload</i> (or press <i>Ctrl-Shift-R</i>), <b>Internet Explorer:</b> press <i>Ctrl-F5</i>, <b>Opera/Konqueror:</b> press <i>F5</i>. 
</span>
</p><pre>// From [[Wikipedia:Wikiproject_User_scripts/Scripts/livepreview.js]]; this is a local version so I can tinker with it. [[User:ais523|ais523]]

// &lt;pre&gt;
/* &lt;nowiki&gt; */
// Last update: 10 Sep 2005
// by Lupin (some demunging and commenting) based on Pilaf's version of
// 21:51, 15 Feb 2005 (UTC)

// Script to embed Live Preview in MediaWiki's edit page
function LivePreviewInstall()
{
 copywarn = document.getElementById('editpage-copywarn');
 if (copywarn != null) {
  var cleaner = &quot;&lt;br style=\\'clear:both;\\' /&gt;&quot;;
  LivePreviewHTML = '&lt;input type=&quot;button&quot; value=&quot;Live Preview&quot;' 
    + ' onclick=&quot;document.getElementById(\'PreviewBox\').innerText = wiki2html(editform.wpTextbox1.value) + \'' 
    + cleaner + '\';&quot; /&gt;';
  LivePreviewHTML += '&lt;div style=&quot;margin-top: 5px; margin-bottom: 5px;'+
    ' padding: 5px; border: 3px double orange;&quot; id=&quot;PreviewBox&quot;&gt;&lt;/div&gt;';
  copywarn.innerHTML = LivePreviewHTML + copywarn.innerHTML;
 }
}

// User options
var wpUserName=wpUserName||'Wikipedian';
var wpUserSignature=wpUserSignature||wpUserName;
var wpShowImages=wpShowImages||true;

// System options
var wpLanguageCode=wpLanguageCode||'en';
var wpInterwikiCodes=wpInterwikiCodes||'ab|aa|af|ak|sq|als|am|ang|ar|an|arc|hy|roa-rup|as|ast|av|ay|az|bm|ba|eu|be|bn|bh|bi|bs|br|bg|my|ca|ch|ce|chr|chy|ny|zh|zh-tw|zh-cn|cho|cv|kw|co|cr|hr|cs|da|dv|nl|dz|en|eo|et|ee|fo|fj|fi|fr|fy|ff|gl|ka|de|got|el|kl|gn|gu|ht|ha|haw|he|hz|hi|ho|hu|is|io|ig|id|ia|ie|iu|ik|ga|it|ja|jv|kn|kr|csb|ks|kk|km|ki|rw|rn|tlh|kv|kg|ko|kj|ku|ky|lo|la|lv|li|ln|lt|jbo|nds|lg|lb|mk|mg|ms|ml|mt|gv|mi|minnan|mr|mh|zh-min-nan|mo|mn|mus|nah|na|nv|ne|se|no|nn|oc|or|om|pi|fa|pl|pt|pa|ps|qu|ro|rm|ru|sm|sg|sa|sc|gd|sr|sh|st|tn|sn|scn|simple|sd|si|sk|sl|so|st|es|su|sw|ss|sv|tl|ty|tg|ta|tt|te|th|bo|ti|tpi|to|tokipona|ts|tum|tr|tk|tw|uk|ur|ug|uz|ve|vi|vo|wa|cy|wo|xh|ii|yi|yo|za|zu';
var wpBaseArticlePath=wpBaseArticlePath||'/wiki/';
var wpMathBasePath=wpMathBasePath||'/math/';
var wpImageBasePath=wpImageBasePath||'http://upload.wikimedia.org/wikipedia/'+wpLanguageCode+'/';
var wpImageFallbackPath=wpImageFallbackPath||'http://upload.wikimedia.org/wikipedia/commons/';
var wpDefaultThumbWidth=wpDefaultThumbWidth||180;
var wpSkinMagnifyClip=wpSkinMagnifyClip||'/skins/common/images/magnify-clip.png';
var wpUserNamespace=wpUserNamespace||'User';
var wpImageNamespace=wpImageNamespace||'Image';
var wpCategoryNamespace=wpCategoryNamespace||'Category';

// Somewhat unpacked code 
function wiki2html(str) {
  str=strip_cr(str);
  var w=new WikiCode();
  w.lines=str.split(/\n/);
  w.parse();
  return w.html;
};

// [[User:Wikipedian|Wikipedian]]
var wpSignature='[['+wpUserNamespace+':'+wpUserName+'|'+wpUserSignature+']]';

// [[Image:summat|frame (must include a pipe)
var wpBlockImage=new RegExp('^\\[\\['+wpImageNamespace+
                            ':.*?\\|.*?(?:frame|thumbnail|thumb|none|right|left|center)',
                            'i');
function WikiCode() {
  this.lines=new Array;
  this.html=new String;

  this._endline=function(str) {
    this.html+=str;
    this.lines.shift();
  };

  this.parse=function() {
    var p=false;
    do {
      if (h_match=this.lines[0].match(/^(={1,6})(.*)\1(.*)$/)) {
        // heading: === foo === bar
        // BUG: bar passes through without being dewikified
        // eg === foo === ''bar''
        p=false;
        this._endline('&lt;h'+h_match[1].length+'&gt;'+_parse_inline_nowiki(h_match[2])+
                      '&lt;/h'+h_match[1].length+'&gt;'+h_match[3]);
      } else if (this.lines[0].match(/^[*#:;]/)) {
        // list element
        p=false;
        this._parse_list();
      } else if (this.lines[0].charAt(0)==' ') {
        // pre (indicated by leading whitespace)
        p=false;
        this._parse_pre();
      } else if (this.lines[0].substr(0,2)=='{|') {
        // start of wikitable
        p=false;
        this._parse_table();
      } else if (this.lines[0].match(/^----+$/)) {
        //  hr
        p=false;
        this._endline('&lt;hr/&gt;');
      } else if (this.lines[0].match(/^$/)) { 
        // br
        p=false;
        this._endline('&lt;br/&gt;');
      } else if (this.lines[0].match(wpBlockImage)) {
        // block image
        p=false;
        this._parse_block_image();
      } else { /* fallthrough */
        if (this.lines[0]=='') {
          // blank line
          if ( p=(this.lines.length&gt;1 &amp;&amp; this.lines[1]=='') ) {
            // two blank lines, not at the end
            this._endline('&lt;p&gt;&lt;br /&gt;');}
        } else {
          if (!p) {
            this.html+='&lt;p&gt;';
            p=true;
          }
          this.html+=_parse_inline_nowiki(this.lines[0])+' ';
        }
        this.lines.shift();
      } /* end fallthrough */
    } while (this.lines.length);
  }; /* end this.parse */

  this._parse_list=function() {
    // called when first line matches /^[*#:;]/
    var prev=new String;
    var l_match,imatch,dt_match;
    while (this.lines.length &amp;&amp; (l_match=this.lines[0].match(/^([*#:;]+)(.*)$/))) {
      this.lines.shift();
      imatch=str_imatch(prev,l_match[1]);
      for(var i=prev.length-1;i&gt;=imatch;i--) {
        if (prev.charAt(i)=='*') {
          this.html+='&lt;/ul&gt;';
        } else if (prev.charAt(i)=='#') {
          this.html+='&lt;/ol&gt;';
        } else {
          this.html+='&lt;/d'+((prev.charAt(i)==';')?'t':'d')+'&gt;';
          switch(l_match[1].charAt(i)) {
            case'':case'*':case'#':
              this.html+='&lt;/dl&gt;';
          }
        }
      }
      for(var i=imatch;i&lt;l_match[1].length;i++) {
        if (l_match[1].charAt(i)=='*') {
          this.html+='&lt;ul&gt;';
        } else if (l_match[1].charAt(i)=='#') {
          this.html+='&lt;ol&gt;';
        } else {
          switch(prev.charAt(i)) {
            case'':case'*':case'#':
              this.html+='&lt;dl&gt;';
          }
          this.html+='&lt;d'+((l_match[1].charAt(i)==';')?'t':'d')+'&gt;';
        }
      }
      switch(l_match[1].charAt(l_match[1].length-1)) {
        case'*':case'#':
          this.html+='&lt;li&gt;'+_parse_inline_nowiki(l_match[2]);
        break;
        case';':
          if (dt_match=l_match[2].match(/(.*?) (:.*?)$/)) {
            this.html+=_parse_inline_nowiki(dt_match[1]);
            this.lines.unshift(dt_match[2]);
            break;
          }
        case':':
          this.html+=_parse_inline_nowiki(l_match[2]);
      }
      prev=l_match[1];
    } /* while */
    for(i=prev.length-1;i&gt;=0;i--) {
      if (prev.charAt(i)=='*') {
        this.html+='&lt;/ul&gt;';
      } else if (prev.charAt(i)=='#') {
        this.html+='&lt;/ol&gt;';
      } else { 
        this.html+='&lt;/d'+((prev.charAt(i)==';')?'t':'d')+'&gt;&lt;/dl&gt;';
      }
    }
  }; /* end this._parse_list */
  
  this._parse_table=function() {
    var table_match;
    if (table_match=this.lines[0].match(/^\{\|( .*)$/)) {
      this._endline('&lt;table'+table_match[1]+'&gt;');
    } else this._endline('&lt;table&gt;');
    do { 
      if (this.lines[0].charAt(0)=='|') {
        switch(this.lines[0].charAt(1)) {
          case'}':
            this._endline('&lt;/table&gt;');
          return;
          case'-':
            this._endline('&lt;tr '+this.lines[0].match(/\|-*(.*)/)[1]+'&gt;');
          break;
        default:
          this._parse_table_data();
        }
      } else if (this.lines[0].charAt(0)=='!') {
        this._parse_table_data();
      } else { 
        this.lines.shift();
      }
    } while (this.lines.length) 
  }; /* end this._parse_table */

  this._parse_table_data=function() {
    var td_match,td_line;
    // the next line really confuses emacs c-mode indentation
    td_match=this.lines.shift().match(/^(\|\+|\||!)((?:([^[|]*?)\|(?!\|))?(.*))$/);
    if (td_match[1]=='|+') {
      this.html+='&lt;caption';
    } else { 
      this.html+='&lt;t'+((td_match[1]=='|')?'d':'h'); 
    }
    if (typeof td_match[3]!='undefined') {
      this.html+=' '+td_match[3];
      td_line=td_match[4].split('||');
    } else {
      td_line=td_match[2].split('||');
    }
    this.html+='&gt;';while(td_line.length&gt;1) {
      this.lines.unshift(td_match[1]+td_line.pop());
    }
    this.html+=_parse_inline_nowiki(td_line[0]);
    var td=new WikiCode;
    var table_count=0;
    while(this.lines.length) {
      if (this.lines[0].charAt(0)=='|') {
        if (table_count==0) break;
        else if (this.lines[0].charAt(1)=='}') table_count--;
      } else if (this.lines[0].charAt(0)=='!'&amp;&amp;table_count==0) { break; } 
      else if (this.lines[0].substr(0,2)=='{|')
        table_count++;td.lines.push(this.lines.shift());
    }
    if (td.lines.length) {
      td.parse();
    }
    this.html+=td.html;
  }; /* end this._parse_table_data */ 

  this._parse_pre=function() {
    this.html+='&lt;pre&gt;';
    do {
      this._endline(_parse_inline_nowiki(this.lines[0]
                                         .substring(1,this.lines[0].length))+&quot;\n&quot;);
    } while(this.lines.length&amp;&amp;this.lines[0].charAt(0)==' ');
    this.html+='&lt;/pre&gt;';
  };
    
  this._parse_block_image=function() {
    this.html+=_parse_image(this.lines.shift());
  };

}; /* end WikiCode constructor */

function _parse_image(str) {
  var attr=str.substring(wpImageNamespace.length+3,str.length-2).split(/\s*\|\s*/);
  var filename=attr[0];
  var caption=attr[attr.length-1];
  var width,w_match;
  var thumb=false;
  var frame=false;
  var center=false;
  var align='';
  var html='';
  do {
    if (w_match=attr[0].match(/^(\d*)px$/)) {
      width=w_match[1];
    } else switch(attr[0]) {
      case'thumb':case'thumbnail':
        thumb=true;
      case'frame':
        frame=true;
      break;
      case'none':case'right':case'left':
        center=false;
      align=attr[0];
      break;
      case'center':
        center=true;
      align='none';
    }
    attr.shift();
  } while (attr.length);
  if (frame) {
    if (align=='') align='right';
    html+=&quot;&lt;div class='thumb t&quot;+align+&quot;'&gt;&quot;;
    if (thumb) {
      if (!width) width=wpDefaultThumbWidth;
      html+=&quot;&lt;div style='width:&quot; + (2+parseInt(width)) + &quot;px;'&gt;&quot;;
      html+=_make_image(filename,caption,width);
      html+=&quot;&lt;div class='thumbcaption'&gt;&quot;  
        + &quot;&lt;div class='magnify' style='float:right'&gt;&lt;a href='&quot;
        + wpBaseArticlePath+wpImageNamespace+':'+filename
        + &quot;' class='internal' title='Enlarge'&gt;&lt;img src='&quot;
        + wpSkinMagnifyClip+&quot;' /&gt;&lt;/a&gt;&lt;/div&gt;&quot;+_parse_inline_nowiki(caption)
        + &quot;&lt;/div&gt;&quot;;
    } else {
      html+='&lt;div&gt;';
      html+=_make_image(filename,caption);
      html+=&quot;&lt;div class='thumbcaption'&gt;&quot;+_parse_inline_nowiki(caption)+&quot;&lt;/div&gt;&quot;;
    }
    html+='&lt;/div&gt;&lt;/div&gt;';
  } else if (align!='') {
    html+=&quot;&lt;div class='float&quot;+align+&quot;'&gt;&lt;span&gt;&quot;
      +_make_image(filename,caption,width)
      +&quot;&lt;/span&gt;&lt;/div&gt;&quot;;
  } else {
    return _make_image(filename,caption,width);
  }
  if (center) {
    return&quot;&lt;div class='center'&gt;&quot;+html+'&lt;/div&gt;';
  } else {return html;}
};

this._parse_inline_nowiki=function(str) {
  var start,lastend=0;
  var substart=0,nestlev=0,open,close,subloop;
  var html='';
  while (-1!=(start=str.indexOf('&lt;'+'nowiki&gt;',substart))) {
    html+=_parse_inline_wiki(str.substring(lastend,start));
    start+=8;
    substart=start;
    subloop=true;
    do { 
      open=str.indexOf('&lt;'+'nowiki&gt;',substart);
      close=str.indexOf('&lt;/nowiki&gt;',substart);
      if (close&lt;=open||open==-1) {
        if (close==-1) {
          return html+html_entities(str.substr(start));
        }
        substart=close+9;
        if (nestlev) {
          nestlev--;
        } else { 
          lastend=substart;
          html+=html_entities(str.substring(start,lastend-9));subloop=false;
        }
      } else {
        substart=open+8;
        nestlev++;
      }
    } while(subloop);
  }
  return html+_parse_inline_wiki(str.substr(lastend));
};

function _make_image(filename,caption,width) {
  filename=filename.charAt(0).toUpperCase()+filename.substr(1);
  filename=filename.replace(/ /g,'_');
  var md5=hex_md5(filename);
  var source=md5.charAt(0)+'/'+md5.substr(0,2)+'/'+filename;
  var img;
  if (wpShowImages) {
    if (width) {
      width=&quot;width='&quot;+width+&quot;px'&quot;;
    }
    img=&quot;&lt;img onerror='this.onerror=null;this.src=\&quot;&quot;
      +wpImageFallbackPath+source+&quot;\&quot;;' src='&quot;
      +wpImageBasePath+source+&quot;' alt='&quot;+caption+&quot;' &quot;+width+&quot;/&gt;&quot;;
  } else {
    img=wpImageNamespace+':'+filename
      +&quot; &lt;em style='color:red;'&gt;(images disabled)&lt;/em&gt;&quot;;
  }
  caption=_strip_inline_wiki(caption);
  return &quot;&lt;a class='image' title='&quot;+caption+&quot;' href='&quot;
    +wpBaseArticlePath+wpImageNamespace+':'
    +filename+&quot;'&gt;&quot;+img+&quot;&lt;/a&gt;&quot;;
};

function _parse_inline_images(str) {
  var start,substart=0,nestlev=0;
  var loop,close,open,wiki,html;
  while(-1!=(start=str.indexOf('[[',substart))) {
    if (str.substr(start+2).match(RegExp('^'+wpImageNamespace+':','i'))) {
      loop=true;substart=start;
      do { 
        substart+=2;close=str.indexOf(']]',substart);
        open=str.indexOf('[[',substart);
        if (close&lt;=open||open==-1) {
          if (close==-1) return str;
          substart=close;
          if (nestlev) {
            nestlev--;
          } else {
            wiki=str.substring(start,close+2);
            html=_parse_image(wiki);
            str=str.replace(wiki,html);substart=start+html.length;loop=false;
          }
        } else {
          substart=open;nestlev++;
        }
      } while(loop);
    } else {
      break;
    }
  } /* end while loop */
  return str;
};

function _parse_inline_wiki(str) {
  var aux_match,math_md5;
  str=_parse_inline_images(str);
  while(aux_match=str.match(/&lt;(?:)math&gt;(.*?)&lt;\/math&gt;/i)) {
    math_md5=hex_md5(aux_match[1]);
    str=str.replace(aux_match[0],&quot;&lt;img src='&quot;+wpMathBasePath+math_md5+'.png'+&quot;' /&gt;&quot;);
  }
  return str
    .replace(/'''''(.*?)''(.*?)'''/g,'&lt;strong&gt;&lt;em&gt;$1&lt;/em&gt;$2&lt;/strong&gt;')
    .replace(/'''''(.*?)'''(.*?)''/g,'&lt;em&gt;&lt;strong&gt;$1&lt;/strong&gt;$2&lt;/em&gt;')
    .replace(/'''(.*?)''(.*?)'''''/g,'&lt;strong&gt;$1&lt;em&gt;$2&lt;/em&gt;&lt;/strong&gt;')
    .replace(/'''(.*?)'''/g,'&lt;strong&gt;$1&lt;/strong&gt;')
    .replace(/''(.*?)''/g,'&lt;em&gt;$1&lt;/em&gt;')
    .replace(/~{5}(?!~)/g,Date())
    .replace(/~{4}(?!~)/g,wpSignature+' '+Date())
    .replace(/~{3}(?!~)/g,wpSignature)
    .replace(RegExp('\\[\\[:((?:'+wpCategoryNamespace
                    +'|'+wpInterwikiCodes+'):.*?)\\]\\]','gi'),
             &quot;&lt;a href='&quot;+wpBaseArticlePath+&quot;$1'&gt;$1&lt;/a&gt;&quot;)
    .replace(RegExp('\\[\\[(?:'+wpCategoryNamespace
                    +'|'+wpInterwikiCodes+'):.*?\\]\\]','gi')
             ,'')
    .replace(/\[\[([^|]*?)\]\](\w*)/g,&quot;&lt;a href='&quot;+wpBaseArticlePath+&quot;$1'&gt;$1$2&lt;/a&gt;&quot;)
    .replace(/\[\[(.*?)\|([^\]]+?)\]\](\w*)/g,
             &quot;&lt;a href='&quot;+wpBaseArticlePath+&quot;$1'&gt;$2$3&lt;/a&gt;&quot;)
    .replace(/\[\[([^\]]*?:)?(.*?)( *\(.*?\))?\|\]\]/g,
             &quot;&lt;a href='&quot;+wpBaseArticlePath+&quot;$1$2$3'&gt;$2&lt;/a&gt;&quot;)
    .replace(/\[(http|news|ftp|mailto|gopher|irc):(\/*)([^\]]*?) (.*?)\]/g,
             &quot;&lt;a href='$1:$2$3'&gt;$4&lt;/a&gt;&quot;)
    .replace(/\[http:\/\/(.*?)\]/g,&quot;&lt;a href='http://$1'&gt;[#]&lt;/a&gt;&quot;)
    .replace(/\[(news|ftp|mailto|gopher|irc):(\/*)(.*?)\]/g,
             &quot;&lt;a href='$1:$2$3'&gt;$1:$2$3&lt;/a&gt;&quot;)
    .replace(/(^| )(http|news|ftp|mailto|gopher|irc):(\/*)([^ $]*)/g,
             &quot;$1&lt;a href='$2:$3$4'&gt;$2:$3$4&lt;/a&gt;&quot;)
    .replace('__NOTOC__','')
    .replace('__NOEDITSECTION__','');
};
 
function _strip_inline_wiki(str) {
  return str.replace(/\[\[[^\]]*\|(.*?)\]\]/g,'$1')
    .replace(/\[\[(.*?)\]\]/g,'$1')
    .replace(/''(.*?)''/g,'$1');
};

function max(a,b) {
  if (a&gt;b)return a;
  else return b;
};
 
function min(a,b) {
  if (a&lt;b)return a;
  else return b;
};

function str_imatch(str_a,str_b) {
  var lim=min(str_a.length,str_b.length);
  for(var i=0;i&lt;lim;i++) {
    if (str_a.charAt(i)!=str_b.charAt(i))
      return i;
  }
  return i;
};

function strip_cr(str) {
  return str.replace(/\n\r/g,&quot;\n&quot;).replace(/\r/g,'');
};

function html_entities(str) {
  return str.replace(/&amp;/g,&quot;&amp;amp;&quot;)
    .replace(/&lt;/g,&quot;&amp;lt;&quot;)
    .replace(/&gt;/g,&quot;&amp;gt;&quot;);
};
 

/* start md5 nonsense */
 var chrsz=8;var hex_tab=&quot;0123456789abcdef&quot;;function hex_md5(s) {
return binl2hex(core_md5(str2binl(s),s.length*chrsz));};function core_md5(x,len)
{x[len&gt;&gt;5]|=0x80&lt;&lt;((len)%32);x[(((len+64)&gt;&gt;&gt;9)&lt;&lt;4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i&lt;x.length;i+=16)
  {var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd);};return Array(a,b,c,d);};function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b);};function md5_ff(a,b,c,d,x,s,t){return md5_cmn((b&amp;c)|((~b)&amp;d),a,b,x,s,t);};function md5_gg(a,b,c,d,x,s,t){return md5_cmn((b&amp;d)|(c&amp;(~d)),a,b,x,s,t);};function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t);};function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|(~d)),a,b,x,s,t);};function safe_add(x,y){var lsw=(x&amp;0xFFFF)+(y&amp;0xFFFF);var msw=(x&gt;&gt;16)+(y&gt;&gt;16)+(lsw&gt;&gt;16);return(msw&lt;&lt;16)|(lsw&amp;0xFFFF);};function bit_rol(num,cnt){return(num&lt;&lt;cnt)|(num&gt;&gt;&gt;(32-cnt));};function str2binl(str){var bin=Array();var mask=(1&lt;&lt;chrsz)-1;for(var i=0;i&lt;str.length*chrsz;i+=chrsz)bin[i&gt;&gt;5]|=(str.charCodeAt(i/chrsz)&amp;mask)&lt;&lt;(i%32);return bin;};function binl2hex(binarray){var str='';for(var i=0;i&lt;binarray.length*4;i++){str+=hex_tab.charAt((binarray[i&gt;&gt;2]&gt;&gt;((i%4)*8+4))&amp;0xF)+hex_tab.charAt((binarray[i&gt;&gt;2]&gt;&gt;((i%4)*8))&amp;0xF);}return str;}; 
  /* end md5 nonsense */

/* &lt;/nowiki&gt; */
// &lt;/pre&gt;

addOnloadHook(LivePreviewInstall);
</pre><div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../a/i/s/User%7EAis523_livepreview.js_dce5.html">http://en.wikipedia.org../../../a/i/s/User%7EAis523_livepreview.js_dce5.html</a>"</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-user"
	       class="selected"	       ><a href="../../../a/i/s/User%7EAis523_livepreview.js_dce5.html">User page</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../a/i/s/User_talk%7EAis523_livepreview.js_7ffb.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/User:Ais523/livepreview.js">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 10:27, 25 September 2006 by Wikipedia user <a href="../../../a/i/s/User%7EAis523_9dee.html" title="User:Ais523">Ais523</a>. </li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>

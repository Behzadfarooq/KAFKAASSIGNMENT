<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    		<meta name="keywords" content="User:Achille/allquarls.js,Bypass your cache" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (English)" />
		<link rel="copyright" href="../../../COPYING.html" />
    <title>User:Achille/allquarls.js - Wikipedia, the free encyclopedia</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../skins/htmldump/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/md5.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/utf8.js"></script>
    <script type="text/javascript" src="../../../skins/htmldump/lookup.js"></script>
    <script type="text/javascript" src="../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../raw/MediaWiki%7ECommon.css";
@import "../../../raw/MediaWiki%7EMonobook.css";
@import "../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="ns-2">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">User:Achille/allquarls.js</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
	    <div id="contentSub"><span class="subpages">&lt; <a href="../../../a/c/h/User%7EAchille_0ac9.html" title="User:Achille">User:Achille</a></span></div>
	    	    	    <!-- start content -->
	    <p><span id="clearyourcache"><b>Note:</b> After saving, you have to <a href="../../../b/y/p/Wikipedia%7EBypass_your_cache_1dae.html" title="Wikipedia:Bypass your cache">bypass your browser's cache</a> to see the changes. <b>Firefox/Mozilla/Safari:</b> hold down <i>Shift</i> while clicking <i>Reload</i> (or press <i>Ctrl-Shift-R</i>), <b>Internet Explorer:</b> press <i>Ctrl-F5</i>, <b>Opera/Konqueror:</b> press <i>F5</i>. 
</span>
</p><pre>// &lt;pre&gt;&lt;nowiki&gt;
// User:Quarl/util.js - miscellaneous utility functions for Wikipedia user scripts

// quarl 2006-01-09 initial version

// 

/////////////////////////////////////////////////////////////
// STRING UTILITY FUNCTIONS

function trimspaces(s) {
    if (!s) return s;
    s = s.replace(/^ +/,'');
    s = s.replace(/ +$/,'');
    return s;
}

function string_quote_escape(str) {
    if (!str) return str;
    return &quot;'&quot; + str.replace(/\'/g, '\\\'').replace(/\%27/g, '\\\'') + &quot;'&quot;;
}

// wiki article name escaping
function wpaescape(s) {
    // Need to escape '+'; don't escape ':'
    return escape(s.replace(/ /g,'_')).replace(/[+]/g, '%2B').replace(/%3A/,':');
}

function url_getpath(s) {
    return s.replace(/^http:\/\/[^/]+/, '');
}

////////////////////////////////////////////////////////////
// DOM UTILITY FUNCTIONS
function getElementsByClass(searchClass,node,tag) {
/* This script and many more are available free online at
The JavaScript Source :: http://javascript.internet.com
Created by: Dustin Diaz :: http://www.dustindiaz.com/ */
  var classElements = new Array();
  if (node == null)
    node = document;
  if (tag == null)
    tag = '*';
  var els = node.getElementsByTagName(tag);
  var elsLen = els.length;
  var pattern = new RegExp(&quot;(^|\\s)&quot;+searchClass+&quot;(\\s|$)&quot;);
  for (i = 0, j = 0; i &lt; elsLen; i++) {
    if (pattern.test(els[i].className) ) {
      classElements[j] = els[i];
      j++;
    }
  }
  return classElements;
}

function add_before(node, newnode) {
    node.parentNode.insertBefore(newnode, node);
    return newnode;
}

function add_after(node, newnode) {
    node.parentNode.insertBefore(newnode, node.nextSibling);
    return newnode;
}

function findHref(href) {
    href = escape(href);
    var links=document.links;
    for(i=0;i&lt;links.length;++i) {
        // unescape and reescape to ensure canonical escaping
        if (escape(unescape(links[i].href)) == href) return links[i];
    }
    return null;
}

function insertNode(node, newNode) {
    if (!node) return null;

    node.parentNode.replaceChild(newNode, node);
    newNode.appendChild(node);
    return newNode;
}

function hookEventObj(obj, hookName, hookFunct) {
    if (!obj) return;

    if (obj.addEventListener)
        obj.addEventListener(hookName, hookFunct, false);
    else if (obj.attachEvent)
        obj.attachEvent(&quot;on&quot; + hookName, hookFunct);
}

// AJAX functions

function HTTPClient() {
    var http;
    if(window.XMLHttpRequest) {
        http = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        try {
            http = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);
        } catch (e) {
            try {
                http = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
            } catch (E) {
                http = false;
            }
        }
    }
    return http;
}

function asyncDownloadXML(url, callback) {
    var xmlhttp = HTTPClient();
    if (!xmlhttp) return null;
    // add optional arguments
    for (var i = 2; i+1 &lt; arguments.length; i += 2) {
        xmlhttp[arguments[i]] = arguments[i+1];
    }
    xmlhttp.open(&quot;GET&quot;, url, true);
    xmlhttp.overrideMimeType('text/xml');
    // using onload instead of onreadystatechange allows multiple asynchronous requests
    xmlhttp.onload = function(event) { 
        var req = event.target;
        if (req.readyState == 4) callback(req);
    };
    xmlhttp.send(null);
    return xmlhttp;
}

//

// 

// User:Quarl/md5.js

// md5 functions, factored from godmode-light.js

// 

// -----------------------------------------------------------------------------
// MD5 hash calculator
// -----------------------------------------------------------------------------
// Version 2.1 Copyright (C) Paul Johnston 1999 - 2002.
// Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
// Distributed under the BSD License
// See http://pajhome.org.uk/crypt/md5 for more info.
// -----------------------------------------------------------------------------
var hexcase = 0;
var b64pad  = &quot;&quot;;
var chrsz   = 8;

function hex_md5(s){ return binl2hex(core_md5(str2binl(s), s.length * chrsz));}

function core_md5(x, len)
{
  x[len &gt;&gt; 5] |= 0x80 &lt;&lt; ((len) % 32);
  x[(((len + 64) &gt;&gt;&gt; 9) &lt;&lt; 4) + 14] = len;

  var a =  1732584193;
  var b = -271733879;
  var c = -1732584194;
  var d =  271733878;

  for(var i = 0; i &lt; x.length; i += 16)
  {
    var olda = a;
    var oldb = b;
    var oldc = c;
    var oldd = d;

    a = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936); d = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586); c = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819); b = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330); a = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897); d = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426); c = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341); b = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983); a = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416); d = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417); c = md5_ff(c, d, a, b, x[i+10], 17, -42063); b = md5_ff(b, c, d, a, x[i+11], 22, -1990404162); a = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682); d = md5_ff(d, a, b, c, x[i+13], 12, -40341101); c = md5_ff(c, d, a, b, x[i+14], 17, -1502002290); b = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);

    a = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510); d = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632); c = md5_gg(c, d, a, b, x[i+11], 14,  643717713); b = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302); a = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691); d = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083); c = md5_gg(c, d, a, b, x[i+15], 14, -660478335); b = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848); a = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438); d = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690); c = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961); b = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501); a = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467); d = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784); c = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473); b = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);

    a = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558); d = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463); c = md5_hh(c, d, a, b, x[i+11], 16,  1839030562); b = md5_hh(b, c, d, a, x[i+14], 23, -35309556); a = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060); d = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353); c = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632); b = md5_hh(b, c, d, a, x[i+10], 23, -1094730640); a = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174); d = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222); c = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979); b = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189); a = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487); d = md5_hh(d, a, b, c, x[i+12], 11, -421815835); c = md5_hh(c, d, a, b, x[i+15], 16,  530742520); b = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);

    a = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844); d = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415); c = md5_ii(c, d, a, b, x[i+14], 15, -1416354905); b = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055); a = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571); d = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606); c = md5_ii(c, d, a, b, x[i+10], 15, -1051523); b = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799); a = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359); d = md5_ii(d, a, b, c, x[i+15], 10, -30611744); c = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380); b = md5_ii(b, c, d, a, x[i+13], 21,  1309151649); a = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070); d = md5_ii(d, a, b, c, x[i+11], 10, -1120210379); c = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259); b = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);

    a = safe_add(a, olda);
    b = safe_add(b, oldb);
    c = safe_add(c, oldc);
    d = safe_add(d, oldd);
  }
  return Array(a, b, c, d);

}

function md5_cmn(q, a, b, x, s, t) { return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s),b); }
function md5_ff(a, b, c, d, x, s, t) { return md5_cmn((b &amp; c) | ((~b) &amp; d), a, b, x, s, t); }
function md5_gg(a, b, c, d, x, s, t) { return md5_cmn((b &amp; d) | (c &amp; (~d)), a, b, x, s, t); }
function md5_hh(a, b, c, d, x, s, t) { return md5_cmn(b ^ c ^ d, a, b, x, s, t); }
function md5_ii(a, b, c, d, x, s, t) { return md5_cmn(c ^ (b | (~d)), a, b, x, s, t); }

function safe_add(x, y)
{
  var lsw = (x &amp; 0xFFFF) + (y &amp; 0xFFFF);
  var msw = (x &gt;&gt; 16) + (y &gt;&gt; 16) + (lsw &gt;&gt; 16);
  return (msw &lt;&lt; 16) | (lsw &amp; 0xFFFF);
}

function bit_rol(num, cnt)
{
  return (num &lt;&lt; cnt) | (num &gt;&gt;&gt; (32 - cnt));
}

function str2binl(str)
{
  var bin = Array();
  var mask = (1 &lt;&lt; chrsz) - 1;
  for(var i = 0; i &lt; str.length * chrsz; i += chrsz)
    bin[i&gt;&gt;5] |= (str.charCodeAt(i / chrsz) &amp; mask) &lt;&lt; (i%32);
  return bin;
}

function binl2hex(binarray)
{
  var hex_tab = hexcase ? &quot;0123456789ABCDEF&quot; : &quot;0123456789abcdef&quot;;
  var str = &quot;&quot;;
  for(var i = 0; i &lt; binarray.length * 4; i++)
  {
    str += hex_tab.charAt((binarray[i&gt;&gt;2] &gt;&gt; ((i%4)*8+4)) &amp; 0xF) +
           hex_tab.charAt((binarray[i&gt;&gt;2] &gt;&gt; ((i%4)*8  )) &amp; 0xF);
  }
  return str;
}


// 

// based on http://en.wikipedia.org/wiki/Wikipedia:WikiProject_User_scripts/Scripts/Add_LI_link

// 

function getTabActions() {
    return document.getElementById('p-cactions').getElementsByTagName('ul')[0];
}

function getToolbox() {
    return document.getElementById('p-tb').getElementsByTagName('ul')[0];
}

function addTab(url, name, id, title, key) {
    addlilink(getTabActions(), url, name, id, title, key);
}

function addToolboxLink(url, name, id, title, key) {
    addlilink(getToolbox(), url, name, id, title, key);
}

function addlilink(tabs, url, name, id, title, key){
    var na = document.createElement('a');
    na.href = url;
    na.appendChild(document.createTextNode(name));
    var li = document.createElement('li');
    if(id) li.id = id;
    li.appendChild(na);
    tabs.appendChild(li);
    if(id &amp;&amp; (key || title)) {
        ta[id] = [(key||''), (title||'')];
    }
    // re-render the title and accesskeys from existing code in wikibits.js
    akeytt();
    return li;
}

// 

// User:Quarl/wikipage.js - &quot;WikiPage&quot; class for page name, etc. functionality

// requires: util.js

// Suppose we are editing [[Template talk:Foo bar 'blah']].
//   editingP:             true;

// wikiPage is a pre-initialized global variable using the current page's canonical URL.
// It uses the &quot;Retrieved from&quot; page hyperlink which is robust against redirections, editing, special characters, special pages.
//
//   wikiPage.url:         &quot;http://en.wikipedia.org/wiki/Template_talk:Foo_bar_%27blah%27&quot;
//   wikiPage.qurl:        &quot;http://en.wikipedia.org/w/index.php?title=Template_talk:Foo_bar_%27blah%27&quot;
//   wikiPage.page:        &quot;Template talk:Foo bar 'blah'&quot;
//   wikiPage.article:     &quot;Foo bar 'blah'&quot;
//   wikiPage.namespace:   &quot;Template talk&quot;
//   wikiPage.namespaceNT: &quot;Template&quot;
//   wikiPage.talkP:       true
//   wikiPage.nsTemplateP: true
//   wikiPage.nsMainP:     false
//   wikiPage.nsUserP:     false
//   wikiPage.nsCategoryP: false
//   wikiPage.nsSpecialP:  false
//   wikiPage.nsProjectP:  false    // (namespace &quot;Wikipedia&quot;)

// To create new WikiPage object from a URL:
//   var wp = new WikiPage(&quot;http://en.wikipedia.org/wiki/Article_Name&quot;);
// To create a new WikiPage object from a page name:
//   var wp = new WikiPage(null, 'Article Name');

// 

/*
&lt;div class=&quot;printfooter&quot;&gt;
Retrieved from &quot;&lt;a href=&quot;http://en.wikipedia.org/wiki/Albert_Einstein&quot;&gt;http://en.wikipedia.org/wiki/Albert_Einstein&lt;/a&gt;&quot;&lt;/div&gt;
*/

// the &quot;retrieved from&quot; text contains the canonical article URL (even if we're looking at an edit or history page)
function getCanonPageURL0() {
    return getElementsByClass(&quot;printfooter&quot;, null, 'div')[0].getElementsByTagName('a')[0].href;
}

function getUsername0() {
    // read username from pt-userpage link.
    // &lt;li id=&quot;pt-userpage&quot;&gt;&lt;a href=&quot;/wiki/User:Quarl&quot;&gt;Quarl&lt;/a&gt;&lt;/li&gt;
    return document.getElementById('pt-userpage').getElementsByTagName('a')[0].text;
}

function WikiPage(url,page) {
    if (!(this instanceof WikiPage)) return new WikiPage(url,page);
    if (url) {
        url = &quot;&quot; + url;
        if (url.match(/^(?:http:\/\/en.wikipedia.org)?\/wiki\//)) {
            this.pageQuoted = RegExp.rightContext;
        } else if (url.match(/^(?:http:\/\/en.wikipedia.org)?\/w\/index.php\?title=([^&amp;]+)/)) {
            this.pageQuoted = RegExp.$1;
        } else {
            alert(&quot;WikiPage: Couldn't parse page name from url '&quot;+url+&quot;'&quot;); 
            return;
        }
        this.page = wpadecode(this.pageQuoted);
    } else if (page) {
        this.page = page.replace(/_/g, ' ');
        this.pageQuoted = wpaescape(page);
    } else {
        alert(&quot;WikiPage: must specify url or page&quot;); return; 
    }
    this.url = 'http://en.wikipedia.org/wiki/' + this.pageQuoted;
    this.qurl = 'http://en.wikipedia.org/w/index.php?title=' + this.pageQuoted;

    if (this.page.match(/:/)) {
        this.namespace = RegExp.leftContext;
        this.article = RegExp.rightContext;
    } else {
        this.namespace = ''; // (main)
        this.article = this.page;
    }

    if (this.namespace == 'Talk') {
        this.talkP = true;
        this.namespaceNT = '';
    } else if (this.namespace.match(/ talk$/)) {
        this.talkP = true;
        this.namespaceNT = RegExp.leftContext;
    } else {
        this.talkP = false;
        this.namespaceNT = this.namespace;
    }

    if (this.article.match(/\//)) {
        this.superarticle = RegExp.leftContext;
        this.subarticle = RegExp.rightContext;
    } else {
        this.superarticle = this.article;
        this.subarticle = '';
    }

    this.nsMainP = (this.namespaceNT == '');
    this.nsSpecialP = (this.namespaceNT == 'Special');
    this.nsUserP = (this.namespaceNT == 'User');
    this.nsTemplateP = (this.namespaceNT == 'Template');
    this.nsCategoryP = (this.namespaceNT == 'Category');
    this.nsProjectP = (this.namespaceNT == 'Wikipedia');
    this.nsHelpP = (this.namespaceNT == 'Help');
    this.nsImageP = (this.namespaceNT == 'Image');
    this.nsCategoryP = (this.namespaceNT == 'Category');

    this.talkPage = function() {
        if (this.talkP) { return this; }
        else if (this.namespaceNT == '') { return new WikiPage(null, 'Talk:'+this.article); }
        else { return new WikiPage(null, this.namespaceNT+' talk:'+this.article); }
    }

    this.notalkPage = function() {
        if (!this.talkP) { return this; }
        else if (this.namespaceNT == '') { return new WikiPage(null, this.article); }
        else { return new WikiPage(null, this.namespaceNT+':'+this.article); }
    }
}

function getUsernameFromLink(link) {
    return link &amp;&amp; (new WikiPage(link)).superarticle;
}

function getRelevantUser0() {
    if (wikiPage.nsUserP) return wikiPage.superarticle;
    if (wikiPage.page == 'Special:Contributions') {
        var cdiv = document.getElementById('contentSub');
        if (cdiv.textContent == &quot;For newbies&quot;) return null;
        return getUsernameFromLink(cdiv.getElementsByTagName('a')[0]);
    }
    return null;
}

function getQueryVars0(){ 
     var res = new Array();
     var pairs = location.search.substring(1).split(&quot;&amp;&quot;); 
     for(var i=0; i &lt; pairs.length; i++){ 
         var pair = pairs[i].split(&quot;=&quot;);
         res[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
     }
     return res; 
}

function initWikiPage() {
    window.wikiPage = new WikiPage(getCanonPageURL0());
    window.username = getUsername0();
    window.relevantUser = getRelevantUser0();
    window.editingP = Boolean(document.forms.editform);    //document.title.match(/^Editing /) 
    window.movepageP = Boolean(document.forms.movepage);
    window.previewP = Boolean(document.getElementById(&quot;wikiPreview&quot;));
    window.historyP = Boolean(document.getElementById(&quot;pagehistory&quot;));
    window.sandboxP = Boolean(window.wikiPage.page.match(/sandbox$/i));
    window.queryVars = getQueryVars0();
}

// DEPRECATED:
function getPname() { return wikiPage.page; }
function getPnameNS() { return wikiPage.namespace; }
function getPnameNoNS() { return wikiPage.article; }
function pageIsSpecial() { return wikiPage.nsSpecialP; }
function get_query_vars() { return queryVars; }

addOnloadHook(initWikiPage);

// obsolete method 1:
/*function getPname0() {
    var z=document.getElementById(&quot;content&quot;).childNodes;
    for (var n=0;n&lt;z.length;n++) { 
        if (z[n].className==&quot;firstHeading&quot;) return z[n].textContent;
    }
}

function getPname1() {
    var t = getPname0();
    t = t.replace(/^Editing /,'');
    t = t.replace(/ \(section\)$/,'');

    return t;
}*/

// obsolete method 2:
/* 
    return document.title.substr(0, document.title.lastIndexOf(' - Wikipedia, the free'));
*/

//

// 

function LZ(x) { return (x&gt;=10||x&lt;0?&quot;&quot;:&quot;0&quot;) + x }

function datestampUTCISO() {
    var d=new Date();
    return &quot;&quot;+d.getUTCFullYear()+&quot;-&quot;+LZ(d.getUTCMonth()+1)+&quot;-&quot;+LZ(d.getUTCDate());
}

function timestampUTCISO() {
    var d=new Date();
    return LZ(d.getUTCHours())+&quot;:&quot;+LZ(d.getUTCMinutes());
}

monthnames = new Array( &quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;);

function datestampYYYYMonthD() {
    var d = new Date();
    return &quot;&quot;+d.getUTCFullYear() + ' ' + monthnames[d.getUTCMonth()] + ' ' + d.getUTCDate();
}

function datestampMonthYYYY() {
    var d = new Date();
    return &quot;&quot;+monthnames[d.getUTCMonth()] + ' ' + d.getUTCFullYear();
}

//

// User:Quarl/autoreplace.js - provides capability to replace strings (regular expressions) in edit boxes on submission.
//    Strings between  ...  are not replaced.

// external entry points:
//    autoreplace_add(&quot;string&quot;, &quot;replacement&quot; || replacement_function);

// quarl 2006-01-04 initial version

// test:
//   javascript:alert(autoreplace_replace_string_nonowiki(&quot;2 x 3  4 x 5  6&quot;, &quot;x&quot;, &quot;XXX&quot;))
//   javascript:alert(autoreplace_replace_strings(&quot;a ~~&quot;+&quot;~~ foo ~~&quot;+&quot;~~&quot;))

// 

autoreplace_on = true;

//autoreplace_on_save = true;
//autoreplace_on_preview = false;
//autoreplace_on_diff = false;

autoreplace_replacements = Array();

function autoreplaceEntry() {
/*
    if (autoreplace_on_save)
        hookEventObj(document.getElementById('wpSave'), 'click', autoreplace_execute);
    if (autoreplace_on_preview)
        hookEventObj(document.getElementById('wpPreview'), 'click', autoreplace_execute);
    if (autoreplace_on_diff)
        hookEventObj(document.getElementById('wpDiff'), 'click', autoreplace_execute);
*/
    hookEventObj(document.editform, 'submit', autoreplace_execute);
}

function hookEventObj(obj, hookName, hookFunct) {
    if (!obj) return;

    if (obj.addEventListener)
        obj.addEventListener(hookName, hookFunct, false);
    else if (obj.attachEvent)
        obj.attachEvent(&quot;on&quot; + hookName, hookFunct);
}

function autoreplace_add(str, replacement) {
    autoreplace_replacements.push([str,replacement]);
}

function autoreplace_f_to_str(t) {
    if (typeof t == 'function') t = t();
    return &quot;&quot;+t;
}

function autoreplace_replace_string(text, str, replacement) {
    return text.replace(new RegExp(str,'g'), replacement);
}

function autoreplace_replace_string_nonowiki(text, str, replacement) {
    var rtext = '';
    while ( text.match(/(?:.|\n)*?&lt;\/nowiki&gt;/) ) {
        // save these before they get clobbered!
        var left = RegExp.leftContext;
        var match = RegExp.lastMatch;
        var right = RegExp.rightContext;

        rtext += autoreplace_replace_string(left, str, replacement) + match;
        text = right;
    }
    rtext += autoreplace_replace_string(text, str, replacement)
    return rtext;
}

function autoreplace_replace_strings(text) {
    if (!text) return text;
    for (i in autoreplace_replacements) {
        r = autoreplace_replacements[i];
        text = autoreplace_replace_string_nonowiki(text, r[0], autoreplace_f_to_str(r[1]));
    }
    return text;
}

function autoreplace_execute() {
    if (!autoreplace_on) return;

    textbox = document.getElementById(&quot;wpTextbox1&quot;);
    if (!textbox) return;
    textbox.value = autoreplace_replace_strings(textbox.value);

    // Since we're submitting a form, we shouldn't get here again.  Disable in case of recurring bugs.
    autoreplace_on = false;
}

addOnloadHook(autoreplaceEntry);

// 
// User:Quarl/automod.js

// requires: wikipage.js, util.js

// based on http://en.wikipedia.org/wiki/User:Jnothman/automod.js

// - added 'amnocreate'
// - fixed escape '+' bug

//

if ((typeof auto_mod_loaded == 'undefined')
    || !auto_mod_loaded) {
auto_mod_loaded = true;
auto_mod_exectd = false;

function am_make_url(title, before, after, summary) {
    return 'http://en.wikipedia.org/w/index.php?title='+wpaescape(title)+
        '&amp;action=edit'+
        '&amp;amaddbefore='+escape(before)+'&amp;amaddafter='+escape(after)+
        '&amp;amsummary='+escape(summary);
}

function auto_mod() {
    if (auto_mod_exectd)
        return false;
    auto_mod_exectd = true;

    if (queryVars['action']=='edit') {
      if (queryVars['amnull']) {
        document.getElementById('editform').submit();
        return true;
      }
      if (queryVars['amaddafter'] || queryVars['amaddbefore'] || queryVars['amreplace']) {
        var summ_el = document.getElementById('wpSummary');
        if (summ_el.value != '' &amp;&amp; summ_el.value.substr(summ_el.value.length - 3, 3) != '*/ ') {
            // have already added summary
            return true;
        }
        var text = document.getElementById('wpTextbox1');
        if (queryVars['amnocreate'] &amp;&amp; ! text.value) {
            alert(&quot;Error!  Page is empty; refusing to create.&quot;);
            return false;
        }
        if (queryVars['amclear'])
            text.value = '';
        if (queryVars['amfind'] &amp;&amp; queryVars['amreplace'])
            text.value = text.value.replace(new RegExp(queryVars['amfind'], &quot;g&quot;), queryVars['amreplace']);
        if (queryVars['amaddafter']) {
            if (text.value.charAt(text.value.length-1) != '\n')
                text.value += '\n';
            text.value += queryVars['amaddafter'];
        }
        if (queryVars['amaddbefore']) {
            if (text.value.charAt(0) != '\n')
                text.value = '\n' + text.value;
            text.value = queryVars['amaddbefore'] + text.value;
        }
        summ_el.value += (queryVars['amsummary'] || ' ');
        document.getElementById('editform').submit();
      }
      return true;
    }
    return false;
}

addOnloadHook(auto_mod);

} // end if auto_mod_loaded

// 

// 

// User:Quarl/advanced_sig.js - allows advanced custom signatures.
//
//   - &quot;~~~~&quot; is replaced by anything you want (any string or function) when you hit 'submit'
//   - Defaults to nicely-formatted and [[ISO 8061]] timestamp
//       - Wiki-linked timestamp enables date preferences
//       - Uses &lt;span class=&quot;user-Username&quot;&gt; tags around entire signature (including timestamp) - see [[User:HorsePunchKid]]
//   - the toolbar &quot;--~~~~&quot; button is replaced by anything you want
//
//   - You could even use this to vary your signature based on the article or namespace
//     (for example an extra link on AFD pages)

// Requires: datetime.js, autoreplace.js

///////////////////////////////////////////////////////////////
// EXTERNAL ENTRY POINTS
//
// makeSignature():     Returns the custom signature.
//

///////////////////////////////////////////////////////////////
// USER-CONFIGURABLE SETTINGS

// signature:           This is your signature. (can be string or function)
//
//                      To emulate normal behavior:
//                          signature = '~~~~';
//
//                      Default:
//                          signature = build_default_signature;
//
//                      Other examples:
//                          signature = function() { return '--~~~ ' + wikiTimestampISO() }
//                          signature = '&lt;i&gt;&amp;mdash;[[User:Quarl|Quarl]] ~~~~~&lt;/i&gt;';
//
//
// toolbar_signature:   What the &quot;signature&quot; toolbar button inserts. (can be string or function)
//                      I recommend removing the '--' (or &amp;mdash;) and having it instead be part of the signature.
//
//                      To emulate normal behavior:
//                          toolbar_signature = '--~~~~';
//
//                      Default:
//                          toolbar_signature = '~~~~';
//
//                      Other examples:
//                          toolbar_signature = makeSignature;
//                          toolbar_signature = '&amp;mdash;~~~~';
//

//
// The following are used by build_default_signature.
//
// sig_username:        Used by build_default_signature as username in CSS span tag class name.
//                      Result is &lt;span user-Quarl&gt; for sig_user='Quarl'.  (can be string or function)
//
//                      Default (should work for most people):
//                          sig_username = getUsername; // read from Wikipedia page
//
//                      Other examples:
//                          sig_username = 'QuarlXYZ';
//
// signature_user:      Used by build_default_signature for username wiki link. (can be string or function)
//                      I recommend embedding the &amp;mdash; so you don't have to type it every time.
//
//                      To emulate normal behavior:
//                          signature_user = '~~~';
//
//                      Default:
//                          signature_user = '&amp;mdash;~~~';
//
//                      Other examples:
//                          signature_user = '[[User:Quarl|Quarl]] &lt;sup&gt;([[User talk:quarl|talk]])&lt;/sup&gt;';
//
// signature_timestamp: Used by build_default_signature for timestamp (can be string or function).
//                      I recommend using wikiTimestampISO since I love [[ISO 8601]] time format, and
//                      this would allow everyone to see their preferred time format.
//
//                      To emulate normal behavior:
//                          signature_timestamp = '~~~~~';
//
//                      Default:
//                          signature_timestamp = wikiTimestampISO;
//

// To allow use of advanced_sig.js in other scripts but not require it, use the following:
//      if(typeof window.makeSignature=='undefined')makeSignature=function(){return &quot;~~~~&quot;};

// quarl 2005-12-30 initial version
// quarl 2006-01-04 add feature to replace &quot;~~~~&quot; in text; factored it so it's easy to customize

function getUsername() {
    // read username from pt-userpage link.
    // &lt;li id=&quot;pt-userpage&quot;&gt;&lt;a href=&quot;/wiki/User:Quarl&quot;&gt;Quarl&lt;/a&gt;&lt;/li&gt;
    return document.getElementById('pt-userpage').getElementsByTagName('a')[0].text;
}

function wikiTimestampISO() {
    return &quot;[[&quot;+datestampUTCISO()+&quot;]]&amp;nbsp;&quot;+timestampUTCISO()+&quot;[[ISO 8601|Z]]&quot;;
}

function spansig(user, sigUser, sigTimestamp) {
    return &quot; &lt;span class=\&quot;user-sig user-&quot;+user+&quot;\&quot;&gt;&lt;i&gt;&quot; + sigUser +  &quot; &lt;small&gt;&quot;+sigTimestamp+&quot;&lt;/small&gt;&lt;/i&gt;&lt;/span&gt;&quot;
}

function build_default_signature() {
    return spansig(getSigUsername(), getSignatureUser(), getSignatureTimestamp());
}

// sig_newOption, originally based on newOption from Lupin's popups.js
//     this should expand to something like
//     if (typeof window.foo=='undefined') { window.foo=null; }; window.dfoo = 0.5;
function sig_newOption(x, def) {
    var a='window.'  + x;
    var b='window.default_' + x;
    eval('if (typeof '+ a + '==\'undefined\') {' + a + '=null; }; ' + b + '=' + def + ';');
    return sig_makeGetterFunction(x);
};

function sig_makeGetterFunction(varName) {
    return eval(
             'function() { '+
                 'return sig_evalParam(&quot;'+varName+'&quot;,'+
                                     '(window.'+varName+' || window.default_'+varName+')); }');
}

function sig_evalParam(varName, v) {
    if (typeof v == 'string') return v;
    if (typeof v == 'function') return v();
    if (v == null) alert(&quot;ERROR! Variable '&quot;+varName+&quot;' cannot be null.&quot;);
    else alert(&quot;ERROR! Variable '&quot;+varName+&quot;' cannot be of type '&quot;+(typeof v)+&quot;'; must be string or function.&quot;);
    return &quot;&quot;+v;
}

///////////////////////////////////////////////////////////////
// user-configurable settings (see top of page for commentary)

makeSignature = sig_newOption('signature', 'build_default_signature');

getSigUsername        = sig_newOption('sig_username', 'getUsername');
getSignatureUser      = sig_newOption('signature_user', '&quot;&amp;mdash;~~~&quot;');
getSignatureTimestamp = sig_newOption('signature_timestamp', 'wikiTimestampISO');
getToolbarSignature   = sig_newOption('toolbar_signature', '&quot;~~~~&quot;');

function replaceSignatureButton() {
    // Note: a slightly more complicated version is required to replace the signature with the evaluation of getToolbarSignature() at the time of pressing the button rather than time of page load, but it doesn't matter if you are just replacing it with ~~~~ and using autoreplace as below.
    var toolbar = document.getElementById('toolbar');
    if (!toolbar) return;
    var links = toolbar.getElementsByTagName('a');
    for (var i = 0; i &lt; links.length; i++) {
        links[i].href = links[i].href.replace(/--~~~~/, getToolbarSignature());
    }
}

function replaceSignatureOnSubmit() {
    autoreplace_add('~~~~', makeSignature);
}

addOnloadHook(replaceSignatureButton);
addOnloadHook(replaceSignatureOnSubmit);

// 


// User:quarl/rollback.js - rollback button.

// requires wikipage.js, util.js, md5.js

// based on http://sam.zoy.org/wikipedia/godmode-light.js
//   - more robust (works with Popups, etc)
//   - factored code

// 

// -----------------------------------------------------------------------------
// God-like Monobook skin
// (c) 2005 Sam Hocevar &lt;sam@zoy.org&gt;
// $Id: godmode-light.js 980 2005-11-12 01:51:51Z sam $
// -----------------------------------------------------------------------------

// -----------------------------------------------------------------------------
// Language support, taken from phase3/languages/*
// -----------------------------------------------------------------------------
var rollbacklink = 'rollback';
var cantrollback = 'Cannot revert edit; last contributor is only author of this page.';
var alreadyrolled = 'Cannot rollback last edit of [[$1]] by [[User:$2|$2]] ([[User talk:$2|Talk]]); someone else has edited or rolled back the page already. Last edit was by [[User:$3|$3]] ([[User talk:$3|Talk]]). ';
var revertpage = 'Reverted edits by [[User:$2|$2]] ([[User talk:$2|t]]) ([[Special:Contributions/$2|c]]) to last version by $1';

// -----------------------------------------------------------------------------
// Our nice Revert functions
// -----------------------------------------------------------------------------
var gml_vandal, gml_editor;

function rollback_Revert() {
    if (queryVars['fakeaction'] != 'rollback') return;

    var token = queryVars['token'];
    gml_vandal = queryVars['vandal'];

    document.cont = document.getElementById('bodyContent');

    document.cont.innerHTML = 'Please wait, reverting edits by ' + gml_vandal + '...';
    // Avoid XSS kiddies by using a special token
    if (!token || token != rollback_mkToken(wikiPage, gml_vandal)) {
        document.cont.innerHTML += 'ERROR: Bad authentication token!';
        return;
    }

    document.getElementById('bodyContent').innerHTML += '&lt;br /&gt;Getting article history...';
    asyncDownloadXML(wikiPage.qurl + '&amp;action=history&amp;limit=50', rollback_Revert2);
}

function rollback_Revert2(xmlhttp) {
    var l;
    var oldid;
    // Get the vandal and new editor names
    gml_editor = null;
    doc = xmlhttp.responseXML;
    l = doc.getElementById('pagehistory').getElementsByTagName('li');
    for (i = 0; i &lt; l.length; i++) {
        var name = l[i].getElementsByTagName('span')[0].getElementsByTagName('a')[0].innerHTML.replace(/_/g,' ');
        if (!name) continue;
        if (i == 0) {
            if (name != gml_vandal) {
                document.cont.innerHTML += '&lt;br /&gt;Error: Last editor is ' + name + ', not ' + gml_vandal + '!';
                return;
            }
        } else {
            if (name != gml_vandal) {
                oldid = l[i].getElementsByTagName('input')[0].value;
                gml_editor = name;
                break;
            }
        }
    }
    if (!gml_editor) {
        document.cont.innerHTML += '&lt;br /&gt;Error: ' + gml_vandal + ' is the only editor!';
        return;
    }

    var url = wikiPage.qurl + '&amp;action=edit&amp;oldid=' + oldid;
    document.cont.innerHTML += '&lt;br /&gt;Getting article edit form...';
    asyncDownloadXML(wikiPage.qurl + '&amp;action=history&amp;limit=50', rollback_Revert3);
}

function rollback_Revert3(xmlhttp) {
    var form, newform, l;
    // Insert the downloaded form in our current page, using
    // only hidden form inputs.
    doc = xmlhttp.responseXML;
    form = doc.getElementById('editform');
    newform = document.createElement('form');
    l = form.getElementsByTagName('textarea');
    for (i = l.length; i--; ) {
        var t = document.createElement('input');
        t.type = 'hidden';
        t.name = l[i].name;
        t.value = l[i].value;
        newform.appendChild(t);
    }
    l = form.getElementsByTagName('input');
    for (i = l.length; i--; ) {
        if (l[i].name == 'wpSummary') {
            l[i].value = revertpage.replace(/\$1/g, gml_editor).replace(/\$2/g, gml_vandal);
        } else if (l[i].name == 'wpMinoredit') {
            l[i].value = '1';
        } else if (l[i].name == 'wpWatchthis') {
            if (!l[i].checked)
            continue; // Don't touch the &quot;watch&quot; status
            l[i].value = &quot;on&quot;;
        } else if (l[i].name == 'wpPreview') {
            continue;
        } else if (l[i].name == 'wpDiff') {
            continue;
        }
        l[i].type = 'hidden';
        newform.appendChild(l[i]);
     }
     newform.name = form.name;
     newform.method = form.method;
     newform.id = form.id;
     newform.action = form.action;
     document.cont.innerHTML += '&lt;br /&gt;Submitting form...';
     document.cont.appendChild(newform);
     newform.submit();  // Submit the form
}

function rollback_link_to_username(link) {
    return link &amp;&amp; (new WikiPage(link)).article;
}

function rollback_mkToken(wp, vandal) {
    return hex_md5(wp.page + '%' + vandal + '%' + document.cookie);
}

function rollback_mkUrl(wp, vandal) {
    return url_getpath(wp.qurl + '&amp;fakeaction=rollback&amp;vandal=' + 
                       escape(vandal) + '&amp;token=' + escape(rollback_mkToken(wp, vandal)));
}

// -----------------------------------------------------------------------------
// Add revert buttons to the page
// -----------------------------------------------------------------------------
function rollback_AddButtonDiff() {
    var difftag = getElementsByClass('diff-ntitle',document.getElementById('bodyContent'),'td')[0];
    if (!difftag) return;

    // if toplink has an oldid then this is not a diff against current revision.
    var toplink = difftag.getElementsByTagName('a')[0].href;
    if (toplink.match(/oldid=/)) return;

    var vandal = rollback_link_to_username(difftag.getElementsByTagName('a')[1]);
    if (!vandal) { alert(&quot;Couldn't parse username in diff page!&quot;); return; }

    var url = rollback_mkUrl(wikiPage,vandal);
    var newtext = ' &amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;strong&gt;[&lt;a href=&quot;' + url + '&quot;&gt;' + rollbacklink + '&lt;/a&gt;]&lt;/strong&gt; ';

    difftag.innerHTML = difftag.innerHTML.replace(/(&lt;\/a&gt;\))( *&lt;br)/i, '$1'+newtext+'$2');
}

function rollback_AddButtonContributions() {
    if (wikiPage.page != 'Special:Contributions') return;

    var vandal = rollback_link_to_username(document.getElementById('contentSub').getElementsByTagName('a')[0]);
    if (!vandal) { alert(&quot;Couldn't parse user for Special:Contributions page&quot;); return; }

    var l = document.getElementById('bodyContent').getElementsByTagName('li');
    for (i = 0; i &lt; l.length; i++) {
        var t = l[i].innerHTML;
        // If we are already a sysop on this wiki, abort
        if (t.match(/&gt;rollback&lt;\/a&gt;]/)) return;

        if (t.match(/&lt;strong&gt; \(/)) {
            var wp = new WikiPage(l[i].getElementsByTagName('a')[0].href);
            var url = rollback_mkUrl(wp,vandal);
            l[i].innerHTML += ' [&lt;a href=&quot;' + url + '&quot;&gt;' + rollbacklink + '&lt;/a&gt;]';
        }
    }
}

function rollback_Load() {
    rollback_Revert();
    rollback_AddButtonDiff();
    rollback_AddButtonContributions();
}

addOnloadHook(rollback_Load);

// 


// User:Quarl/autoafd.js

// requires: wikipage.js, wikiedit.js, addilink.js, util.js
// enhanced by: advanced_sig.js

// quarl 2006-01-23 new version that opens the nomination page on invocation; adds 
//                  checkboxes for tag &amp; log (default on); do the tagging and logging
//                  asynchronously on 'submit'.

// TODO: don't lose the extra stuff on preview/diff

// 

if(typeof window.makeSignature=='undefined')makeSignature=function(){return &quot;~~~~&quot;};

function autoafd_makeBeginUrl() {
    var wp = wikiPage;
    if (!wp.page.match(/^Wikipedia:Articles for deletion\//)) {
        // this should be a main-namespace page so namespace should be '' or 'Talk:'; 
        // ignore the 'Talk' so use wp.article.
        wp = new WikiPage(null, 'Wikipedia:Articles for deletion/' + wp.article);
    }
    return wp.qurl + '&amp;action=edit&amp;fakeaction=autoafd';
}

function autoafd_load()
{
    if (queryVars['fakeaction'] == 'autoafd') {
        autoafd_begin();
        return;
    }

    if (!wikiPage.nsMainP) {
        // don't bother with non-main-namespace articles
        return;
    }

    if (document.getElementById('afd')) {
        // this article already has an AFD tag.
        return;
    }

    addTab(autoafd_makeBeginUrl(), 'Afd', 'ca-autoafd', 'Nominate for deletion');
}

function autoafd_begin() {
    if (!wikiPage.page.match(/^Wikipedia:Articles for deletion\/(.*?)(?: \([0-9]+\))?$/)) {
        alert(&quot;Doesn't look like an AFD page?!&quot;);
        return;
    }
    window.wpAfd = wikiPage;
    window.wpAfdTarget = new WikiPage(null, RegExp.$1);
    window.wpAfdLog = new WikiPage(null,'Wikipedia:Articles_for_deletion/Log/' + datestampYYYYMonthD());

    var editor = WikiEditor();
    if (editor.wpTextbox1) {
        // TODO: automatically go to #2 etc.
        alert(&quot;There's an old AFD at the default location already.\n\n&quot; +
              'Please manually edit [[' + wikiPage.page + ' (2)]]).');
        return;
    }

    editor.wpTextbox1 = '===[[' + wpAfdTarget.page + ']]===\n' +
              &quot;Nomination.  '''Delete''' &quot; + makeSignature() + &quot;\n*\n*\n*\n&quot;;
    editor.wpSummary = &quot;Initial nomination for deletion of [[&quot; + wpAfdTarget.page + &quot;]]&quot;;
    editor.updateForm();

    autoafd_annotate();
}

function autoafd_annotate() {
    autoafd_add_new_checkboxes();
    hookEventObj(document.editform.wpSave, 'click', autoafd_submitHook_Event);
    window.autoafd_async_wait = null;
    // Don't submit! Let the user type in peace.
}

function autoafd_add_new_checkboxes() {
    if (document.getElementById('autoafd-options')) return;

    var tagTitle = 'Add {{subst:afd}} to ' + string_quote_escape(wpAfdTarget.page)
    var tagText = 'Tag &lt;a href=&quot;' + url_getpath(wpAfdTarget.url) + '&quot;&gt;' +
                  wpAfdTarget.page + '&lt;/a&gt; with {{afd}}';

    var listTitle = 'List this AFD on today\'s AFD log page';
    var listText = 'List in &lt;a href=&quot;'+url_getpath(wpAfdLog.url) + '&quot;&gt;' +
                   //wpAfdLog.page + 
                   'log page' +
                   '&lt;/a&gt;';

    var newstuff = document.createElement('div');
    window.afd_newstuff = newstuff;
    newstuff.id = 'autoafd-options';
    newstuff.innerHTML = '&lt;input type=&quot;checkbox&quot; value=&quot;1&quot; name=&quot;wpTagAFD&quot; id=&quot;wpTagAFD&quot; checked=&quot;1&quot; /&gt;'+
                         '&lt;label for=&quot;wpTagAFD&quot; title=&quot;' + tagTitle + '&quot;&gt;' + 
                         tagText + '&lt;/label&gt;' + 
                         '&amp;nbsp;&amp;nbsp;&amp;nbsp;' +
                         '&lt;input type=&quot;checkbox&quot; value=&quot;1&quot; name=&quot;wpListAFD&quot; id=&quot;wpListAFD&quot;  checked=&quot;1&quot; /&gt;'+
                         '&lt;label for=&quot;wpListAFD&quot; title=&quot;' + listTitle + '&quot;&gt;' + 
                         listText + '&lt;/label&gt;';
    add_before(document.editform.wpMinoredit, newstuff);
}


function autoafd_submitHook_Event(event)
{
    if (!(autoafd_submitHook())) {
        event.preventDefault();
        event.stopPropagation();
    }
}

function autoafd_submitHook() {
    // autoafd_async_wait is initially set to null.  The first time we arrive here 
    // we set it to 0.  We wait for up to two asynchronous submissions to occur first
    // before submitting this form.

    if (autoafd_async_wait == 0) {
        return true;
    }
    autoafd_async_wait = 0;

    if (document.editform.wpTagAFD.checked) {
        autoafd_async_wait++;
        var status = window.autoafd_status_tag = document.createElement('div');
        status.innerHTML = 'Tagging page: Downloading...';
        status.id = 'status-tagafd';
        add_after(afd_newstuff, status);
        asyncWikiEditor(wpAfdTarget, autoafd_TagAFD);
    }
    if (document.editform.wpListAFD.checked) {
        autoafd_async_wait++;
        var status = window.autoafd_status_list = document.createElement('div');
        status.innerHTML = 'Listing: Downloading...';
        status.id = 'status-listafd';
        add_after(afd_newstuff, status);
        asyncWikiEditor(wpAfdLog, autoafd_ListAFD);
    }

    if (autoafd_async_wait == 0) return true;
    return false;
}

function autoafd_TagAFD(editor) {
    autoafd_status_tag.innerHTML += ' submitting...';
    if (editor.refuseCreate()) return;
    editor.wpTextbox1 = '{{subst:afd}}\n\n' + trim_lines(editor.wpTextbox1);
    editor.wpSummary = 'Nominating [['+wpAfdTarget.page+']] for [['+wpAfd.page+'|AFD]]';
    editor.submitAsync(null, autoafd_TagAFD_done);
}

function autoafd_ListAFD(editor) {
    autoafd_status_list.innerHTML += ' submitting...';
    if (editor.refuseCreate()) return;
    editor.wpTextbox1 = trim_lines(editor.wpTextbox1) + '\n{{'+wpAfd.page+'}}\n';
    editor.wpSummary = 'Listing [['+wpAfdTarget.page+']] for [['+wpAfd.page+'|AFD]]';
    editor.submitAsync(null, autoafd_ListAFD_done);
}

function autoafd_TagAFD_done(req) {
    if (req.status != 200) {
        alert(&quot;Error tagging article for AFD!&quot;); return;
    }
    autoafd_status_tag.innerHTML += ' done!';
    autoafd_async_done_1();
}

function autoafd_ListAFD_done(req) {
    if (req.status != 200) {
        alert(&quot;Error listing article for AFD!&quot;); return;
    }
    autoafd_status_list.innerHTML += ' done!';
    autoafd_async_done_1();
}

function autoafd_async_done_1() {
    if (--autoafd_async_wait == 0) document.editform.wpSave.click();
}

addOnloadHook(autoafd_load);

// 

// User:Quarl/afd_helper.js, based on User:Jnothman/afd_helper.js

// requires: automod.js, wikipage.js, util.js, datestamp.js
// enhanced by: advanced_sig.js

// based on http://en.wikipedia.org/wiki/User:Jnothman/afd_helper/script.js
// [[User:Jnothman/afd_helper/script.js]]

//  - huge list of shortcut expansions and other shortcut features
//  - more &quot;vote&quot; buttons such as in original article
//  - escaping bugs ('&amp;&amp;', '+', etc) fixed
//  - refuse to create AFD pages (in case of more escaping bugs)

//

if(typeof window.makeSignature=='undefined')makeSignature=function(){return &quot;~~~~&quot;};

/************* afd Helper ************/
// see User:Jnothman/afd_helper

afdh_summaryprompt = true;

afdh_vote_shortcuts = Array();
afdh_vote_shortcuts['D']   = 'Delete';
afdh_vote_shortcuts['DA']  = 'Delete all';
afdh_vote_shortcuts['K']   = 'Keep';
afdh_vote_shortcuts['M']   = 'Merge';
afdh_vote_shortcuts['MV']  = 'Move';
afdh_vote_shortcuts['R,RD']   = 'Redirect';
afdh_vote_shortcuts['RW']  = 'Rewrite';
afdh_vote_shortcuts['T']   = 'Transwiki';
afdh_vote_shortcuts['WD']  = 'Weak delete';
afdh_vote_shortcuts['SD']  = 'Strong delete';
afdh_vote_shortcuts['SP']  = 'Speedy delete';
afdh_vote_shortcuts['SK']  = 'Strong keep';
afdh_vote_shortcuts['SM']  = 'Slight merge';
afdh_vote_shortcuts['WK']  = 'Weak keep';
//afdh_vote_shortcuts['SPK'] = '[[Wikipedia:Speedy keep|Speedy keep]]';
afdh_vote_shortcuts['SPK'] = 'Speedy keep';
afdh_vote_shortcuts['C']   = 'Comment';
afdh_vote_shortcuts['MC']  = 'Metacomment';
afdh_vote_shortcuts['BJAODN,BJ'] = 'BJAODN'; // avoids querying for summary

// If the subsitution ends with a space, it is not displayed in the alert box.
// The spaces are removed before posting.
afdh_comment_shortcuts = Array();
afdh_comment_shortcuts['PN']                         = 'per nomination';
afdh_comment_shortcuts['NN']                         = '[[WP:N|non-notable]]';
afdh_comment_shortcuts['V,VAIN,VANITY']              = '[[WP:VAIN|vanity]]';
afdh_comment_shortcuts['NNBIO']                      = '[[WP:BIO|non-notable biography]]';
afdh_comment_shortcuts['NNVBIO']                     = '[[WP:BIO|non-notable vanity biography]]';
afdh_comment_shortcuts['NNWEB']                      = '[[WP:WEB|non-notable website]]';
afdh_comment_shortcuts['NNWEBCOMIC ']                = '[[WP:WEB|non-notable webcomic]]';
afdh_comment_shortcuts['NNBLOG,NNWEBLOG']            = '[[WP:WEB|non-notable weblog]] ';
afdh_comment_shortcuts['NNFORUM','NNWEBFORUM']       = '[[WP:WEB|non-notable web forum]] ';
afdh_comment_shortcuts['NNCORP,NNCOMPANY']           = '[[WP:CORP|non-notable corporation]]';
afdh_comment_shortcuts['NNMUSIC']                    = '[[WP:MUSIC|non-notable musical group]]';
afdh_comment_shortcuts['NNBAND']                     = '[[WP:MUSIC|non-notable band]]';
afdh_comment_shortcuts['NNUNEO']                     = '[[Wikipedia:Avoid_neologisms|non-notable unstable neologism, i.e. protologism]]';
afdh_comment_shortcuts['NNUUNEO']                    = '[[Wikipedia:Avoid_neologisms|non-notable unverifiable unstable neologism, i.e. protologism]]';
afdh_comment_shortcuts['NNFICT,NNFICTION']           = '[[WP:FICT|non-notable reference to fictional work]]';
afdh_comment_shortcuts['NNFICTC,NNFICTCHAR,NNCHAR']  = '[[WP:FICT|non-notable character from fictional work]] ';
afdh_comment_shortcuts['FANCRUFT,NNFAN']             = '[[Wikipedia:Fancruft|fancruft]]';
afdh_comment_shortcuts['NNFANFIC']                   = '[[Wikipedia:Fancruft|non-notable fan fiction]]';
afdh_comment_shortcuts['NNGAME']                     = '[[WP:N|non-notable]] online gaming group';
afdh_comment_shortcuts['U']                          = '[[WP:V|unverifiable]]';
afdh_comment_shortcuts['UPH']                        = '[[WP:V|unverifiable]], possible [[WP:HOAX|hoax]]';
afdh_comment_shortcuts['OR']                         = '[[WP:NOR|original research]]';
afdh_comment_shortcuts['UOR']                        = '[[WP:V|unverifiable]] and/or [[WP:NOR|original research]]';
afdh_comment_shortcuts['H']                          = '[[WP:HOAX|hoax]]';
afdh_comment_shortcuts['HSANC,HSANCT,HSANCTION']     = '[[WP:HOAX|hoax]], and sanction article author';
afdh_comment_shortcuts['ATTACK']                     = '[[WP:CSD|attack page]]';
afdh_comment_shortcuts['WISHSP,WISHEXPAND']          = 'I wish for expansion of [[WP:CSD]] so that this kind of article could be speedy-deleted when no notability is asserted ';
afdh_comment_shortcuts['NOT']                        = '[[WP:NOT|Wikipedia is not]]';
afdh_comment_shortcuts['NOTADVERT']                  = '[[WP:NOT|Wikipedia is not a vehicle for advertising]] ';
afdh_comment_shortcuts['NOTBALL,NOTCRYSTAL']         = '[[WP:NOT|Wikipedia is not a crystal ball]] ';
afdh_comment_shortcuts['NOTCRUFT']                   = '[[WP:NOT|Wikipedia is not an indiscriminate collection of information]] ';
afdh_comment_shortcuts['NOTDICT,NOTDIC']             = '[[WP:NOT|Wikipedia is not a dictionary]] (but [[Wiktionary]] is) ';
afdh_comment_shortcuts['NOTMEMORIAL']                = '[[WP:NOT|Wikipedia is not a memorial]] ';
afdh_comment_shortcuts['NOTOR,NOTORIGINAL']          = '[[WP:NOT|Wikipedia is not a publisher of original thought]] ';
afdh_comment_shortcuts['NOTSOAPBOX']                 = '[[WP:NOT|Wikipedia is not a soapbox]] ';
afdh_comment_shortcuts['NOTSW,NOTSWDIR']             = '[[WP:NOT|Wikipedia is not a software directory]] ';
afdh_comment_shortcuts['NOTWEBHOST,NOTFREEHOST']     = '[[WP:NOT|Wikipedia is not a free host or webspace provider]] ';
afdh_comment_shortcuts['NOTWEBDIR']                  = '[[WP:NOT|Wikipedia is not a web directory]] ';
afdh_comment_shortcuts['NFT,NOTSCHDAY,NOTSCH,NOT1SCHDAY,NOT1DAY'] = '[[WP:NFT|Wikipedia is not for things made up in school one day]] ';
afdh_comment_shortcuts['XBIO,BIOX']                  = 'Recommend the article author see [http://www.wikime.org/ WikiMe] for writing biographies and/or [http://www.wikitree.org WikiTree] for writing genealogies ';
afdh_comment_shortcuts['XUSERFY,USERFYX']            = 'Article author may want to consider moving the content to his [[Wikipedia:User page|user page]] ';
afdh_comment_shortcuts['XPROTO,XPROTOLOGISM,PROTOX'] = 'Protologisms may deserve listing at [[Wiktionary:List_of_protologisms]] ';
afdh_comment_shortcuts['BALLS,BALL'] = '[[WP:BALLS|Complete bollocks]]';

function afdh_expand_shortcuts(input) {
    var result = new Array();
    for (k in input) {
        var keys = k.split(',');
        result[keys[0]] = input[k];
        for (var i=1; i &lt; keys.length; ++i) {
            result[keys[i]] = input[k] + ' ';
        }
    }
    return result;
}

afdh_vote_shortcuts = afdh_expand_shortcuts(afdh_vote_shortcuts);
afdh_comment_shortcuts = afdh_expand_shortcuts(afdh_comment_shortcuts);


function afd_helper() {
    if (wikiPage.page.match(/^Wikipedia:Articles for deletion\//)) {

        if (!wikiPage.page.match(/^Wikipedia:Articles for deletion\/Log/)) {
            addTab('javascript:afd_vote_this_page()', 'vote', 'ca-vote', &quot;Vote on this AFD&quot;);
        }

        afd_annotate_afd();
    } else {
        afd_annotate_article();

        if (wikiPage.nsMainP) 
            addToolboxLink('javascript:afd_nominate()', 'Nominate AFD', '', 'Nominate this article for deletion');
    }
}

function afd_annotate_article() {
    // is this a regular article that has an AFD notice?
    var afd = document.getElementById('afd');
    if (!afd) return;

    var anchors = copyArray(afd.getElementsByTagName('a'));

    for (i in anchors) {
        if (anchors[i].text == &quot;this article's entry&quot; &amp;&amp;
            anchors[i].href.match(/Wikipedia:Articles_for_deletion\/.*/))
        {
            var href = 'javascript:afd_vote_this_page()';
            add_after(anchors[i], document.createTextNode(&quot;] &quot;));
            add_after(anchors[i], createHref(href, 'Vote on deletion of '+wikiPage.page, 'vote'));
            add_after(anchors[i], document.createTextNode(&quot; [&quot;));
            break;
        }
    }

    addTab(href, 'vote', 'ca-vote', 'Vote on AFD for this page');
}

function afd_annotate_afd() {
    var anchors = copyArray(document.getElementById('bodyContent').getElementsByTagName('a'));

    var url_re = /(\/w\/index.php\?title=Wikipedia:Articles_for_deletion\/([^&amp;]+))&amp;action=edit&amp;/;
    var url, matches;
    for (var i=0; i &lt; anchors.length; i++) {
        if (!( anchors[i].text == &quot;edit&quot;
               &amp;&amp; (matches = anchors[i].href.match(url_re))
               &amp;&amp; (matches[2].substr(0, 4) != 'Log/')) )
            continue;
        var afd_href = matches[1];
        var title = &quot;&quot;+unescape(matches[2]).replace(/_/g,' ');
        var vote_href = &quot;javascript:afd_vote_page(&quot;+string_quote_escape(title)+&quot;)&quot;;
        var log_href = &quot;/w/index.php?title=Special:Log&amp;page=&quot; + wpaescape(title);
        add_after(anchors[i], createHref(vote_href, 'Vote on deletion of '+title, 'vote'));
        add_after(anchors[i], document.createTextNode(&quot;] [&quot;));
        add_before(anchors[i], createHref(log_href, title, 'log'));
        add_before(anchors[i], document.createTextNode(&quot;] [&quot;));
        add_before(anchors[i], createHref(afd_href, title, 'afd'));
        add_before(anchors[i], document.createTextNode(&quot;] [&quot;));
    }
}

function shortcut_msg(shortcuts) {
    var msg = 'Shortcuts available:\n';
    for (var key in shortcuts) {
        if (shortcuts[key].match(/ $/)) continue;
        msg += key + ': ' + shortcuts[key] + '\n';
    }
    return msg;
}

/* This version replaces only the first word and doesn't require uppercase */
function subst_shortcut1(msg,shortcuts) {
    if (!msg) return msg;
    var m = msg.match(/^([a-zA-Z]+)(.*)$/);
    if (m) {
        return subst_word(m[1],shortcuts) + m[2];
    }
    return msg;
}

function subst_word(word,shortcuts) {
    return trimspaces(shortcuts[word.toUpperCase()]) || word;
}

/* This version replaces all uppercase words */
function subst_shortcut(msg,shortcuts) {
    if (!msg) return msg;
    var ret = '';
    var m;
    while (msg &amp;&amp; (m = msg.match(/^(.*?)\b([A-Z]+)\b(.*)$/)) ) {
        ret += m[1] + subst_word(m[2],shortcuts);
        msg = m[3];
    }

    ret += msg;
    return ret;
}

// return true if string ends with period (can also have symbols such as closing paren after period)
function ends_with_period(str) {
    return Boolean(str.match(/[.?!][^a-zA-Z]*$/));
}

// return true if comment needs to be prefixed by 'as '
function afdh_comment_needs_as(comment) {
    var m = comment.match(/^([a-zA-Z]+)(.*)$/);
    if (!m) return false;
    if (m[1] == 'or') return false; // special case for 'or'
    var word1 = m[1].toUpperCase();
    return Boolean(word1 != 'PN' &amp;&amp; afdh_comment_shortcuts[word1]);
}

function afdh_expand_vote(vote) {
    vote = subst_shortcut(vote, afdh_vote_shortcuts);
    vote = subst_shortcut1(vote, afdh_vote_shortcuts);
    return vote;
}

function afdh_expand_comment(vote, comment) {
    // if first word is a shortcut other than 'per nomination', prefix with 'as'

    var need_as = afdh_comment_needs_as(comment);

    comment = subst_shortcut(comment,afdh_comment_shortcuts);
    if (!comment.match(/^or /)) {
        // &quot;or&quot; is too common as first word... use uppercase &quot;OR&quot; if that's intended.
        comment = subst_shortcut1(comment,afdh_comment_shortcuts);
    }

    if (need_as) {
        comment = 'as ' + comment;
    }

    if (!ends_with_period(comment)) {
        comment += &quot;.&quot;;
    }

    // prefix with space if necessary
    if (!comment.match(/^[.,:; ]/)) {
        comment = &quot; &quot; + comment;
        if (vote == 'Comment') comment = &quot;:&quot; + comment;
    }

    return comment;
}

function afdh_comment_possibly_unexpanded(comment) {
    // did user typo one of the shortcuts?
    return comment.match(/[A-Z][A-Z][A-Z]+(?![\]A-Z\|])/);
}

function afd_vote_this_page() {
    afd_vote_page(wikiPage.page);
}

function afd_vote_page(page) {
    if (!page.match(/^Wikipedia:Articles.for.deletion\//)) {
        if (page.match(/:/)) { alert(&quot;Bad page name: '&quot;+page+&quot;'&quot;); return; }
        page = 'Wikipedia:Articles for deletion/' + page;
    }
    afd_vote(new WikiPage(null,page));
}

function afd_vote(wp) {
    var vote0 = window.prompt(&quot;Enter your vote.   &quot; + shortcut_msg(afdh_vote_shortcuts));
    if (!vote0) return;
    var vote = afdh_expand_vote(vote0);
    var vote_used_shortcut = (vote != vote0);

    var comment0prev;
    var comment0 = '';
    var comment;
    var pr = &quot;Enter your comment.  &quot;;

    while(true) {
        comment0 = window.prompt(pr + shortcut_msg(afdh_comment_shortcuts), comment0);
        if (typeof comment0 != 'string') return;
        comment = afdh_expand_comment(vote, comment0);

        if (comment0 != comment0prev &amp;&amp;
            afdh_comment_possibly_unexpanded(comment))
        {
            comment0prev = comment0;
            pr = &quot;Did you really mean '&quot;+RegExp.lastMatch+&quot;'?  Correct if you want.  &quot;;
            continue;
        }
        break;
    }

    var default_summary = &quot;vote '&quot;+vote+&quot;'&quot;;
    var summary;

    if (afdh_summaryprompt &amp;&amp; !vote_used_shortcut) {
        summary = window.prompt(&quot;Enter the edit summary:&quot;, default_summary);
        if (typeof summary != 'string') return;
    }
    summary = summary || default_summary;

    var newtext = &quot;* '''&quot;+vote+&quot;'''&quot;+comment+&quot; &quot; + makeSignature();

    var url = wp.qurl + '&amp;action=edit' + '&amp;amaddafter='+escape(newtext) + '&amp;amsummary='+escape(summary) + '&amp;amnocreate=1';

    // are we at a log page?  (Note that 'window.location.href' is not as good as wikiPage because of shortcut redirects such as [[WP:AFD/Today]])
    if (wikiPage.page.match(/\/Log\//))
        window.open(url, &quot;afd_helper_vote&quot;);
    else
        window.location.href = url;
}

function afd_nominate() {
    var title = wikiPage.page;
    var log_date = datestampYYYYMonthD();
    var reason = window.prompt(&quot;Please justify your AFD nomination of &quot;+title+&quot;:&quot;);
    if (!reason)
        return;
    window.open(am_make_url(title, '{{'+'subst:afd}}', '', 'nomination for [[WP:AFD|deletion]]'), 'afdhn1');
    window.open(am_make_url('Wikipedia:Articles for deletion/Log/'+log_date, '', '{{'+'subst:afd3|pg='+title+'}}', 'Nominating [['+title+']] for deletion'), 'afdhn3');
    window.location.href = am_make_url('Wikipedia:Articles for deletion/'+title, '', '{{'+'subst:afd2|pg='+title+'|text='+reason+' '+makeSignature()+'}}', 'nominated for deletion');
}

addOnloadHook(afd_helper);

//



// User:Quarl/autotag.js - automatically add custom tags to article

// requires: wikipage.js, wikiedit.js, addlilink.js, datetime.js

// quarl 2006-01-03 initial version
// quarl 2006-01-23 use wikiedit.js instead of automod.js

//

// TODO: sort the tags by this order (note that these are primary names of tags since they all have many aliases;
// subsituted tags such as afd are tricky; support piped data such as db|reason)

//autotag_order = 'delete,afd,hoax,original research,npov,cleanup,importance'.split(',');

autotag_mark_minor = true;

function autotag_load() {
    if (wikiPage.nsSpecialP) return;

    addTab('javascript:autotag_query()', 'tag', 'ca-autotag', &quot;Add tag(s)&quot;);
}

function autotag_query() {
    var tags = window.prompt(&quot;Enter tags to add, separated by commas. Example: hoax, not verified, original research, npov, mergeto|another article, cleanup&quot;);
    autotag(tags);
}

function autotag_iscat(s) {
    return Boolean(s.match(/^category:/i));
}

function autotag_remove_braces(s) {
    // remove any brackets or braces
    s = s.replace(/^\{\{(.*)\}\}$/, '$1');
    s = s.replace(/^\[\[(.*)\]\]$/, '$1');
    return s;
}

function autotag_add_braces(s) {
    if (autotag_iscat(s)) {
        return '[['+s+']]';
    } else {
        return '{{'+s+'}}';
    }
}

function autotag_expand_shortcuts(s) {
    // TODO: write expansions in dialog box
    // TODO: more expansions
    if (s == 'cleanup') s = 'cleanup-date|' + datestampMonthYYYY();
    if (s == 'or') s = 'original research';
    s = s.replace(/^cat:/i, 'Category:');
    return s;
}

function autotag_tagAtTopP(t) {
    if (autotag_iscat(t)) return false;
    if (t.match(/stub$/)) return false; 
    return true;
}

function autotag(tags) {
    asyncWikiEditor(wikiPage, autotag_2, tags);
}

function autotag_2(editor, tags) {
    tags = tags.split(',');
    //var ntags = Array();
    var ttags = Array();
    var ttags_top = Array();
    var ttags_bot = Array();
    for (i in tags) {
        var tag = tags[i];
        tag = autotag_expand_shortcuts(autotag_remove_braces(trimspaces(tag)));
        if (!tag) continue;
        var btag = autotag_add_braces(tag);
        //ntags.push(tag);
        ttags.push(btag);
        if (autotag_tagAtTopP(tag)) {
            ttags_top.push(btag);
        } else {
            ttags_bot.push(btag);
        }
    }
    if (!ttags.length) return;

    if (editor.refuseCreate()) return;
    var prepend = ttags_top.length ? (ttags_top.join('\n\n')+'\n\n') : '';
    var append = ttags_bot.length ? ('\n\n'+ttags_bot.join('\n\n')) : '';
    editor.wpTextbox1 = prepend + trim_lines(editor.wpTextbox1) + append;
    editor.wpSummary = 'Tagged as ' + ttags.join(', ');
    editor.wpMinoredit = autotag_mark_minor;
    editor.submit();
}

addOnloadHook(autotag_load);

//

// User:Quarl/autocopyvio.js - add copyvio tag and add entry to 'copyright problems' page

// requires: wikipage.js, addlilink.js

// based on http://en.wikipedia.org/wiki/Wikipedia:WikiProject_User_scripts/Scripts/Autocopyvio.js
  // AutoCopyvio - Adds copyright violation notice to article and adds entry to Copyright Problems page
  // Created by Bmicomp from modified AutoVFD(by Korath)

// 
  
  function copyvio()
  {
    document.editform.wpTextbox1.value = '{' + '{' + 'copyvio|url=}}';
    document.editform.wpSummary.value = 'copyvio';

    var wpLog = new WikiPage(null,'Wikipedia:Copyright problems/' + datestampYYYYMonthD());

    window.open(wpLog.qurl + '&amp;action=edit&amp;fakeaction=copyviolist&amp;faketarget=' + escape(wikiPage.article), 'status,toolbar,location,menubar,directories,resizeable,scrollbars');
  }
  
  function autocopyvio()
  {
    if (editingP)
      {
        if (queryVars['fakeaction'] == 'copyviolist')
          {
              var target = queryVars['faketarget'];
              document.editform.wpTextbox1.value += '*[[' + target + ']] &lt;span class=&quot;plainlinks&quot;&gt;([http://en.wikipedia.org/{{localurl:' + target + '|action=history}} history] · [http://en.wikipedia.org/{{localurl:' + target + '|diff=0}} last edit])&lt;/span&gt;' + ' from [' + '] ~' + '~~' + '~';
              document.editform.wpSummary.value = 'Copyvio ' + '[[' + target + ']]';
          }
        else
          addTab('javascript:copyvio()', 'copyvio', 'ca-copyvio', 'Tag for copyright violation');
      }
  }
  
  addOnloadHook(autocopyvio)
 /**/

// 



// User:Quarl/show_diff_since.js - add 'since' tab to show change since I last edited
//    Compared to JesseW's, this is an asynchronous version that doesn't first open the history page

// requires: wikipage.js, addlilink.js

// based on http://en.wikipedia.org/wiki/Wikipedia:WikiProject_User_scripts/Scripts/Changes_since_I_last_edited
// from http://en.wikipedia.org/w/index.php?title=User:JesseW/monobook.js&amp;oldid=20755510

// quarl 2006-01-16 rewritten to asynchronously download history page

// 

function addTab_DiffSince() {
    if (wikiPage.nsSpecialP) return;

    var url;
    if (historyP) {
        // already looking at history page
        url = 'javascript:show_diff_since_thisHistoryPage()';
    } else {
        // not yet a history page -- asynchronously download it first
        url = 'javascript:show_diff_since_thisPage()';
    }

    addTab(url, 'since', 'ca-since', &quot;Show changes since I last edited&quot;);
}

function show_diff_since_thisPage() {
    show_diff_since(wikiPage, document.getElementById('ca-since'), ' &lt;b&gt;since...&lt;/b&gt; ');
}

function show_diff_since(wp, statusnode, statustext) {
    var url = wp.qurl + '&amp;action=history';
    var req = new XMLHttpRequest();

    if (statusnode) {
        // change the button to show the user we're doing something and prevent another click
        req.statusnode = statusnode;
        req.save_text = statusnode.innerHTML;
        statusnode.innerHTML = statustext;
    }

    req.onload = show_diff_since_handleHistoryPage;
    req.overrideMimeType('text/xml');
    req.open(&quot;GET&quot;, url, true);
    req.send(null);
}

function show_diff_since_handleHistoryPage(event) {
    var req = event.target;
    if (req.readyState == 4) {
        // restore button in case this fails, so user can click again
        if (req.statusnode) {
            req.statusnode.innerHTML = req.save_text;
        }

        if (req.status == 200) {
            show_diff_since_examineTree(req.responseXML);
        } else {
            alert(&quot;Error downloading history page!&quot;);
        }
    }
}

function show_diff_since_thisHistoryPage() {
    show_diff_since_examineTree(document);
}

function show_diff_since_examineTree(doc) {
    if (!doc) { alert (&quot;## no doc?!&quot;); return; }
    var hists = doc.getElementById(&quot;pagehistory&quot;).childNodes;
    if (!hists) { alert(&quot;Couldn't parse history from page&quot;); return; }
    for (n=0;n&lt;hists.length;n++) {
        // window.username is defined in wikipage.js
        if (hists[n].getElementsByTagName &amp;&amp; hists[n].getElementsByTagName(&quot;span&quot;)[0].textContent==window.username) {
            document.location = hists[n].childNodes[1].href; 
            return;
        }
    }

    alert(&quot;Couldn't find your entry in the history page!&quot;);
    // TODO: perhaps retry with a larger limit
}

addOnloadHook(addTab_DiffSince);

// 



// User:Quarl/show_diff_last.js - add &quot;last&quot; tab to do most recent diff

// requres: wikipage.js, addlilink.js

// based on http://en.wikipedia.org/wiki/Wikipedia:WikiProject_User_scripts/Scripts/Show_last_diff

// based on raylu's abbreviation of http://en.wikipedia.org/w/index.php?title=User:JesseW/monobook.js&amp;oldid=20755510

// 

function addTab_DiffLast() {
    if (wikiPage.nsSpecialP) return;

    var nurl = wikiPage.qurl + &quot;&amp;diff=cur&amp;oldid=prev&quot;;
    addTab(nurl, 'last', 'ca-last', &quot;Show most recent diff&quot;);
}

addOnloadHook(addTab_DiffLast);

// 



// User:Quarl/auto_testn.js - adds &quot;tN&quot; tabs for autotagging 'test'.

// requires wikipage.js, wikiedit.js, addilink.js
// enhanced by: advanced_sig.js

// based on http://en.wikipedia.org/wiki/Wikipedia:WikiProject_User_scripts/Scripts/test-n.js
//    Can be used from non-edit pages, and automatically submits the changes.

// 

if(typeof window.makeSignature=='undefined')makeSignature=function(){return &quot;~~~~&quot;};

function testn(number)
{
    var page = prompt(&quot;Vandalism to which article? (Empty to use {{test}} instead of {{test-n}})&quot;)
    if (typeof page != 'string') return;

    asyncWikiEditor(wikiPage, testn_edit, number, page);
}

function testn_edit(editor, number, page) {
    if (!number) { alert(&quot;## ERROR: No number!&quot;); return; }
    var text; var summary;

    if (page) {
        text = '{{subst:' + 'test' + number + '-n|' + page + '}} ';
        summary = &quot;Vandalism to [[&quot; + page + &quot;]] - warning &quot; + number;
    } else {
        text = '{{subst:' + 'test' + number + '}} ';
        summary = &quot;Vandalism - warning &quot; + number;
    }
    text = '\n\n' + text + ' ' + makeSignature() + '\n';

    if (editor.refuseCreate()) return;
    editor.wpTextbox1 = trim_lines(editor.wpTextbox1) + text;
    editor.wpSummary = summary;
    editor.submit();
}

function auto_testn_init() {
    // Only add tab to User talk pages.
    if (wikiPage.namespace != 'User talk') return;

    // don't bother with subpages
    if (wikiPage.article.match('/') &amp;&amp; wikiPage.subarticle != 'sandbox') return;

    auto_testn_addTabs();
}

function auto_testn_addTabs()
{
    var tabs = getTabActions();
    addlilink(tabs,'javascript:testn(&quot;1&quot;)',&quot;t1&quot;,'testn1','Vandalism warning 1');
    addlilink(tabs,'javascript:testn(&quot;2&quot;)',&quot;t2&quot;,'testn2','Vandalism warning 2');
    addlilink(tabs,'javascript:testn(&quot;2a&quot;)',&quot;t2a&quot;,'testn2a','Vandalism warning 2a (blanking)');
    addlilink(tabs,'javascript:testn(&quot;3&quot;)',&quot;t3&quot;,'testn3','Vandalism warning 3');
    addlilink(tabs,'javascript:testn(&quot;4&quot;)',&quot;t4&quot;,'testn4','Vandalism warning 4');
}

addOnloadHook(auto_testn_init);

//

// 


// User:Quarl/hide_own.js - change the &quot;my watchlist&quot; navigation button to default to hide own.

// based on http://en.wikipedia.org/wiki/Wikipedia:WikiProject_User_scripts/Scripts/hideOwn.js

// 

function hideOwn () {
  for (var i=0; i&lt;document.links.length; ++i) {
    l = document.links[i];
    // note: text *is* capitalized in source, but rendered lowercase
    if (l.text == 'My watchlist' &amp;&amp; l.href.indexOf('Special:Watchlist')&gt;0) {
      l.href+='?hideOwn=1';
      break;
    }
  }
}

addOnloadHook(hideOwn);

// 

// User:Quarl/unwatch.js

// add 'un' links to unwatch directly from watchlist.  Do so asynchronously and modify current page by crossing out the unwatched page.

// quarl 2006-01-09 added asynchronous feature.

// requires: wikipage.js, util.js

// originally based on http://en.wikipedia.org/wiki/User:Omegatron/monobook.js
// see also http://en.wikipedia.org/wiki/User:Matthewmayer/monobook.js

// Workaround for Bug 424 http://bugzilla.wikipedia.org/show_bug.cgi?id=424

// TODO: make the normal watch&amp;unwatch tabs AJAX too!

// 

// if true, then clicking 'un' uses AJAX to unwatch without opening a new window/tab.
// if false, it is a regular hyperlink (use middle-click to open new tab).
var unwatchAsynchronously = true;

function unwatchMakeUrl(wp) {
    return wp.qurl + '&amp;action=unwatch';
}

function unwatchMakeLink(wp) {
    if (!wp) return &quot;&quot;;
    wp = wp.notalkPage();
    if (unwatchAsynchronously) {
        return &quot;javascript:unwatchAsync(&quot;+string_quote_escape(wp.page)+&quot;)&quot;;
    } else {
        return unwatchMakeUrl(wp);
    }
}

function unwatchAsync(page) {
    var wp = new WikiPage(null, page);
    var url = unwatchMakeUrl(wp);
    asyncDownloadXML(url, unwatchRequestHelper, {'page': wp.page});
}

function addStrikeThrough(node) {
    return node &amp;&amp; insertNode(node, document.createElement('s'));
}

function unwatchRequestHelper(unwatchReq) {
    var m1; var m2;
    if ((unwatchReq.status == 200) &amp;&amp; 
        (m1= unwatchReq.responseText.match(/The page &quot;(.*?)&quot; has been removed from your watchlist/)) &amp;&amp;
        (m2= unwatchReq.responseText.match(/&lt;p&gt;Return to &lt;a href=&quot;(\/wiki\/[^&quot;]+)&quot;/)))
    {
        // for some reason, request.article_title is &quot;null&quot; randomly 10% of the time
        //var article = unwatchReq.article_title;
        //var article = unwatch_remove_talk_ns(m1[1]);

        var wp = new WikiPage(m2[1]);
        var n1 = addStrikeThrough(findHref(wp.notalkPage().url));
        var n2 = addStrikeThrough(findHref(wp.talkPage().url));
        if (!n1 &amp;&amp; !n2) {
            alert(&quot;Unwatched article '&quot;+wp.page+&quot;', but couldn't annotate current page.&quot;);
            return;
        }
    } else {
        alert(&quot;Unwatch '&quot;+unwatchReq.page+&quot;'failed!&quot;);
    }
}


function unwatch_load(){
    if (wikiPage.page != &quot;Special:Watchlist&quot;) return;

    var links = document.links;
    re = /action=history$/;
    for(i=0;i&lt;links.length;++i) {
        var link = links[i];
        if (re.test(link.href)) {
            var wp = new WikiPage(link.href);
            var newUnwatchLink = document.createElement('a');
            newUnwatchLink.href = unwatchMakeLink(wp);
            newUnwatchLink.title = &quot;Unwatch &quot;+wp.page;
            newUnwatchLink.innerHTML = &quot;un&quot;;
            add_after(link, newUnwatchLink);
            add_after(link, document.createTextNode(&quot;; &quot;));
        }
    }
}

addOnloadHook(unwatch_load);

// 

// autofocus.js - Auto-focus the cursor to appropriate edit fields.

// Edit page: focus the main edit area.
// Move page: focus the new page title.

// quarl 2006-01-03 initial version

// requires: wikipage.js

function autofocus() {
    if (editingP &amp;&amp; !previewP) {
        if (document.editform.wpSection.value == &quot;new&quot;) {
            document.forms.editform.wpSummary.focus();
        } else {
            document.forms.editform.wpTextbox1.focus();
        }
        return;
    }

    if (movepageP) {
        document.forms.movepage.wpNewTitle.focus();
        return;
    }
}

addOnloadHook(autofocus);


/ requires: wikipage.js, wikiedit.js, addlilink.js

// enhanced by: advanced_signature.js

// quarl 2006-01-04 initial version

// TODO: shortcuts; factor out afd_helper generic shortcuts code

//

function autocloseafd_load() {
    if (wikiPage.page.indexOf('Wikipedia:Articles for deletion/')==0 || sandboxP) {
        addTab('javascript:autoclose_query(wikiPage)', 'close', 'ca-autoclose', &quot;Close this AFD discussion&quot;);
    }
}

// TODO: shortcuts
function autoclose_query(wp) {
    autoclose(wp, window.prompt(&quot;Enter closing comment.  Example: '''Delete''' as non-notable band.&quot;));
}

function autoclose(wp, comment) {
    asyncWikiEditor(wp, autoclose_edit, comment);
}

function autoclose_edit(editor, comment) {
    if (!comment) return;
    var add_before = &quot;{{subst:afd top}} &quot; + comment + &quot; &quot; + makeSignature() + &quot;\n\n&quot;;
    var add_after = &quot;\n\n{{subst:afd bottom}}\n&quot;;
    var summary = 'AFD closed; result: ' + comment;

    editor.wpTextbox1 = add_before + trim_lines(editor.wpTextbox1) + add_after;
    editor.wpSummary = summary;
    editor.submit();
}

addOnloadHook(autocloseafd_load);

//

// toolbox_edit_count.js - link to Interiot's edit counter to user pages

// requires: wikipage.js, addlilink.js

// quarl 2006-01-16 initial version

// 

function addEditCountLink() {
    if (!relevantUser) return; // defined in wikipage.js
    var url = 'http://tools.wikimedia.de/~interiot/cgi-bin/count_edits?user='+encodeURIComponent(relevantUser)+'&amp;dbname=enwiki_p';
    addToolboxLink(url, 'Edit count', 'pt-editcount', &quot;Show Interiot's edit count for &quot;+relevantUser);
}

addOnloadHook(addEditCountLink);

// 

// User:Quarl/toolbox_logs.js

// requires: wikipage.js

// based on http://en.wikipedia.org/wiki/Wikipedia:WikiProject_User_scripts/Scripts/Logs_link

// adds a 'logs for this page' link to the navigation bar
// if the page is a user's page, talk page (but not subpage), the link will go to logs for the user instead
// if the page is a special page, then no link is displayed

// 

function addLogsLink() {
    var url;
    var show;
    if (relevantUser) { // defined in wikipage.js
        url = &quot;http://en.wikipedia.org/w/index.php?title=Special:Log&amp;user=&quot; + relevantUser;
        show = &quot;User &quot; + relevantUser;
    } else if (wikiPage.nsSpecialP) {
        // don't display link for special pages (other than those with relevantUser)
        return;
    } else {
        url = &quot;http://en.wikipedia.org/w/index.php?title=Special:Log&amp;page=&quot; + wikiPage.page;
        show = wikiPage.page;
    }

    var title = &quot;Show logs for &quot; + show;
    addToolboxLink(url, &quot;Logs&quot;, &quot;pt-logs&quot;, title);
}

addOnloadHook(addLogsLink);

// 


// toolbox_afd.js - add AFD/Today and AFD/Yesterday links to Toolbox

// quarl 2006-01-03 initial version

// 

function addToolboxAFD() {
    addToolboxLink('/wiki/WP:AFD/Today', &quot;AFD/Today&quot;, &quot;pt-afd-today&quot;, &quot;Show today's AFD log&quot;);
    addToolboxLink('/wiki/WP:AFD/Yesterday', &quot;AFD/Yesterday&quot;, &quot;pt-afd-yesterday&quot;, &quot;Show yesterday's AFD log&quot;);
}

addOnloadHook(addToolboxAFD);

// 

// User:Quarl/alexafy.js - adds &quot;alexa&quot; links to external links

// requires addlilink.js, util.js

// quarl 2005-01-10 new AJAX version that annotates page asynchronously with rank

// I tried to create a version that automatically downloads the Alexa rank and annotates the page, but I think it's disallowed because it's not from the same domain.  So it would be impossible without a server-side helper script on en.wikipedia.org.

// based on http://en.wikipedia.org/wiki/User:Matthewmayer/monobook.js

//add Alexafy link to toolbar
function addToolboxAlexafy() { 
    addToolboxLink('javascript:alexafyLinks()','Alexa-fy links','alexafyLinks')
}

function alexafyWhitelistedP(url) {
    if (url.match(/wikipedia.org/)) return true;
    return false;
}

function alexafyLinks() {
    var content=document.getElementById('content');
    var externallinks=getElementsByClass('external',content,'a');
    for (i in externallinks) {
        var alink=externallinks[i];
        if (alexafyWhitelistedP(alink.href)) continue;

        alexafy_asyncAnnotateLink(alink);
    }
}

function alexafy_asyncAnnotateLink(alink) {
    var alexaUrl = makeAlexaTrafficUrl(alink.href);
    var dnode = document.createElement('span');
    dnode.innerHTML = ' [&lt;a href=&quot;'+alexaUrl+'&quot;&gt;Alexa&lt;/a&gt;]';
    add_after(alink, dnode);

    // XXX this doesn't work because of permissions.  see top.
    //alexafy_asyncGetRank(dnode,alexaUrl);
}

function makeAlexaTrafficUrl(url) {
    return 'http://www.alexa.com/data/details/traffic_details?q=&amp;url=' + url;
}

function alexafy_asyncGetRank(dnode, alexaUrl) {
    var req = new XMLHttpRequest();
    req.dnode = dnode;
    // using onload instead of onreadystatechange allows multiple asynchronous requests
    req.onload = alexafy_asyncReqCont;
    req.open(&quot;GET&quot;, alexaUrl, true);
    req.send(null);
}

function alexafy_asyncReqCont(event) {
    req = event.target;
    if (req.readyState!=4) return;
    if (req.status == 200) {
        if (req.responseText.match(/&lt;span.*?Traffic Rank for\t*(.*?):&lt;\/span&gt;&lt;span.*?--&gt;([0-9,]+)&lt;\/span&gt;/)) {
            var domain = RegExp.$1;
            var rank = RegExp.$2;
            alexafy_annotateDoc(req.dnode, domain, rank);
            return;
         //&lt;span class=&quot;body&quot;&gt; Traffic Rank for  example.org:&lt;/span&gt;&lt;span class=&quot;descBold&quot;&gt;	&amp;nbsp;&lt;!--Did you know? Alexa offers this data programmatically.  Visit http://webservices.amazon.com/ for more information about the Alexa Web Information Service.--&gt;123,456&lt;/span&gt;
        }
        if (req.responseText.match(/&lt;span.*?Traffic Rank for.*?No Data/)) {
            //&lt;span class=&quot;body&quot;&gt; Traffic Rank for :&lt;/span&gt;&amp;nbsp;No Data&lt;br&gt;
            alexafy_annotateDoc(req.dnode, null, 'No data');
            return;
        }
    }
    alexafy_annotateDoc(req.dnode, null, 'Error');
}

function alexafy_annotateDoc(dnode, domain, rank)
{
    var msg;
    if (rank == 'Error') {
        msg = &quot;couldn't get Alexa rank&quot;;
    } else if (rank == 'No data') {
        msg = &quot;no traffic data&quot;;
    } else {
        msg = &quot;traffic rank for &quot;+domain+&quot; is &quot;+rank;
    }
    dnode.innerHTML = dnode.innerHTML.substr(0,dnode.innerHTML.length-1) + msg + &quot;]&quot;;
}

addOnloadHook(addToolboxAlexafy);



// User:Quarl/userscript.js - utilities to help develop user scripts

// - adds &quot;raw&quot; tab to user script pages
// - adds &quot;refresh&quot; tab to user script pages (refresh the raw script)

// - TODO: automatically refreshes the raw version when you save a user script page

// requires wikipage.js, addlilink.js

// quarl 2006-01-10 initial version

// TODO: detect whether script has changed via permalink oldid compared to cookie (one cookie per script page?); auto-refresh

function userscriptMakeUrl(wp) {
    // note: wp.qurl is parsed from source and is not the same as blindly escaping the input!  String
    // has to exactly match what the user is using, e.g. &quot;User:Quarl/script&quot;, not &quot;User%3AQuarl/script&quot;!
    return wp.qurl + '&amp;action=raw&amp;ctype=text/javascript&amp;dontcountme=s';
}

function addTab_UserScriptRaw() {
    if (wikiPage.article.match(/[.]js$/)) {
        addTab(userscriptMakeUrl(wikiPage), 'raw', 'ca-raw', &quot;Show raw version of user script&quot;);
    }
}

function addTab_UserScriptRefresh() {
    if (wikiPage.article.match(/[.]js$/)) {
        addTab('javascript:userscript_DoRefresh()', 'refresh', 'ca-refresh', &quot;Force browser to refresh the raw version of this script&quot;);
    }
}

/*function userscript_AutoRefresh_Load() {
    if (queryVars['refresh'] == 'userscript') {
        userscript_DoRefresh();
    }
    userscript_ModifyPageRefreshOnSave();
}*/

function userscript_DoRefresh() {
    force_refresh(userscriptMakeUrl(wikiPage));
}

function force_refresh(url) {
    // We can't do frm.location.reload() right now because frm.location will still be &quot;about:blank&quot;, but if we complete this event and start a new one, it works.

    //frm.location.replace(url);
    //frm.location.href = url;
    document.getElementById('userscript_refresher').src = url;
    setTimeout('force_refresh_cont_1()', 0);
}

function force_refresh_cont_1() {
    var frm = window.frames['userscript_refresher'];
    frm.location.reload();
}

/*function userscript_ModifyPageRefreshOnSave() {
    document.editform.action += '&amp;refresh=userscript';
}*/

addOnloadHook(addTab_UserScriptRaw);
addOnloadHook(addTab_UserScriptRefresh);
//addOnloadHook(userscript_AutoRefresh_Load);

// hidden iframe
if (false &amp;&amp; window.quarlDebug)
document.write('&lt;div style=&quot;float:right;&quot; id=&quot;hidden_userscript_iframe_div&quot;&gt;&lt;iframe src=&quot;about:blank&quot; height=&quot;80&quot; width=&quot;80&quot; name=&quot;userscript_refresher&quot; id=&quot;userscript_refresher&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;');
else

document.write('&lt;div style=&quot;position:absolute;left:0px;top:0px;visibility:hidden;&quot; id=&quot;hidden_userscript_iframe_div&quot;&gt;&lt;iframe src=&quot;about:blank&quot; height=&quot;0&quot; width=&quot;0&quot; name=&quot;userscript_refresher&quot; id=&quot;userscript_refresher&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;')

// User:Quarl/newmessages.js - change the &quot;You have new messages&quot; alert to add &quot;diff since&quot; and &quot;hist&quot; links.

// requires: wikipage.js, show_diff_since.js, util.js

// quarl 2006-01-16 initial version

// 

function newmessages_Load() {
    var talkmessagebox = getElementsByClass('usermessage',document.getElementById('bodyContent'),'div')[0];
    if (!talkmessagebox || talkmessagebox.textContent != &quot;You have new messages (diff).&quot;) return;

    var wpTalk = window.wpTalk = new WikiPage(null,'User talk:' + window.username);
    var histUrl = wpTalk.qurl + '&amp;action=history';

    talkmessagebox.className += ' plainlinks';

    var t = ' (&lt;span id=&quot;newmessages-diffsince&quot;&gt;&lt;a href=&quot;javascript:newmessages_show_diff_since()&quot;&gt;diff since&lt;/a&gt;&lt;/span&gt;)' + 
            ' (&lt;a href=&quot;'+histUrl+'&quot;&gt;history&lt;/a&gt;)';

    // insert before final period
    talkmessagebox.innerHTML = talkmessagebox.innerHTML.replace(/(?=[.]$)/, t);
}

function newmessages_show_diff_since() {
    show_diff_since(wpTalk, document.getElementById('newmessages-diffsince'), '&lt;b&gt;diff since...&lt;/b&gt;');
}

addOnloadHook(newmessages_Load);

// &lt;/pre&gt;&lt;/nowiki&gt;&lt;/pre&gt;
</pre><div class="printfooter">
Retrieved from "<a href="http://en.wikipedia.org../../../a/c/h/User%7EAchille_allquarls.js_0218.html">http://en.wikipedia.org../../../a/c/h/User%7EAchille_allquarls.js_0218.html</a>"</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-user"
	       class="selected"	       ><a href="../../../a/c/h/User%7EAchille_allquarls.js_0218.html">User page</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../a/c/h/User_talk%7EAchille_allquarls.js_4c67.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://en.wikipedia.org/wiki/User:Achille/allquarls.js">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../images/wiki-en.png);"
	    href="../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Main-page"><a href="../../../index.html">Main page</a></li>
	     	      <li id="n-Contents"><a href="../../../c/o/n/Wikipedia%7EContents_3181.html">Contents</a></li>
	     	      <li id="n-Featured-content"><a href="../../../f/e/a/Wikipedia%7EFeatured_content_24ba.html">Featured content</a></li>
	     	      <li id="n-currentevents"><a href="../../../c/u/r/Portal%7ECurrent_events_bb60.html">Current events</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-interaction'>
	  <h5>interaction</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-About-Wikipedia"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html">About Wikipedia</a></li>
	     	      <li id="n-portal"><a href="../../../c/o/m/Wikipedia%7ECommunity_Portal_6a3c.html">Community portal</a></li>
	     	      <li id="n-contact"><a href="../../../c/o/n/Wikipedia%7EContact_us_afd6.html">Contact us</a></li>
	     	      <li id="n-sitesupport"><a href="http://wikimediafoundation.org/wiki/Fundraising">Make a donation</a></li>
	     	      <li id="n-help"><a href="../../../c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>	<div id="f-copyrightico"><a href="http://wikimediafoundation.org/"><img src="../../../images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>	<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 10:58, 24 January 2006 by Wikipedia user This user has left wikipedia. </li>	  <li id="f-copyright">All text is available under the terms of the <a class='internal' href="../../../t/e/x/Wikipedia%7EText_of_the_GNU_Free_Documentation_License_702a.html" title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal' href="../../../c/o/p/Wikipedia%7ECopyrights_92c4.html" title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the <a href="http://www.wikimediafoundation.org">Wikimedia Foundation, Inc</a>., a US-registered <a class='internal' href="../../../5/0/1/501%28c%29.html#501.28c.29.283.29" title="501(c)(3)">501(c)(3)</a> <a href="http://wikimediafoundation.org/wiki/Deductibility_of_donations">tax-deductible</a> <a class='internal' href="../../../n/o/n/Non-profit_organization.html" title="Non-profit organization">nonprofit</a> <a href="../../../c/h/a/Charitable_organization.html" title="Charitable organization">charity</a>.<br /></li>	  <li id="f-about"><a href="../../../a/b/o/Wikipedia%7EAbout_8d82.html" title="Wikipedia:About">About Wikipedia</a></li>	  <li id="f-disclaimer"><a href="../../../g/e/n/Wikipedia%7EGeneral_disclaimer_3e44.html" title="Wikipedia:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
